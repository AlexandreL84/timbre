import{A as zs,B as kl,C as Bt,Ya as gg,Za as kn,a as zD,b as Sl,c as HD,d as qD,e as GD,f as Al,g as hg,h as Rl,i as nc,n as fg,o as xl,p as Ml,q as WD,r as pg,t as we,u as cr,v as Pn,w as Nl,x as zi,y as rc,z as Pl}from"./chunk-CWYCP6BQ.js";import{a as q,b as Re,j as dg,k as x}from"./chunk-GV7GV3NK.js";function KD(t,e){return Object.is(t,e)}var it=null,ic=!1,Ol=1,Yt=Symbol("SIGNAL");function fe(t){let e=it;return it=t,e}function QD(){return it}function HP(){return ic}var Hs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ll(t){if(ic)throw new Error("");if(it===null)return;it.consumerOnSignalRead(t);let e=it.nextProducerIndex++;if($l(it),e<it.producerNode.length&&it.producerNode[e]!==t&&sc(it)){let n=it.producerNode[e];Bl(n,it.producerIndexOfThis[e])}it.producerNode[e]!==t&&(it.producerNode[e]=t,it.producerIndexOfThis[e]=sc(it)?eT(t,it,e):0),it.producerLastReadVersion[e]=t.version}function qP(){Ol++}function YD(t){if(!(sc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ol)){if(!t.producerMustRecompute(t)&&!jl(t)){t.dirty=!1,t.lastCleanEpoch=Ol;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ol}}function ZD(t){if(t.liveConsumerNode===void 0)return;let e=ic;ic=!0;try{for(let n of t.liveConsumerNode)n.dirty||JD(n)}finally{ic=e}}function XD(){return it?.consumerAllowSignalWrites!==!1}function JD(t){t.dirty=!0,ZD(t),t.consumerMarkedDirty?.(t)}function oc(t){return t&&(t.nextProducerIndex=0),fe(t)}function Vl(t,e){if(fe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Bl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function jl(t){$l(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(YD(n),r!==n.version))return!0}return!1}function Ul(t){if($l(t),sc(t))for(let e=0;e<t.producerNode.length;e++)Bl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function eT(t,e,n){if(tT(t),t.liveConsumerNode.length===0&&nT(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=eT(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Bl(t,e){if(tT(t),t.liveConsumerNode.length===1&&nT(t))for(let r=0;r<t.producerNode.length;r++)Bl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];$l(i),i.producerIndexOfThis[r]=e}}function sc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function $l(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function tT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function nT(t){return t.producerNode!==void 0}function _g(t){let e=Object.create(GP);e.computation=t;let n=()=>{if(YD(e),Ll(e),e.value===Fl)throw e.error;return e.value};return n[Yt]=e,n}var mg=Symbol("UNSET"),yg=Symbol("COMPUTING"),Fl=Symbol("ERRORED"),GP=Re(q({},Hs),{value:mg,dirty:!0,error:null,equal:KD,producerMustRecompute(t){return t.value===mg||t.value===yg},producerRecomputeValue(t){if(t.value===yg)throw new Error("Detected cycle in computations.");let e=t.value;t.value=yg;let n=oc(t),r;try{r=t.computation()}catch(i){r=Fl,t.error=i}finally{Vl(t,n)}if(e!==mg&&e!==Fl&&r!==Fl&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function WP(){throw new Error}var rT=WP;function iT(){rT()}function sT(t){rT=t}var KP=null;function oT(t){let e=Object.create(wg);e.value=t;let n=()=>(Ll(e),e.value);return n[Yt]=e,n}function zl(t,e){XD()||iT(),t.equal(t.value,e)||(t.value=e,QP(t))}function aT(t,e){XD()||iT(),zl(t,e(t.value))}var wg=Re(q({},Hs),{equal:KD,value:void 0});function QP(t){t.version++,qP(),ZD(t),KP?.()}function cT(t,e,n){let r=Object.create(YP);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Ul(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=vg)}let a=()=>{if(r.fn===null)return;if(HP())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!jl(r))return;r.hasRun=!0;let c=oc(r);try{r.cleanupFn(),r.cleanupFn=vg,r.fn(i)}finally{Vl(r,c)}};return r.ref={notify:()=>JD(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Yt]:r},r.ref}var vg=()=>{},YP=Re(q({},Hs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:vg});function X(t){return typeof t=="function"}function qs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hl=qs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Be=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(s){e=s instanceof Hl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{uT(s)}catch(o){e=e??[],o instanceof Hl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)uT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hi(n,e)}remove(e){let{_finalizers:n}=this;n&&Hi(n,e),e instanceof t&&e._removeParent(this)}};Be.EMPTY=(()=>{let t=new Be;return t.closed=!0,t})();var Eg=Be.EMPTY;function ql(t){return t instanceof Be||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function uT(t){X(t)?t():t.unsubscribe()}var mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gs={setTimeout(t,e,...n){let{delegate:r}=Gs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Gs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gl(t){Gs.setTimeout(()=>{let{onUnhandledError:e}=mn;if(e)e(t);else throw t})}function ac(){}var lT=Ig("C",void 0,void 0);function dT(t){return Ig("E",void 0,t)}function hT(t){return Ig("N",t,void 0)}function Ig(t,e,n){return{kind:t,value:e,error:n}}var qi=null;function Ws(t){if(mn.useDeprecatedSynchronousErrorHandling){let e=!qi;if(e&&(qi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=qi;if(qi=null,n)throw r}}else t()}function fT(t){mn.useDeprecatedSynchronousErrorHandling&&qi&&(qi.errorThrown=!0,qi.error=t)}var Gi=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ql(e)&&e.add(this)):this.destination=JP}static create(e,n,r){return new ur(e,n,r)}next(e){this.isStopped?Tg(hT(e),this):this._next(e)}error(e){this.isStopped?Tg(dT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Tg(lT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZP=Function.prototype.bind;function Dg(t,e){return ZP.call(t,e)}var bg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wl(r)}else Wl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wl(n)}}},ur=class extends Gi{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&mn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dg(e.next,s),error:e.error&&Dg(e.error,s),complete:e.complete&&Dg(e.complete,s)}):i=e}this.destination=new bg(i)}};function Wl(t){mn.useDeprecatedSynchronousErrorHandling?fT(t):Gl(t)}function XP(t){throw t}function Tg(t,e){let{onStoppedNotification:n}=mn;n&&Gs.setTimeout(()=>n(t,e))}var JP={closed:!0,next:ac,error:XP,complete:ac};var Ks=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xt(t){return t}function Cg(...t){return Sg(t)}function Sg(t){return t.length===0?xt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=tk(n)?n:new ur(n,r,i);return Ws(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=pT(r),new r((i,s)=>{let o=new ur({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ks](){return this}pipe(...n){return Sg(n)(this)}toPromise(n){return n=pT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function pT(t){var e;return(e=t??mn.Promise)!==null&&e!==void 0?e:Promise}function ek(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function tk(t){return t&&t instanceof Gi||ek(t)&&ql(t)}function Ag(t){return X(t?.lift)}function ie(t){return e=>{if(Ag(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,i){return new Rg(t,e,n,r,i)}var Rg=class extends Gi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Qs(){return ie((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ys=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ag(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return Qs()(this)}};var gT=qs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Kl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new gT}next(n){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Eg:(this.currentObservers=null,s.push(n),new Be(()=>{this.currentObservers=null,Hi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Kl(e,n),t})(),Kl=class extends qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Eg}};var dt=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cc={now(){return(cc.delegate||Date).now()},delegate:void 0};var uc=class extends qe{constructor(e=1/0,n=1/0,r=cc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ql=class extends Be{constructor(e,n){super()}schedule(e,n=0){return this}};var lc={setInterval(t,e,...n){let{delegate:r}=lc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=lc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Zs=class extends Ql{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return lc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&lc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Xs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Xs.now=cc.now;var Js=class extends Xs{constructor(e,n=Xs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var qr=new Js(Zs),xg=qr;var Yl=class extends Zs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Zl=class extends Js{};var Mg=new Zl(Yl);var Mt=new ae(t=>t.complete());function Xl(t){return t&&X(t.schedule)}function Ng(t){return t[t.length-1]}function Jl(t){return X(Ng(t))?t.pop():void 0}function On(t){return Xl(Ng(t))?t.pop():void 0}function mT(t,e){return typeof Ng(t)=="number"?t.pop():e}var eo=t=>t&&typeof t.length=="number"&&typeof t!="function";function ed(t){return X(t?.then)}function td(t){return X(t[Ks])}function nd(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function rd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var id=nk();function sd(t){return X(t?.[id])}function od(t){return HD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Sl(n.read());if(i)return yield Sl(void 0);yield yield Sl(r)}}finally{n.releaseLock()}})}function ad(t){return X(t?.getReader)}function De(t){if(t instanceof ae)return t;if(t!=null){if(td(t))return rk(t);if(eo(t))return ik(t);if(ed(t))return sk(t);if(nd(t))return yT(t);if(sd(t))return ok(t);if(ad(t))return ak(t)}throw rd(t)}function rk(t){return new ae(e=>{let n=t[Ks]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ik(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function sk(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Gl)})}function ok(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yT(t){return new ae(e=>{ck(t,e).catch(n=>e.error(n))})}function ak(t){return yT(od(t))}function ck(t,e){var n,r,i,s;return zD(this,void 0,void 0,function*(){try{for(n=qD(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function $t(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function lr(t,e=0){return ie((n,r)=>{n.subscribe(re(r,i=>$t(r,t,()=>r.next(i),e),()=>$t(r,t,()=>r.complete(),e),i=>$t(r,t,()=>r.error(i),e)))})}function Gr(t,e=0){return ie((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vT(t,e){return De(t).pipe(Gr(e),lr(e))}function _T(t,e){return De(t).pipe(Gr(e),lr(e))}function wT(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ET(t,e){return new ae(n=>{let r;return $t(n,e,()=>{r=t[id](),$t(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function cd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{$t(n,e,()=>{let r=t[Symbol.asyncIterator]();$t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function IT(t,e){return cd(od(t),e)}function DT(t,e){if(t!=null){if(td(t))return vT(t,e);if(eo(t))return wT(t,e);if(ed(t))return _T(t,e);if(nd(t))return cd(t,e);if(sd(t))return ET(t,e);if(ad(t))return IT(t,e)}throw rd(t)}function Ee(t,e){return e?DT(t,e):De(t)}function J(...t){let e=On(t);return Ee(t,e)}function to(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function Pg(t){return!!t&&(t instanceof ae||X(t.lift)&&X(t.subscribe))}var dr=qs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function TT(t){return t instanceof Date&&!isNaN(t)}function ce(t,e){return ie((n,r)=>{let i=0;n.subscribe(re(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:uk}=Array;function lk(t,e){return uk(e)?t(...e):t(e)}function no(t){return ce(e=>lk(t,e))}var{isArray:dk}=Array,{getPrototypeOf:hk,prototype:fk,keys:pk}=Object;function ud(t){if(t.length===1){let e=t[0];if(dk(e))return{args:e,keys:null};if(gk(e)){let n=pk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function gk(t){return t&&typeof t=="object"&&hk(t)===fk}function ld(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function dc(...t){let e=On(t),n=Jl(t),{args:r,keys:i}=ud(t);if(r.length===0)return Ee([],e);let s=new ae(mk(r,e,i?o=>ld(i,o):xt));return n?s.pipe(no(n)):s}function mk(t,e,n=xt){return r=>{bT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)bT(e,()=>{let l=Ee(t[c],e),d=!1;l.subscribe(re(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function bT(t,e,n){t?$t(n,t,e):e()}function CT(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=S=>l<r?_(S):c.push(S),_=S=>{s&&e.next(S),l++;let D=!1;De(n(S,d++)).subscribe(re(e,P=>{i?.(P),s?m(P):e.next(P)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<r;){let P=c.shift();o?$t(e,o,()=>_(P)):_(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(re(e,m,()=>{f=!0,g()})),()=>{a?.()}}function $e(t,e,n=1/0){return X(e)?$e((r,i)=>ce((s,o)=>e(r,s,i,o))(De(t(r,i))),n):(typeof e=="number"&&(n=e),ie((r,i)=>CT(r,i,t,n)))}function Wr(t=1/0){return $e(xt,t)}function ST(){return Wr(1)}function ro(...t){return ST()(Ee(t,On(t)))}function dd(t){return new ae(e=>{De(t()).subscribe(e)})}function yk(...t){let e=Jl(t),{args:n,keys:r}=ud(t),i=new ae(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;De(n[d]).subscribe(re(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?ld(r,a):a),s.complete())}))}});return e?i.pipe(no(e)):i}var vk=["addListener","removeListener"],_k=["addEventListener","removeEventListener"],wk=["on","off"];function kg(t,e,n,r){if(X(n)&&(r=n,n=void 0),r)return kg(t,e,n).pipe(no(r));let[i,s]=Dk(t)?_k.map(o=>a=>t[o](e,a,n)):Ek(t)?vk.map(AT(t,e)):Ik(t)?wk.map(AT(t,e)):[];if(!i&&eo(t))return $e(o=>kg(o,e,n))(De(t));if(!i)throw new TypeError("Invalid event target");return new ae(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function AT(t,e){return n=>r=>t[n](e,r)}function Ek(t){return X(t.addListener)&&X(t.removeListener)}function Ik(t){return X(t.on)&&X(t.off)}function Dk(t){return X(t.addEventListener)&&X(t.removeEventListener)}function RT(t=0,e,n=xg){let r=-1;return e!=null&&(Xl(e)?n=e:r=e),new ae(i=>{let s=TT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Tk(...t){let e=On(t),n=mT(t,1/0),r=t;return r.length?r.length===1?De(r[0]):Wr(n)(Ee(r,e)):Mt}function Et(t,e){return ie((n,r)=>{let i=0;n.subscribe(re(r,s=>t.call(e,s,i++)&&r.next(s)))})}function xT(t){return ie((e,n)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(re(n,l=>{r=!0,i=l,s||De(t(l)).subscribe(s=re(n,a,c))},()=>{o=!0,(!r||!s||s.closed)&&n.complete()}))})}function bk(t,e=qr){return xT(()=>RT(t,e))}function hr(t){return ie((e,n)=>{let r=null,i=!1,s;r=e.subscribe(re(n,void 0,void 0,o=>{s=De(t(o,hr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function MT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(re(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function fr(t,e){return X(e)?$e(t,e,1):$e(t,1)}function Og(t,e=qr){return ie((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+t,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}n.subscribe(re(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Kr(t){return ie((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function pr(t){return t<=0?()=>Mt:ie((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Fg(t){return ce(()=>t)}function Ck(t,e=xt){return t=t??Sk,ie((n,r)=>{let i,s=!0;n.subscribe(re(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function Sk(t,e){return t===e}function hd(t=Ak){return ie((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Ak(){return new dr}function Wi(t){return ie((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,s)=>t(i,s,r)):xt,pr(1),n?Kr(e):hd(()=>new dr))}function io(t){return t<=0?()=>Mt:ie((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Lg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,s)=>t(i,s,r)):xt,io(1),n?Kr(e):hd(()=>new dr))}function Rk(){return ie((t,e)=>{let n,r=!1;t.subscribe(re(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Vg(t,e){return ie(MT(t,e,arguments.length>=2,!0))}function Ug(t={}){let{connector:e=()=>new qe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=f=!1},_=()=>{let S=o;m(),S?.unsubscribe()};return ie((S,D)=>{l++,!f&&!d&&g();let P=c=c??e();D.add(()=>{l--,l===0&&!f&&!d&&(a=jg(_,i))}),P.subscribe(D),!o&&l>0&&(o=new ur({next:L=>P.next(L),error:L=>{f=!0,g(),a=jg(m,n,L),P.error(L)},complete:()=>{d=!0,g(),a=jg(m,r),P.complete()}}),De(S).subscribe(o))})(s)}}function jg(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new ur({next:()=>{r.unsubscribe(),t()}});return De(e(...n)).subscribe(r)}function xk(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Ug({connector:()=>new uc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Mk(t){return Et((e,n)=>t<=n)}function Bg(...t){let e=On(t);return ie((n,r)=>{(e?ro(t,n,e):ro(t,n)).subscribe(r)})}function Ge(t,e){return ie((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(re(r,c=>{i?.unsubscribe();let l=0,d=s++;De(t(c,d)).subscribe(i=re(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Nk(t,e){return X(e)?Ge(()=>t,e):Ge(()=>t)}function $g(t){return ie((e,n)=>{De(t).subscribe(re(n,()=>n.complete(),ac)),!n.closed&&e.subscribe(n)})}function Pk(t,e=!1){return ie((n,r)=>{let i=0;n.subscribe(re(r,s=>{let o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}function We(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?ie((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(re(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xt}var D0="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(Jd(e,n)),this.code=e}};function Jd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var T0=Symbol("InputSignalNode#UNSET"),kk=Re(q({},wg),{transformFn:void 0,applyValueToInputSignal(t,e){zl(t,e)}});function b0(t,e){let n=Object.create(kk);n.value=t,n.transformFn=e?.transform;function r(){if(Ll(n),n.value===T0)throw new Q(-950,!1);return n.value}return r[Yt]=n,r}function Ic(t){return{toString:t}.toString()}var fd="__parameters__";function Ok(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function C0(t,e,n){return Ic(()=>{let r=Ok(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(fd)?c[fd]:Object.defineProperty(c,fd,{value:[]})[fd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var pc=globalThis;function Se(t){for(let e in t)if(t[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Fk(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Pt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function nm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Lk=Se({__forward_ref__:Se});function S0(t){return t.__forward_ref__=S0,t.toString=function(){return Pt(this())},t}function ht(t){return A0(t)?t():t}function A0(t){return typeof t=="function"&&t.hasOwnProperty(Lk)&&t.__forward_ref__===S0}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function En(t){return{providers:t.providers||[],imports:t.imports||[]}}function eh(t){return NT(t,x0)||NT(t,M0)}function R0(t){return eh(t)!==null}function NT(t,e){return t.hasOwnProperty(e)?t[e]:null}function Vk(t){let e=t&&(t[x0]||t[M0]);return e||null}function PT(t){return t&&(t.hasOwnProperty(kT)||t.hasOwnProperty(jk))?t[kT]:null}var x0=Se({\u0275prov:Se}),kT=Se({\u0275inj:Se}),M0=Se({ngInjectableDef:Se}),jk=Se({ngInjectorDef:Se}),K=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function N0(t){return t&&!!t.\u0275providers}var Uk=Se({\u0275cmp:Se}),Bk=Se({\u0275dir:Se}),$k=Se({\u0275pipe:Se}),zk=Se({\u0275mod:Se}),Sd=Se({\u0275fac:Se}),fc=Se({__NG_ELEMENT_ID__:Se}),OT=Se({__NG_ENV_ID__:Se});function Dc(t){return typeof t=="string"?t:t==null?"":String(t)}function Hk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Dc(t)}function qk(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function yy(t,e){throw new Q(-201,!1)}var he=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(he||{}),rm;function P0(){return rm}function zt(t){let e=rm;return rm=t,e}function k0(t,e,n){let r=eh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&he.Optional)return null;if(e!==void 0)return e;yy(t,"Injector")}var Gk={},gc=Gk,im="__NG_DI_FLAG__",Ad="ngTempTokenPath",Wk="ngTokenPath",Kk=/\n/gm,Qk="\u0275",FT="__source",uo;function Yk(){return uo}function Qr(t){let e=uo;return uo=t,e}function Zk(t,e=he.Default){if(uo===void 0)throw new Q(-203,!1);return uo===null?k0(t,void 0,e):uo.get(t,e&he.Optional?null:void 0,e)}function z(t,e=he.Default){return(P0()||Zk)(ht(t),e)}function F(t,e=he.Default){return z(t,th(e))}function th(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sm(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=he.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Xk(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function O0(t,e){return t[im]=e,t.prototype[im]=e,t}function Xk(t){return t[im]}function Jk(t,e,n,r){let i=t[Ad];throw e[FT]&&i.unshift(e[FT]),t.message=e1(`
`+t.message,i,n,r),t[Wk]=i,t[Ad]=null,t}function e1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Qk?t.slice(2):t;let i=Pt(e);if(Array.isArray(e))i=e.map(Pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Pt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Kk,`
  `)}`}var Hn=O0(C0("Optional"),8);var nh=O0(C0("SkipSelf"),4);function Zi(t,e){let n=t.hasOwnProperty(Sd);return n?t[Sd]:null}function t1(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function n1(t){return t.flat(Number.POSITIVE_INFINITY)}function vy(t,e){t.forEach(n=>Array.isArray(n)?vy(n,e):e(n))}function F0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Rd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function r1(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function i1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function rh(t,e,n){let r=Tc(t,e);return r>=0?t[r|1]=n:(r=~r,i1(t,r,e,n)),r}function zg(t,e){let n=Tc(t,e);if(n>=0)return t[n|1]}function Tc(t,e){return s1(t,e,1)}function s1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var gr={},Nt=[],ho=new K(""),L0=new K("",-1),V0=new K(""),xd=class{get(e,n=gc){if(n===gc){let r=new Error(`NullInjectorError: No provider for ${Pt(e)}!`);throw r.name="NullInjectorError",r}return n}},j0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(j0||{}),Vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vn||{}),Xr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Xr||{});function o1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function om(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];a1(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function U0(t){return t===3||t===4||t===6}function a1(t){return t.charCodeAt(0)===64}function mc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?LT(t,n,i,null,e[++r]):LT(t,n,i,null,null))}}return t}function LT(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var B0="ng-template";function c1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&o1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(_y(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function _y(t){return t.type===4&&t.value!==B0}function u1(t,e,n){let r=t.type===4&&!n?B0:t.value;return e===r}function l1(t,e,n){let r=4,i=t.attrs,s=i!==null?f1(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!vn(r)&&!vn(c))return!1;if(o&&vn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!u1(t,c,n)||c===""&&e.length===1){if(vn(r))return!1;o=!0}}else if(r&8){if(i===null||!c1(t,i,c,n)){if(vn(r))return!1;o=!0}}else{let l=e[++a],d=d1(c,i,_y(t),n);if(d===-1){if(vn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(vn(r))return!1;o=!0}}}}return vn(r)||o}function vn(t){return(t&1)===0}function d1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return p1(e,t)}function $0(t,e,n=!1){for(let r=0;r<e.length;r++)if(l1(t,e[r],n))return!0;return!1}function h1(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function f1(t){for(let e=0;e<t.length;e++){let n=t[e];if(U0(n))return e}return t.length}function p1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function g1(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function VT(t,e){return t?":not("+e.trim()+")":e}function m1(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!vn(o)&&(e+=VT(s,i),i=""),r=o,s=s||!vn(r);n++}return i!==""&&(e+=VT(s,i)),e}function y1(t){return t.map(m1).join(",")}function v1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!vn(i))break;i=s}r++}return{attrs:e,classes:n}}function bc(t){return Ic(()=>{let e=G0(t),n=Re(q({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===j0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vn.Emulated,styles:t.styles||Nt,_:null,schemas:t.schemas||null,tView:null,id:""});W0(n);let r=t.dependencies;return n.directiveDefs=UT(r,!1),n.pipeDefs=UT(r,!0),n.id=E1(n),n})}function _1(t){return mr(t)||Ey(t)}function w1(t){return t!==null}function In(t){return Ic(()=>({type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jT(t,e){if(t==null)return gr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Xr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Xr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ni(t){return Ic(()=>{let e=G0(t);return W0(e),e})}function wy(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function mr(t){return t[Uk]||null}function Ey(t){return t[Bk]||null}function z0(t){return t[$k]||null}function H0(t){let e=mr(t)||Ey(t)||z0(t);return e!==null?e.standalone:!1}function q0(t,e){let n=t[zk]||null;if(!n&&e===!0)throw new Error(`Type ${Pt(t)} does not have '\u0275mod' property.`);return n}function G0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||gr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jT(t.inputs,e),outputs:jT(t.outputs),debugInfo:null}}function W0(t){t.features?.forEach(e=>e(t))}function UT(t,e){if(!t)return null;let n=e?z0:_1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(w1)}function E1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ri(t){return{\u0275providers:t}}function I1(...t){return{\u0275providers:K0(!0,t),\u0275fromNgModule:!0}}function K0(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return vy(e,o=>{let a=o;am(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Q0(i,s),n}function Q0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Iy(i,s=>{e(s,r)})}}function am(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,s=PT(t),o=!s&&mr(t);if(!s&&!o){let c=t.ngModule;if(s=PT(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)am(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{vy(s.imports,d=>{am(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Q0(l,e)}if(!a){let l=Zi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:V0,useValue:i,multi:!0},i),e({provide:ho,useValue:()=>z(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Iy(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Iy(t,e){for(let n of t)N0(n)&&(n=n.\u0275providers),Array.isArray(n)?Iy(n,e):e(n)}var D1=Se({provide:String,useValue:Se});function Y0(t){return t!==null&&typeof t=="object"&&D1 in t}function T1(t){return!!(t&&t.useExisting)}function b1(t){return!!(t&&t.useFactory)}function fo(t){return typeof t=="function"}function C1(t){return!!t.useClass}var ih=new K(""),wd={},S1={},Hg;function sh(){return Hg===void 0&&(Hg=new xd),Hg}var kt=class{},yc=class extends kt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,um(e,o=>this.processProvider(o)),this.records.set(L0,so(void 0,this)),i.has("environment")&&this.records.set(kt,so(void 0,this));let s=this.records.get(ih);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(V0,Nt,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Qr(this),r=zt(void 0),i;try{return e()}finally{Qr(n),zt(r)}}get(e,n=gc,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(OT))return e[OT](this);r=th(r);let i,s=Qr(this),o=zt(void 0);try{if(!(r&he.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=N1(e)&&eh(e);l&&this.injectableDefInScope(l)?c=so(cm(e),wd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&he.Self?sh():this.parent;return n=r&he.Optional&&n===gc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ad]=a[Ad]||[]).unshift(Pt(e)),s)throw a;return Jk(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),Qr(s)}}resolveInjectorInitializers(){let e=fe(null),n=Qr(this),r=zt(void 0),i;try{let s=this.get(ho,Nt,he.Self);for(let o of s)o()}finally{Qr(n),zt(r),fe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=ht(e);let n=fo(e)?e:ht(e&&e.provide),r=R1(e);if(!fo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=so(void 0,wd,!0),i.factory=()=>sm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=fe(null);try{return n.value===wd&&(n.value=S1,n.value=n.factory()),typeof n.value=="object"&&n.value&&M1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function cm(t){let e=eh(t),n=e!==null?e.factory:Zi(t);if(n!==null)return n;if(t instanceof K)throw new Q(204,!1);if(t instanceof Function)return A1(t);throw new Q(204,!1)}function A1(t){if(t.length>0)throw new Q(204,!1);let n=Vk(t);return n!==null?()=>n.factory(t):()=>new t}function R1(t){if(Y0(t))return so(void 0,t.useValue);{let e=Z0(t);return so(e,wd)}}function Z0(t,e,n){let r;if(fo(t)){let i=ht(t);return Zi(i)||cm(i)}else if(Y0(t))r=()=>ht(t.useValue);else if(b1(t))r=()=>t.useFactory(...sm(t.deps||[]));else if(T1(t))r=()=>z(ht(t.useExisting));else{let i=ht(t&&(t.useClass||t.provide));if(x1(t))r=()=>new i(...sm(t.deps));else return Zi(i)||cm(i)}return r}function so(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function x1(t){return!!t.deps}function M1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function N1(t){return typeof t=="function"||typeof t=="object"&&t instanceof K}function um(t,e){for(let n of t)Array.isArray(n)?um(n,e):n&&N0(n)?um(n.\u0275providers,e):e(n)}function an(t,e){t instanceof yc&&t.assertNotDestroyed();let n,r=Qr(t),i=zt(void 0);try{return e()}finally{Qr(r),zt(i)}}function X0(){return P0()!==void 0||Yk()!=null}function Dy(t){if(!X0())throw new Q(-203,!1)}function P1(t){return typeof t=="function"}var qn=0,se=1,ne=2,Tt=3,wn=4,qt=5,po=6,Md=7,It=8,go=9,jn=10,Pe=11,vc=12,BT=13,Do=14,Zt=15,Xi=16,oo=17,yr=18,oh=19,J0=20,Yr=21,Ed=22,on=23,ft=25,Ty=1;var Ji=7,Nd=8,mo=9,Dt=10,Pd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pd||{});function Zr(t){return Array.isArray(t)&&typeof t[Ty]=="object"}function wr(t){return Array.isArray(t)&&t[Ty]===!0}function by(t){return(t.flags&4)!==0}function ah(t){return t.componentOffset>-1}function ch(t){return(t.flags&1)===1}function vr(t){return!!t.template}function lm(t){return(t[ne]&512)!==0}var dm=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function eb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Cc(){return tb}function tb(t){return t.type.prototype.ngOnChanges&&(t.setInput=O1),k1}Cc.ngInherit=!0;function k1(){let t=rb(this),e=t?.current;if(e){let n=t.previous;if(n===gr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function O1(t,e,n,r,i){let s=this.declaredInputs[r],o=rb(t)||F1(t,{previous:gr,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new dm(l&&l.currentValue,n,c===gr),eb(t,e,i,n)}var nb="__ngSimpleChanges__";function rb(t){return t[nb]||null}function F1(t,e){return t[nb]=e}var $T=null;var Fn=function(t,e,n){$T?.(t,e,n)},ib="svg",L1="math";function Un(t){for(;Array.isArray(t);)t=t[qn];return t}function V1(t){for(;Array.isArray(t);){if(typeof t[Ty]=="object")return t;t=t[qn]}return null}function sb(t,e){return Un(e[t])}function cn(t,e){return Un(e[t.index])}function Cy(t,e){return t.data[e]}function ob(t,e){return t[e]}function ii(t,e){let n=e[t];return Zr(n)?n:n[qn]}function j1(t){return(t[ne]&4)===4}function Sy(t){return(t[ne]&128)===128}function U1(t){return wr(t[Tt])}function Jr(t,e){return e==null?null:t[e]}function ab(t){t[oo]=0}function cb(t){t[ne]&1024||(t[ne]|=1024,Sy(t)&&lh(t))}function B1(t,e){for(;t>0;)e=e[Do],t--;return e}function uh(t){return!!(t[ne]&9216||t[on]?.dirty)}function hm(t){t[jn].changeDetectionScheduler?.notify(8),t[ne]&64&&(t[ne]|=1024),uh(t)&&lh(t)}function lh(t){t[jn].changeDetectionScheduler?.notify(0);let e=es(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Sy(e)));)e=es(e)}function ub(t,e){if((t[ne]&256)===256)throw new Q(911,!1);t[Yr]===null&&(t[Yr]=[]),t[Yr].push(e)}function $1(t,e){if(t[Yr]===null)return;let n=t[Yr].indexOf(e);n!==-1&&t[Yr].splice(n,1)}function es(t){let e=t[Tt];return wr(e)?e[Tt]:e}var le={lFrame:wb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lb=!1;function z1(){return le.lFrame.elementDepthCount}function H1(){le.lFrame.elementDepthCount++}function q1(){le.lFrame.elementDepthCount--}function db(){return le.bindingsEnabled}function hb(){return le.skipHydrationRootTNode!==null}function G1(t){return le.skipHydrationRootTNode===t}function W1(){le.skipHydrationRootTNode=null}function te(){return le.lFrame.lView}function xe(){return le.lFrame.tView}function fb(t){return le.lFrame.contextLView=t,t[It]}function pb(t){return le.lFrame.contextLView=null,t}function at(){let t=gb();for(;t!==null&&t.type===64;)t=t.parent;return t}function gb(){return le.lFrame.currentTNode}function K1(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function cs(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function Ay(){return le.lFrame.isParent}function Ry(){le.lFrame.isParent=!1}function Q1(){return le.lFrame.contextLView}function mb(){return lb}function zT(t){lb=t}function Sc(){let t=le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Y1(t){return le.lFrame.bindingIndex=t}function si(){return le.lFrame.bindingIndex++}function yb(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Z1(){return le.lFrame.inI18n}function X1(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,fm(e)}function J1(){return le.lFrame.currentDirectiveIndex}function fm(t){le.lFrame.currentDirectiveIndex=t}function xy(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function My(){return le.lFrame.currentQueryIndex}function dh(t){le.lFrame.currentQueryIndex=t}function eO(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[qt]:null}function vb(t,e,n){if(n&he.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&he.Host);)if(i=eO(s),i===null||(s=s[Do],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=le.lFrame=_b();return r.currentTNode=e,r.lView=t,!0}function Ny(t){let e=_b(),n=t[se];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _b(){let t=le.lFrame,e=t===null?null:t.child;return e===null?wb(t):e}function wb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Eb(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ib=Eb;function Py(){let t=Eb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function tO(t){return(le.lFrame.contextLView=B1(t,le.lFrame.contextLView))[It]}function oi(){return le.lFrame.selectedIndex}function ts(t){le.lFrame.selectedIndex=t}function To(){let t=le.lFrame;return Cy(t.tView,t.selectedIndex)}function B7(){le.lFrame.currentNamespace=ib}function $7(){nO()}function nO(){le.lFrame.currentNamespace=null}function rO(){return le.lFrame.currentNamespace}var Db=!0;function hh(){return Db}function fh(t){Db=t}function iO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=tb(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ph(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Id(t,e,n){Tb(t,e,3,n)}function Dd(t,e,n,r){(t[ne]&3)===n&&Tb(t,e,n,r)}function qg(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function Tb(t,e,n,r){let i=r!==void 0?t[oo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[oo]+=65536),(a<s||s==-1)&&(sO(t,n,e,c),t[oo]=(t[oo]&4294901760)+c+2),c++}function HT(t,e){Fn(4,t,e);let n=fe(null);try{e.call(t)}finally{fe(n),Fn(5,t,e)}}function sO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ne]>>14<t[oo]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,HT(a,s)):HT(a,s)}var lo=-1,ns=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function oO(t){return t instanceof ns}function aO(t){return(t.flags&8)!==0}function cO(t){return(t.flags&16)!==0}var Gg={},pm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=th(r);let i=this.injector.get(e,Gg,r);return i!==Gg||n===Gg?i:this.parentInjector.get(e,n,r)}};function bb(t){return t!==lo}function kd(t){return t&32767}function uO(t){return t>>16}function Od(t,e){let n=uO(t),r=e;for(;n>0;)r=r[Do],n--;return r}var gm=!0;function Fd(t){let e=gm;return gm=t,e}var lO=256,Cb=lO-1,Sb=5,dO=0,Ln={};function hO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(fc)&&(r=n[fc]),r==null&&(r=n[fc]=dO++);let i=r&Cb,s=1<<i;e.data[t+(i>>Sb)]|=s}function Ld(t,e){let n=Ab(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Wg(r.data,t),Wg(e,null),Wg(r.blueprint,null));let i=ky(t,e),s=t.injectorIndex;if(bb(i)){let o=kd(i),a=Od(i,e),c=a[se].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Wg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ab(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ky(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Pb(i),r===null)return lo;if(n++,i=i[Do],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return lo}function mm(t,e,n){hO(t,e,n)}function fO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(U0(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function Rb(t,e,n){if(n&he.Optional||t!==void 0)return t;yy(e,"NodeInjector")}function xb(t,e,n,r){if(n&he.Optional&&r===void 0&&(r=null),!(n&(he.Self|he.Host))){let i=t[go],s=zt(void 0);try{return i?i.get(e,r,n&he.Optional):k0(e,r,n&he.Optional)}finally{zt(s)}}return Rb(r,e,n)}function Mb(t,e,n,r=he.Default,i){if(t!==null){if(e[ne]&2048&&!(r&he.Self)){let o=yO(t,e,n,r,Ln);if(o!==Ln)return o}let s=Nb(t,e,n,r,Ln);if(s!==Ln)return s}return xb(e,n,r,i)}function Nb(t,e,n,r,i){let s=gO(n);if(typeof s=="function"){if(!vb(e,t,r))return r&he.Host?Rb(i,n,r):xb(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&he.Optional))yy(n);else return o}finally{Ib()}}else if(typeof s=="number"){let o=null,a=Ab(t,e),c=lo,l=r&he.Host?e[Zt][qt]:null;for((a===-1||r&he.SkipSelf)&&(c=a===-1?ky(t,e):e[a+8],c===lo||!GT(r,!1)?a=-1:(o=e[se],a=kd(c),e=Od(c,e)));a!==-1;){let d=e[se];if(qT(s,a,d.data)){let f=pO(a,e,n,o,r,l);if(f!==Ln)return f}c=e[a+8],c!==lo&&GT(r,e[se].data[a+8]===l)&&qT(s,a,e)?(o=d,a=kd(c),e=Od(c,e)):a=-1}}return i}function pO(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],c=r==null?ah(a)&&gm:r!=o&&(a.type&3)!==0,l=i&he.Host&&s===a,d=Td(a,o,n,c,l);return d!==null?rs(e,o,d,a):Ln}function Td(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let _=o[m];if(m<c&&n===_||m>=c&&_.type===n)return m}if(i){let m=o[c];if(m&&vr(m)&&m.type===n)return c}return null}function rs(t,e,n,r){let i=t[n],s=e.data;if(oO(i)){let o=i;o.resolving&&qk(Hk(s[n]));let a=Fd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,d=vb(t,r,he.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&iO(n,s[n],e)}finally{l!==null&&zt(l),Fd(a),o.resolving=!1,Ib()}}return i}function gO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(fc)?t[fc]:void 0;return typeof e=="number"?e>=0?e&Cb:mO:e}function qT(t,e,n){let r=1<<t;return!!(n[e+(t>>Sb)]&r)}function GT(t,e){return!(t&he.Self)&&!(t&he.Host&&e)}var Yi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Mb(this._tNode,this._lView,e,th(r),n)}};function mO(){return new Yi(at(),te())}function Oy(t){return Ic(()=>{let e=t.prototype.constructor,n=e[Sd]||ym(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Sd]||ym(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ym(t){return A0(t)?()=>{let e=ym(ht(t));return e&&e()}:Zi(t)}function yO(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ne]&2048&&!(o[ne]&512);){let a=Nb(s,o,n,r|he.Self,Ln);if(a!==Ln)return a;let c=s.parent;if(!c){let l=o[J0];if(l){let d=l.get(n,Ln,r);if(d!==Ln)return d}c=Pb(o),o=o[Do]}s=c}return i}function Pb(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[qt]:null}function kb(t){return fO(at(),t)}function WT(t,e=null,n=null,r){let i=Ob(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ob(t,e=null,n=null,r,i=new Set){let s=[n||Nt,I1(t)];return r=r||(typeof t=="object"?void 0:Pt(t)),new yc(s,e||sh(),r||null,i)}var Ki=class Ki{static create(e,n){if(Array.isArray(e))return WT({name:""},n,e,"");{let r=e.name??"";return WT({name:r},e.parent,e.providers,r)}}};Ki.THROW_IF_NOT_FOUND=gc,Ki.NULL=new xd,Ki.\u0275prov=G({token:Ki,providedIn:"any",factory:()=>z(L0)}),Ki.__NG_ELEMENT_ID__=-1;var Ht=Ki;var vO=new K("");vO.__NG_ELEMENT_ID__=t=>{let e=at();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(t&he.Optional)return null;throw new Q(204,!1)};var _O="ngOriginalError";function Kg(t){return t[_O]}var Fb=!0,gh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),vm=class extends gh{constructor(e){super(),this._lView=e}onDestroy(e){return ub(this._lView,e),()=>$1(this._lView,e)}};function wO(){return new vm(te())}var Er=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var _m=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,X0()&&(this.destroyRef=F(gh,{optional:!0})??void 0,this.pendingTasks=F(Er,{optional:!0})??void 0)}emit(e){let n=fe(null);try{super.next(e)}finally{fe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ze=_m;function Vd(...t){}function Lb(t){let e,n;function r(){t=Vd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function KT(t){return queueMicrotask(()=>t()),()=>{t=Vd}}var Fy="isAngularZone",jd=Fy+"_ID",EO=0,ye=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Fb}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,TO(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,IO,Vd,Vd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},IO={};function Ly(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function DO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Lb(()=>{t.callbackScheduled=!1,wm(t),t.isCheckStableRunning=!0,Ly(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),wm(t)}function TO(t){let e=()=>{DO(t)},n=EO++;t._inner=t._inner.fork({name:"angular",properties:{[Fy]:!0,[jd]:n,[jd+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(bO(c))return r.invokeTask(s,o,a,c);try{return QT(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),YT(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return QT(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!CO(c)&&e(),YT(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,wm(t),Ly(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function wm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function QT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function YT(t){t._nesting--,Ly(t)}var Em=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function bO(t){return Vb(t,"__ignore_ng_zone__")}function CO(t){return Vb(t,"__scheduler_tick__")}function Vb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Bn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Kg(e);for(;n&&Kg(n);)n=Kg(n);return n||null}},SO=new K("",{providedIn:"root",factory:()=>{let t=F(ye),e=F(Bn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function ZT(t,e){return b0(t,e)}function AO(t){return b0(T0,t)}var z7=(ZT.required=AO,ZT);function RO(){return bo(at(),te())}function bo(t,e){return new Ir(cn(t,e))}var Ir=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=RO;let t=e;return t})();function jb(t){return t instanceof Ir?t.nativeElement:t}function xO(){return this._results[Symbol.iterator]()}var Im=class t{get changes(){return this._changes??=new ze}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=xO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=n1(e);(this._changesDetected=!t1(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Ub(t){return(t.flags&128)===128}var Bb=new Map,MO=0;function NO(){return MO++}function PO(t){Bb.set(t[oh],t)}function Dm(t){Bb.delete(t[oh])}var XT="__ngContext__";function ei(t,e){Zr(e)?(t[XT]=e[oh],PO(e)):t[XT]=e}function $b(t){return Hb(t[vc])}function zb(t){return Hb(t[wn])}function Hb(t){for(;t!==null&&!wr(t);)t=t[wn];return t}var Tm;function qb(t){Tm=t}function Gb(){if(Tm!==void 0)return Tm;if(typeof document<"u")return document;throw new Q(210,!1)}var Vy=new K("",{providedIn:"root",factory:()=>kO}),kO="ng",jy=new K(""),Jt=new K("",{providedIn:"platform",factory:()=>"unknown"});var H7=new K(""),Uy=new K("",{providedIn:"root",factory:()=>Gb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var OO="h",FO="b";var LO=()=>null;function By(t,e,n=!1){return LO(t,e,n)}var Wb=!1,VO=new K("",{providedIn:"root",factory:()=>Wb});var pd;function jO(){if(pd===void 0&&(pd=null,pc.trustedTypes))try{pd=pc.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return pd}function mh(t){return jO()?.createHTML(t)||t}var gd;function UO(){if(gd===void 0&&(gd=null,pc.trustedTypes))try{gd=pc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gd}function JT(t){return UO()?.createHTML(t)||t}var _r=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${D0})`}},bm=class extends _r{getTypeName(){return"HTML"}},Cm=class extends _r{getTypeName(){return"Style"}},Sm=class extends _r{getTypeName(){return"Script"}},Am=class extends _r{getTypeName(){return"URL"}},Rm=class extends _r{getTypeName(){return"ResourceURL"}};function Dn(t){return t instanceof _r?t.changingThisBreaksApplicationSecurity:t}function ai(t,e){let n=BO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${D0})`)}return n===e}function BO(t){return t instanceof _r&&t.getTypeName()||null}function Kb(t){return new bm(t)}function Qb(t){return new Cm(t)}function Yb(t){return new Sm(t)}function Zb(t){return new Am(t)}function Xb(t){return new Rm(t)}function $O(t){let e=new Mm(t);return zO()?new xm(e):e}var xm=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(mh(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},Mm=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=mh(e),n}};function zO(){try{return!!new window.DOMParser().parseFromString(mh(""),"text/html")}catch{return!1}}var HO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yh(t){return t=String(t),t.match(HO)?t:"unsafe:"+t}function Dr(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Ac(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var Jb=Dr("area,br,col,hr,img,wbr"),eC=Dr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tC=Dr("rp,rt"),qO=Ac(tC,eC),GO=Ac(eC,Dr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),WO=Ac(tC,Dr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),e0=Ac(Jb,GO,WO,qO),nC=Dr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),KO=Dr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),QO=Dr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),YO=Ac(nC,KO,QO),ZO=Dr("script,style,template"),Nm=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=eF(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=JO(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=t0(e).toLowerCase();if(!e0.hasOwnProperty(n))return this.sanitizedSomething=!0,!ZO.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!YO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;nC[a]&&(c=yh(c)),this.buf.push(" ",o,'="',n0(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=t0(e).toLowerCase();e0.hasOwnProperty(n)&&!Jb.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(n0(e))}};function XO(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function JO(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw rC(e);return e}function eF(t){let e=t.firstChild;if(e&&XO(t,e))throw rC(e);return e}function t0(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function rC(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var tF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nF=/([^\#-~ |!])/g;function n0(t){return t.replace(/&/g,"&amp;").replace(tF,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(nF,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var md;function $y(t,e){let n=null;try{md=md||$O(t);let r=e?String(e):"";n=md.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=md.getInertBodyElement(r)}while(r!==s);let a=new Nm().sanitizeChildren(r0(n)||n);return mh(a)}finally{if(n){let r=r0(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function r0(t){return"content"in t&&rF(t)?t.content:null}function rF(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Gn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Gn||{});function Co(t){let e=iC();return e?JT(e.sanitize(Gn.HTML,t)||""):ai(t,"HTML")?JT(Dn(t)):$y(Gb(),Dc(t))}function q7(t){let e=iC();return e?e.sanitize(Gn.URL,t)||"":ai(t,"URL")?Dn(t):yh(Dc(t))}function iC(){let t=te();return t&&t[jn].sanitizer}var iF=/^>|^->|<!--|-->|--!>|<!-$/g,sF=/(<|>)/g,oF="\u200B$1\u200B";function aF(t){return t.replace(iF,e=>e.replace(sF,oF))}function sC(t){return t instanceof Function?t():t}function oC(t){return(t??F(Ht)).get(Jt)==="browser"}var $n=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($n||{}),cF;function zy(t,e){return cF(t,e)}function ao(t,e,n,r,i){if(r!=null){let s,o=!1;wr(r)?s=r:Zr(r)&&(o=!0,r=r[qn]);let a=Un(r);t===0&&n!==null?i==null?dC(e,n,a):Ud(e,n,a,i||null,!0):t===1&&n!==null?Ud(e,n,a,i||null,!0):t===2?IF(e,a,o):t===3&&e.destroyNode(a),s!=null&&TF(e,t,s,n,i)}}function uF(t,e){return t.createText(e)}function lF(t,e,n){t.setValue(e,n)}function dF(t,e){return t.createComment(aF(e))}function aC(t,e,n){return t.createElement(e,n)}function hF(t,e){cC(t,e),e[qn]=null,e[qt]=null}function fF(t,e,n,r,i,s){r[qn]=i,r[qt]=e,wh(t,r,n,1,i,s)}function cC(t,e){e[jn].changeDetectionScheduler?.notify(9),wh(t,e,e[Pe],2,null,null)}function pF(t){let e=t[vc];if(!e)return Qg(t[se],t);for(;e;){let n=null;if(Zr(e))n=e[vc];else{let r=e[Dt];r&&(n=r)}if(!n){for(;e&&!e[wn]&&e!==t;)Zr(e)&&Qg(e[se],e),e=e[Tt];e===null&&(e=t),Zr(e)&&Qg(e[se],e),n=e&&e[wn]}e=n}}function gF(t,e,n,r){let i=Dt+r,s=n.length;r>0&&(n[i-1][wn]=e),r<s-Dt?(e[wn]=n[i],F0(n,Dt+r,e)):(n.push(e),e[wn]=null),e[Tt]=n;let o=e[Xi];o!==null&&n!==o&&uC(o,e);let a=e[yr];a!==null&&a.insertView(t),hm(e),e[ne]|=128}function uC(t,e){let n=t[mo],r=e[Tt];if(Zr(r))t[ne]|=Pd.HasTransplantedViews;else{let i=r[Tt][Zt];e[Zt]!==i&&(t[ne]|=Pd.HasTransplantedViews)}n===null?t[mo]=[e]:n.push(e)}function Hy(t,e){let n=t[mo],r=n.indexOf(e);n.splice(r,1)}function _c(t,e){if(t.length<=Dt)return;let n=Dt+e,r=t[n];if(r){let i=r[Xi];i!==null&&i!==t&&Hy(i,r),e>0&&(t[n-1][wn]=r[wn]);let s=Rd(t,Dt+e);hF(r[se],r);let o=s[yr];o!==null&&o.detachView(s[se]),r[Tt]=null,r[wn]=null,r[ne]&=-129}return r}function vh(t,e){if(!(e[ne]&256)){let n=e[Pe];n.destroyNode&&wh(t,e,n,3,null,null),pF(e)}}function Qg(t,e){if(e[ne]&256)return;let n=fe(null);try{e[ne]&=-129,e[ne]|=256,e[on]&&Ul(e[on]),yF(t,e),mF(t,e),e[se].type===1&&e[Pe].destroy();let r=e[Xi];if(r!==null&&wr(e[Tt])){r!==e[Tt]&&Hy(r,e);let i=e[yr];i!==null&&i.detachView(t)}Dm(e)}finally{fe(n)}}function mF(t,e){let n=t.cleanup,r=e[Md];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Md]=null);let i=e[Yr];if(i!==null){e[Yr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function yF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ns)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Fn(4,a,c);try{c.call(a)}finally{Fn(5,a,c)}}else{Fn(4,i,s);try{s.call(i)}finally{Fn(5,i,s)}}}}}function lC(t,e,n){return vF(t,e.parent,n)}function vF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Vn.None||s===Vn.Emulated)return null}return cn(r,n)}}function Ud(t,e,n,r,i){t.insertBefore(e,n,r,i)}function dC(t,e,n){t.appendChild(e,n)}function i0(t,e,n,r,i){r!==null?Ud(t,e,n,r,i):dC(t,e,n)}function hC(t,e){return t.parentNode(e)}function _F(t,e){return t.nextSibling(e)}function fC(t,e,n){return EF(t,e,n)}function wF(t,e,n){return t.type&40?cn(t,n):null}var EF=wF,s0;function _h(t,e,n,r){let i=lC(t,r,e),s=e[Pe],o=r.parent||e[qt],a=fC(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)i0(s,i,n[c],a,!1);else i0(s,i,n,a,!1);s0!==void 0&&s0(s,r,e,n,i)}function hc(t,e){if(e!==null){let n=e.type;if(n&3)return cn(e,t);if(n&4)return Pm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return hc(t,r);{let i=t[e.index];return wr(i)?Pm(-1,i):Un(i)}}else{if(n&128)return hc(t,e.next);if(n&32)return zy(e,t)()||Un(t[e.index]);{let r=pC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=es(t[Zt]);return hc(i,r)}else return hc(t,e.next)}}}return null}function pC(t,e){if(e!==null){let r=t[Zt][qt],i=e.projection;return r.projection[i]}return null}function Pm(t,e){let n=Dt+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return hc(r,i)}return e[Ji]}function IF(t,e,n){t.removeChild(null,e,n)}function qy(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&ei(Un(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)qy(t,e,n.child,r,i,s,!1),ao(e,t,i,a,s);else if(c&32){let l=zy(n,r),d;for(;d=l();)ao(e,t,i,d,s);ao(e,t,i,a,s)}else c&16?gC(t,e,r,n,i,s):ao(e,t,i,a,s);n=o?n.projectionNext:n.next}}function wh(t,e,n,r,i,s){qy(n,r,t.firstChild,e,i,s,!1)}function DF(t,e,n){let r=e[Pe],i=lC(t,n,e),s=n.parent||e[qt],o=fC(s,n,e);gC(r,0,e,n,i,o)}function gC(t,e,n,r,i,s){let o=n[Zt],c=o[qt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];ao(e,t,i,d,s)}else{let l=c,d=o[Tt];Ub(r)&&(l.flags|=128),qy(t,e,l,d,i,s,!0)}}function TF(t,e,n,r,i){let s=n[Ji],o=Un(n);s!==o&&ao(e,t,r,s,i);for(let a=Dt;a<n.length;a++){let c=n[a];wh(c[se],c,t,e,r,s)}}function bF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:$n.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=$n.Important),t.setStyle(n,r,i,s))}}function CF(t,e,n){t.setAttribute(e,"style",n)}function mC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function yC(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&om(t,e,r),i!==null&&mC(t,e,i),s!==null&&CF(t,e,s)}var un={};function Gt(t=1){vC(xe(),te(),oi()+t,!1)}function vC(t,e,n,r){if(!r)if((e[ne]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Id(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Dd(e,s,0,n)}ts(n)}function Me(t,e=he.Default){let n=te();if(n===null)return z(t,e);let r=at();return Mb(r,n,ht(t),e)}function _C(){let t="invalid";throw new Error(t)}function wC(t,e,n,r,i,s){let o=fe(null);try{let a=null;i&Xr.SignalBased&&(a=e[r][Yt]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Xr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):eb(e,a,r,s)}finally{fe(o)}}function SF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ts(~i);else{let s=i,o=n[++r],a=n[++r];X1(o,s);let c=e[s];a(2,c)}}}finally{ts(-1)}}function Eh(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[qn]=i,f[ne]=r|4|128|8|64,(l!==null||t&&t[ne]&2048)&&(f[ne]|=2048),ab(f),f[Tt]=f[Do]=t,f[It]=n,f[jn]=o||t&&t[jn],f[Pe]=a||t&&t[Pe],f[go]=c||t&&t[go]||null,f[qt]=s,f[oh]=NO(),f[po]=d,f[J0]=l,f[Zt]=e.type==2?t[Zt]:f,f}function So(t,e,n,r,i){let s=t.data[e];if(s===null)s=AF(t,e,n,r,i),Z1()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=K1();s.injectorIndex=o===null?-1:o.injectorIndex}return cs(s,!0),s}function AF(t,e,n,r,i){let s=gb(),o=Ay(),a=o?s:s&&s.parent,c=t.data[e]=kF(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function EC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function IC(t,e,n,r,i){let s=oi(),o=r&2;try{ts(-1),o&&e.length>ft&&vC(t,e,ft,!1),Fn(o?2:0,i),n(r,i)}finally{ts(s),Fn(o?3:1,i)}}function Gy(t,e,n){if(by(e)){let r=fe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{fe(r)}}}function Wy(t,e,n){db()&&(UF(t,e,n,cn(n,e)),(n.flags&64)===64&&bC(t,e,n))}function Ky(t,e,n=cn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function DC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Qy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Qy(t,e,n,r,i,s,o,a,c,l,d){let f=ft+r,g=f+i,m=RF(f,g),_=typeof l=="function"?l():l;return m[se]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function RF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:un);return n}function xF(t,e,n,r){let s=r.get(VO,Wb)||n===Vn.ShadowDom,o=t.selectRootElement(e,s);return MF(o),o}function MF(t){NF(t)}var NF=()=>null;function PF(t,e,n,r){let i=AC(e);i.push(n),t.firstCreatePass&&RC(t).push(r,i.length-1)}function kF(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return hb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function o0(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Xr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?a0(r,n,l,a,c):a0(r,n,l,a)}return r}function a0(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function OF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,m=g?g.inputs:null,_=g?g.outputs:null;c=o0(0,f.inputs,d,c,m),l=o0(1,f.outputs,d,l,_);let S=c!==null&&o!==null&&!_y(e)?ZF(c,d,o):null;a.push(S)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function FF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Rc(t,e,n,r,i,s,o,a){let c=cn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Zy(t,n,d,r,i),ah(e)&&LF(n,e.index)):e.type&3?(r=FF(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function LF(t,e){let n=ii(e,t);n[ne]&16||(n[ne]|=64)}function Yy(t,e,n,r){if(db()){let i=r===null?null:{"":-1},s=$F(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&TC(t,e,n,o,i,a),i&&zF(n,r,i)}n.mergedAttrs=mc(n.mergedAttrs,n.attrs)}function TC(t,e,n,r,i,s){for(let l=0;l<r.length;l++)mm(Ld(n,e),t,r[l].type);qF(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=EC(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=mc(n.mergedAttrs,d.hostAttrs),GF(t,n,e,c,d),HF(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}OF(t,n,s)}function VF(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;jF(o)!=a&&o.push(a),o.push(n,r,s)}}function jF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function UF(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ah(n)&&WF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ld(n,e),ei(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=rs(e,t,a,n);if(ei(l,e),o!==null&&YF(e,a-i,l,c,n,o),vr(c)){let d=ii(n.index,e);d[It]=rs(e,t,a,n)}}}function bC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=J1();try{ts(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];fm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&BF(c,l)}}finally{ts(-1),fm(o)}}function BF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function $F(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if($0(e,o.selectors,!1))if(r||(r=[]),vr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;km(t,e,c)}else r.unshift(o),km(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function km(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function zF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function HF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vr(e)&&(n[""]=t)}}function qF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function GF(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Zi(i.type,!0)),o=new ns(s,vr(i),Me);t.blueprint[r]=o,n[r]=o,VF(t,e,r,EC(t,n,i.hostVars,un),i)}function WF(t,e,n){let r=cn(e,t),i=DC(n),s=t[jn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Ih(t,Eh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function KF(t,e,n,r,i,s){let o=cn(t,e);QF(e[Pe],o,s,t.value,n,r,i)}function QF(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Dc(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function YF(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];wC(r,n,c,l,d,f)}}function ZF(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function CC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function SC(t,e){let n=t.contentQueries;if(n!==null){let r=fe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];dh(s),a.contentQueries(2,e[o],o)}}}finally{fe(r)}}}function Ih(t,e){return t[vc]?t[BT][wn]=e:t[vc]=e,t[BT]=e,e}function Om(t,e,n){dh(0);let r=fe(null);try{e(t,n)}finally{fe(r)}}function AC(t){return t[Md]??=[]}function RC(t){return t.cleanup??=[]}function xC(t,e,n){return(t===null||vr(t))&&(n=V1(n[e.index])),n[Pe]}function MC(t,e){let n=t[go],r=n?n.get(Bn,null):null;r&&r.handleError(e)}function Zy(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];wC(d,l,r,a,c,i)}}function XF(t,e,n){let r=sb(e,t);lF(t[Pe],r,n)}function JF(t,e){let n=ii(e,t),r=n[se];eL(r,n);let i=n[qn];i!==null&&n[po]===null&&(n[po]=By(i,n[go])),Xy(r,n,n[It])}function eL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Xy(t,e,n){Ny(e);try{let r=t.viewQuery;r!==null&&Om(1,r,n);let i=t.template;i!==null&&IC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[yr]?.finishViewCreation(t),t.staticContentQueries&&SC(t,e),t.staticViewQueries&&Om(2,t.viewQuery,n);let s=t.components;s!==null&&tL(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,Py()}}function tL(t,e){for(let n=0;n<e.length;n++)JF(t,e[n])}function xc(t,e,n,r){let i=fe(null);try{let s=e.tView,a=t[ne]&4096?4096:16,c=Eh(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Xi]=l;let d=t[yr];return d!==null&&(c[yr]=d.createEmbeddedView(s)),Xy(s,c,n),c}finally{fe(i)}}function NC(t,e){let n=Dt+e;if(n<t.length)return t[n]}function yo(t,e){return!e||e.firstChild===null||Ub(t)}function Mc(t,e,n,r=!0){let i=e[se];if(gF(i,e,t,n),r){let o=Pm(n,t),a=e[Pe],c=hC(a,t[Ji]);c!==null&&fF(i,t[qt],a,e,c,o)}let s=e[po];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function PC(t,e){let n=_c(t,e);return n!==void 0&&vh(n[se],n),n}function Bd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Un(s)),wr(s)&&nL(s,r);let o=n.type;if(o&8)Bd(t,e,n.child,r);else if(o&32){let a=zy(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=pC(e,n);if(Array.isArray(a))r.push(...a);else{let c=es(e[Zt]);Bd(c[se],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function nL(t,e){for(let n=Dt;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&Bd(r[se],r,i,e)}t[Ji]!==t[qn]&&e.push(t[Ji])}var kC=[];function rL(t){return t[on]??iL(t)}function iL(t){let e=kC.pop()??Object.create(oL);return e.lView=t,e}function sL(t){t.lView[on]!==t&&(t.lView=null,kC.push(t))}var oL=Re(q({},Hs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{lh(t.lView)},consumerOnSignalRead(){this.lView[on]=this}});function aL(t){let e=t[on]??Object.create(cL);return e.lView=t,e}var cL=Re(q({},Hs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=es(t.lView);for(;e&&!OC(e[se]);)e=es(e);e&&cb(e)},consumerOnSignalRead(){this.lView[on]=this}});function OC(t){return t.type!==2}var uL=100;function FC(t,e=!0,n=0){let r=t[jn],i=r.rendererFactory,s=!1;s||i.begin?.();try{lL(t,n)}catch(o){throw e&&MC(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function lL(t,e){let n=mb();try{zT(!0),Fm(t,e);let r=0;for(;uh(t);){if(r===uL)throw new Q(103,!1);r++,Fm(t,1)}}finally{zT(n)}}function dL(t,e,n,r){let i=e[ne];if((i&256)===256)return;let s=!1,o=!1;!s&&e[jn].inlineEffectRunner?.flush(),Ny(e);let a=!0,c=null,l=null;s||(OC(t)?(l=rL(e),c=oc(l)):QD()===null?(a=!1,l=aL(e),c=oc(l)):e[on]&&(Ul(e[on]),e[on]=null));try{ab(e),Y1(t.bindingStartIndex),n!==null&&IC(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let m=t.preOrderCheckHooks;m!==null&&Id(e,m,null)}else{let m=t.preOrderHooks;m!==null&&Dd(e,m,0,null),qg(e,0)}if(o||hL(e),LC(e,0),t.contentQueries!==null&&SC(t,e),!s)if(d){let m=t.contentCheckHooks;m!==null&&Id(e,m)}else{let m=t.contentHooks;m!==null&&Dd(e,m,1),qg(e,1)}SF(t,e);let f=t.components;f!==null&&jC(e,f,0);let g=t.viewQuery;if(g!==null&&Om(2,g,r),!s)if(d){let m=t.viewCheckHooks;m!==null&&Id(e,m)}else{let m=t.viewHooks;m!==null&&Dd(e,m,2),qg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ed]){for(let m of e[Ed])m();e[Ed]=null}s||(e[ne]&=-73)}catch(d){throw s||lh(e),d}finally{l!==null&&(Vl(l,c),a&&sL(l)),Py()}}function LC(t,e){for(let n=$b(t);n!==null;n=zb(n))for(let r=Dt;r<n.length;r++){let i=n[r];VC(i,e)}}function hL(t){for(let e=$b(t);e!==null;e=zb(e)){if(!(e[ne]&Pd.HasTransplantedViews))continue;let n=e[mo];for(let r=0;r<n.length;r++){let i=n[r];cb(i)}}}function fL(t,e,n){let r=ii(e,t);VC(r,n)}function VC(t,e){Sy(t)&&Fm(t,e)}function Fm(t,e){let r=t[se],i=t[ne],s=t[on],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&jl(s)),o||=!1,s&&(s.dirty=!1),t[ne]&=-9217,o)dL(r,t,r.template,t[It]);else if(i&8192){LC(t,1);let a=r.components;a!==null&&jC(t,a,1)}}function jC(t,e,n){for(let r=0;r<e.length;r++)fL(t,e[r],n)}function Jy(t,e){let n=mb()?64:1088;for(t[jn].changeDetectionScheduler?.notify(e);t;){t[ne]|=n;let r=es(t);if(lm(t)&&!r)return t;t=r}return null}var is=class{get rootNodes(){let e=this._lView,n=e[se];return Bd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[It]}set context(e){this._lView[It]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Tt];if(wr(e)){let n=e[Nd],r=n?n.indexOf(this):-1;r>-1&&(_c(e,r),Rd(n,r))}this._attachedToViewContainer=!1}vh(this._lView[se],this._lView)}onDestroy(e){ub(this._lView,e)}markForCheck(){Jy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){hm(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,FC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=lm(this._lView),n=this._lView[Xi];n!==null&&!e&&Hy(n,this._lView),cC(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let n=lm(this._lView),r=this._lView[Xi];r!==null&&!n&&uC(r,this._lView),hm(this._lView)}},zn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mL;let t=e;return t})(),pL=zn,gL=class extends pL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=xc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new is(i)}};function mL(){return Dh(at(),te())}function Dh(t,e){return t.type&4?new gL(e,t,bo(t,e)):null}var W7=new RegExp(`^(\\d+)*(${FO}|${OO})*(.*)`);var yL=()=>null;function vo(t,e){return yL(t,e)}var _o=class{},ev=new K("",{providedIn:"root",factory:()=>!1});var UC=new K(""),BC=new K(""),Lm=class{},$d=class{};function vL(t){let e=Error(`No component factory found for ${Pt(t)}.`);return e[_L]=t,e}var _L="ngComponent";var Vm=class{resolveComponentFactory(e){throw vL(e)}},pv=class pv{};pv.NULL=new Vm;var wo=pv,Eo=class{},Nc=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>wL();let t=e;return t})();function wL(){let t=te(),e=at(),n=ii(e.index,t);return(Zr(n)?n:t)[Pe]}var EL=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function zd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=nm(i,a);else if(s==2){let c=a,l=e[++o];r=nm(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Hd=class extends wo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=mr(e);return new ss(n,this.ngModule)}};function c0(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Xr.None;e?n.push({propName:o,templateName:r,isSignal:(a&Xr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function IL(t){let e=t.toLowerCase();return e==="svg"?ib:e==="math"?L1:null}var ss=class extends $d{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=c0(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return c0(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=y1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=fe(null);try{i=i||this.ngModule;let o=i instanceof kt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new pm(e,o):e,c=a.get(Eo,null);if(c===null)throw new Q(407,!1);let l=a.get(EL,null),d=a.get(_o,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?xF(g,r,this.componentDef.encapsulation,a):aC(g,m,IL(m)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let D=null;_!==null&&(D=By(_,a,!0));let P=Qy(0,null,null,1,0,null,null,null,null,null,null),L=Eh(null,P,null,S,null,null,f,g,a,null,D);Ny(L);let V,j,ee=null;try{let H=this.componentDef,I,v=null;H.findHostDirectiveDefs?(I=[],v=new Map,H.findHostDirectiveDefs(H,I,v),I.push(H)):I=[H];let w=DL(L,_);ee=TL(w,_,H,I,L,f,g),j=Cy(P,ft),_&&SL(g,H,_,r),n!==void 0&&AL(j,this.ngContentSelectors,n),V=CL(ee,H,I,v,L,[RL]),Xy(P,L,null)}catch(H){throw ee!==null&&Dm(ee),Dm(L),H}finally{Py()}return new jm(this.componentType,V,bo(j,L),L,j)}finally{fe(s)}}},jm=class extends Lm{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new is(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Zy(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=ii(this._tNode.index,s);Jy(o,1)}}get injector(){return new Yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function DL(t,e){let n=t[se],r=ft;return t[r]=e,So(n,r,2,"#host",null)}function TL(t,e,n,r,i,s,o){let a=i[se];bL(r,t,e,o);let c=null;e!==null&&(c=By(e,i[go]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Eh(i,DC(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&km(a,t,r.length-1),Ih(i,f),i[t.index]=f}function bL(t,e,n,r){for(let i of t)e.mergedAttrs=mc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(zd(e,e.mergedAttrs,!0),n!==null&&yC(r,n,e))}function CL(t,e,n,r,i,s){let o=at(),a=i[se],c=cn(o,i);TC(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=rs(i,a,f,o);ei(g,i)}bC(a,i,o),c&&ei(c,i);let l=rs(i,a,o.directiveStart+o.componentOffset,o);if(t[It]=i[It]=l,s!==null)for(let d of s)d(l,e);return Gy(a,o,i),l}function SL(t,e,n,r){if(r)om(t,n,["ng-version","18.2.3"]);else{let{attrs:i,classes:s}=v1(e.selectors[0]);i&&om(t,n,i),s&&s.length>0&&mC(t,n,s.join(" "))}}function AL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function RL(){let t=at();ph(te()[se],t)}var Tr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xL;let t=e;return t})();function xL(){let t=at();return zC(t,te())}var ML=Tr,$C=class extends ML{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return bo(this._hostTNode,this._hostLView)}get injector(){return new Yi(this._hostTNode,this._hostLView)}get parentInjector(){let e=ky(this._hostTNode,this._hostLView);if(bb(e)){let n=Od(e,this._hostLView),r=kd(e),i=n[se].data[r+8];return new Yi(i,n)}else return new Yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=u0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=vo(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,yo(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!P1(e),a;if(o)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new ss(mr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let S=(o?l:this.parentInjector).get(kt,null);S&&(s=S)}let d=mr(c.componentType??{}),f=vo(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(l,i,g,s);return this.insertImpl(m.hostView,a,yo(this._hostTNode,f)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(U1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Tt],l=new $C(c,c[qt],c[Tt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Mc(o,i,s,r),e.attachToViewContainerRef(),F0(Yg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=u0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=_c(this._lContainer,n);r&&(Rd(Yg(this._lContainer),n),vh(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=_c(this._lContainer,n);return r&&Rd(Yg(this._lContainer),n)!=null?new is(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function u0(t){return t[Nd]}function Yg(t){return t[Nd]||(t[Nd]=[])}function zC(t,e){let n,r=e[t.index];return wr(r)?n=r:(n=CC(r,e,null,t),e[t.index]=n,Ih(e,n)),PL(n,e,t,r),new $C(n,t,e)}function NL(t,e){let n=t[Pe],r=n.createComment(""),i=cn(e,t),s=hC(n,i);return Ud(n,s,r,_F(n,i),!1),r}var PL=FL,kL=()=>!1;function OL(t,e,n){return kL(t,e,n)}function FL(t,e,n,r){if(t[Ji])return;let i;n.type&8?i=Un(r):i=NL(e,n),t[Ji]=i}var Um=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Bm=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)nv(e,n).matches!==null&&this.queries[n].setDirty()}},qd=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=$L(e):this.predicate=e}},$m=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},zm=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,LL(n,s)),this.matchTNodeWithReadOption(e,n,Td(n,e,s,!1,!1))}else r===zn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Td(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ir||i===Tr||i===zn&&n.type&4)this.addMatch(n.index,-2);else{let s=Td(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function LL(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function VL(t,e){return t.type&11?bo(t,e):t.type&4?Dh(t,e):null}function jL(t,e,n,r){return n===-1?VL(e,t):n===-2?UL(t,e,r):rs(t,t[se],n,e)}function UL(t,e,n){if(n===Ir)return bo(e,t);if(n===zn)return Dh(e,t);if(n===Tr)return zC(e,t)}function HC(t,e,n,r){let i=e[yr].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(jL(e,d,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Hm(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=HC(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let f=Dt;f<d.length;f++){let g=d[f];g[Xi]===g[Tt]&&Hm(g[se],g,l,r)}if(d[mo]!==null){let f=d[mo];for(let g=0;g<f.length;g++){let m=f[g];Hm(m[se],m,l,r)}}}}}return r}function tv(t,e){return t[yr].queries[e].queryList}function qC(t,e,n){let r=new Im((n&4)===4);return PF(t,e,r,r.destroy),(e[yr]??=new Bm).queries.push(new Um(r))-1}function BL(t,e,n){let r=xe();return r.firstCreatePass&&(WC(r,new qd(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),qC(r,te(),e)}function GC(t,e,n,r){let i=xe();if(i.firstCreatePass){let s=at();WC(i,new qd(e,n,r),s.index),zL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return qC(i,te(),n)}function $L(t){return t.split(",").map(e=>e.trim())}function WC(t,e,n){t.queries===null&&(t.queries=new $m),t.queries.track(new zm(e,n))}function zL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function nv(t,e){return t.queries.getByIndex(e)}function KC(t,e){let n=t[se],r=nv(n,e);return r.crossesNgTemplate?Hm(n,t,e,[]):HC(n,t,r,e)}var l0=new Set;function Tn(t){l0.has(t)||(l0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function HL(t){return typeof t=="function"&&t[Yt]!==void 0}function qL(t,e){Tn("NgSignals");let n=oT(t),r=n[Yt];return e?.equal&&(r.equal=e.equal),n.set=i=>zl(r,i),n.update=i=>aT(r,i),n.asReadonly=GL.bind(n),n}function GL(){let t=this[Yt];if(t.readonlyFn===void 0){let e=()=>this();e[Yt]=t,t.readonlyFn=e}return t.readonlyFn}function QC(t){return HL(t)&&typeof t.set=="function"}function YC(t,e){let n,r=_g(()=>{n._dirtyCounter();let i=YL(n,t);if(e&&i===void 0)throw new Q(-951,!1);return i});return n=r[Yt],n._dirtyCounter=qL(0),n._flatValue=void 0,r}function WL(){return YC(!0,!1)}function KL(){return YC(!0,!0)}function QL(t,e){let n=t[Yt];n._lView=te(),n._queryIndex=e,n._queryList=tv(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function YL(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[ne]&4)return e?void 0:Nt;let i=tv(n,r),s=KC(n,r);return i.reset(s,jb),e?i.first:i._changesDetected||t._flatValue===void 0?t._flatValue=i.toArray():t._flatValue}function d0(t,e){return WL()}function ZL(t,e){return KL()}var Q7=(d0.required=ZL,d0);function XL(t){return Object.getPrototypeOf(t.prototype).constructor}function JL(t){let e=XL(t.type),n=!0,r=[t];for(;e;){let i;if(vr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=yd(t.inputs),o.inputTransforms=yd(t.inputTransforms),o.declaredInputs=yd(t.declaredInputs),o.outputs=yd(t.outputs);let a=i.hostBindings;a&&iV(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&nV(t,c),l&&rV(t,l),eV(t,i),Fk(t.outputs,i.outputs),vr(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===JL&&(n=!1)}}e=Object.getPrototypeOf(e)}tV(r)}function eV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function tV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=mc(i.hostAttrs,n=mc(n,i.hostAttrs))}}function yd(t){return t===gr?{}:t===Nt?[]:t}function nV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function rV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function iV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Y7(t){let e=n=>{let r=(Array.isArray(t)?t:t()).map(i=>typeof i=="function"?{directive:ht(i),inputs:gr,outputs:gr}:{directive:ht(i.directive),inputs:h0(i.inputs),outputs:h0(i.outputs)});n.hostDirectives===null?(n.findHostDirectiveDefs=ZC,n.hostDirectives=r):n.hostDirectives.unshift(...r)};return e.ngInherit=!0,e}function ZC(t,e,n){if(t.hostDirectives!==null)for(let r of t.hostDirectives){let i=Ey(r.directive);sV(i.declaredInputs,r.inputs),ZC(i,e,n),n.set(i,r),e.push(i)}}function h0(t){if(t===void 0||t.length===0)return gr;let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}function sV(t,e){for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],i=t[n];t[r]=i}}function XC(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var ti=class{},wc=class{};var qm=class extends ti{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hd(this);let s=q0(e);this._bootstrapComponents=sC(s.bootstrap),this._r3Injector=Ob(e,n,[{provide:ti,useValue:this},{provide:wo,useValue:this.componentFactoryResolver},...r],Pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gm=class extends wc{constructor(e){super(),this.moduleType=e}create(e){return new qm(this.moduleType,e,[])}};var Gd=class extends ti{constructor(e){super(),this.componentFactoryResolver=new Hd(this),this.instance=null;let n=new yc([...e.providers,{provide:ti,useValue:this},{provide:wo,useValue:this.componentFactoryResolver}],e.parent||sh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Th(t,e,n=null){return new Gd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function JC(t){return rv(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function oV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function rv(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function bh(t,e,n){return t[e]=n}function eS(t,e){return t[e]}function Xt(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Wm(t,e,n,r){let i=Xt(t,e,n);return Xt(t,e+1,r)||i}function f0(t,e,n,r,i,s){let o=Wm(t,e,n,r);return Wm(t,e+2,i,s)||o}function aV(t){return(t.flags&32)===32}function cV(t,e,n,r,i,s,o,a,c){let l=e.consts,d=So(e,t,4,o||null,a||null);Yy(e,n,d,Jr(l,c)),ph(e,d);let f=d.tView=Qy(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Wd(t,e,n,r,i,s,o,a,c,l){let d=n+ft,f=e.firstCreatePass?cV(d,e,t,r,i,s,o,a,c):e.data[d];cs(f,!1);let g=uV(e,t,f,n);hh()&&_h(e,t,g,f),ei(g,t);let m=CC(g,t,g,f);return t[d]=m,Ih(t,m),OL(m,f,t),ch(f)&&Wy(e,t,f),c!=null&&Ky(t,f,l),f}function br(t,e,n,r,i,s,o,a){let c=te(),l=xe(),d=Jr(l.consts,s);return Wd(c,l,t,e,n,r,i,d,o,a),br}var uV=lV;function lV(t,e,n,r){return fh(!0),e[Pe].createComment("")}var co=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(co||{}),tS=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Qi=class Qi{constructor(){this.ngZone=F(ye),this.scheduler=F(_o),this.errorHandler=F(Bn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Qi.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Qi.PHASES=[co.EarlyRead,co.Write,co.MixedReadWrite,co.Read],Qi.\u0275prov=G({token:Qi,providedIn:"root",factory:()=>new Qi});var Km=Qi,Qm=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function dV(t,e){!e?.injector&&Dy(dV);let n=e?.injector??F(Ht);return oC(n)?(Tn("NgAfterRender"),nS(t,n,e,!1)):rS}function iv(t,e){!e?.injector&&Dy(iv);let n=e?.injector??F(Ht);return oC(n)?(Tn("NgAfterNextRender"),nS(t,n,e,!0)):rS}function hV(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function nS(t,e,n,r){let i=e.get(tS);i.impl??=e.get(Km);let s=n?.phase??co.MixedReadWrite,o=new Qm(i.impl,hV(t,s),r,e.get(gh));return i.impl.register(o),o}var rS={destroy(){}};function iS(t,e,n,r){let i=te(),s=si();if(Xt(i,s,e)){let o=xe(),a=To();KF(a,i,t,e,n,r)}return iS}function sv(t,e,n,r){return Xt(t,si(),n)?e+Dc(n)+r:un}function vd(t,e){return t<<17|e<<2}function os(t){return t>>17&32767}function fV(t){return(t&2)==2}function pV(t,e){return t&131071|e<<17}function Ym(t){return t|2}function Io(t){return(t&131068)>>2}function Zg(t,e){return t&-131069|e<<2}function gV(t){return(t&1)===1}function Zm(t){return t|1}function mV(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=os(o),c=Io(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Tc(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=os(t[a+1]);t[r+1]=vd(g,a),g!==0&&(t[g+1]=Zg(t[g+1],r)),t[a+1]=pV(t[a+1],r)}else t[r+1]=vd(a,0),a!==0&&(t[a+1]=Zg(t[a+1],r)),a=r;else t[r+1]=vd(c,0),a===0?a=r:t[c+1]=Zg(t[c+1],r),c=r;l&&(t[r+1]=Ym(t[r+1])),p0(t,d,r,!0),p0(t,d,r,!1),yV(e,d,t,r,s),o=vd(a,c),s?e.classBindings=o:e.styleBindings=o}function yV(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Tc(s,e)>=0&&(n[r+1]=Zm(n[r+1]))}function p0(t,e,n,r){let i=t[n+1],s=e===null,o=r?os(i):Io(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];vV(c,e)&&(a=!0,t[o+1]=r?Zm(l):Ym(l)),o=r?os(l):Io(l)}a&&(t[n+1]=r?Ym(i):Zm(i))}function vV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Tc(t,e)>=0:!1}var _n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _V(t){return t.substring(_n.key,_n.keyEnd)}function wV(t){return EV(t),sS(t,oS(t,0,_n.textEnd))}function sS(t,e){let n=_n.textEnd;return n===e?-1:(e=_n.keyEnd=IV(t,_n.key=e,n),oS(t,e,n))}function EV(t){_n.key=0,_n.keyEnd=0,_n.value=0,_n.valueEnd=0,_n.textEnd=t.length}function oS(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function IV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Ve(t,e,n){let r=te(),i=si();if(Xt(r,i,e)){let s=xe(),o=To();Rc(s,o,r,t,e,r[Pe],n,!1)}return Ve}function Xm(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Zy(t,n,s[o],o,r)}function aS(t,e,n){return lS(t,e,n,!1),aS}function ov(t,e){return lS(t,e,null,!0),ov}function cS(t){dS(AV,uS,t,!0)}function uS(t,e){for(let n=wV(e);n>=0;n=sS(e,n))rh(t,_V(e),!0)}function lS(t,e,n,r){let i=te(),s=xe(),o=yb(2);if(s.firstUpdatePass&&fS(s,t,o,r),e!==un&&Xt(i,o,e)){let a=s.data[oi()];pS(s,a,i,i[Pe],t,i[o+1]=xV(e,n),r,o)}}function dS(t,e,n,r){let i=xe(),s=yb(2);i.firstUpdatePass&&fS(i,null,s,r);let o=te();if(n!==un&&Xt(o,s,n)){let a=i.data[oi()];if(gS(a,r)&&!hS(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=nm(c,n||"")),Xm(i,a,o,n,r)}else RV(i,a,o,o[Pe],o[s+1],o[s+1]=SV(t,e,n),r,s)}}function hS(t,e){return e>=t.expandoStartIndex}function fS(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[oi()],o=hS(t,n);gS(s,r)&&e===null&&!o&&(e=!1),e=DV(i,s,e,r),mV(i,s,e,n,o,r)}}function DV(t,e,n,r){let i=xy(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Xg(null,t,e,n,r),n=Ec(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Xg(i,t,e,n,r),s===null){let c=TV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Xg(null,t,e,c[1],r),c=Ec(c,e.attrs,r),bV(t,e,r,c))}else s=CV(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function TV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Io(r)!==0)return t[os(r)]}function bV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[os(i)]=r}function CV(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ec(r,o,n)}return Ec(r,e.attrs,n)}function Xg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ec(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ec(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rh(t,o,n?!0:e[++s]))}return t===void 0?null:t}function SV(t,e,n){if(n==null||n==="")return Nt;let r=[],i=Dn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function AV(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&rh(t,r,n)}function RV(t,e,n,r,i,s,o,a){i===un&&(i=Nt);let c=0,l=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,_=null,S;d===f?(c+=2,l+=2,g!==m&&(_=f,S=m)):f===null||d!==null&&d<f?(c+=2,_=d):(l+=2,_=f,S=m),_!==null&&pS(t,e,n,r,_,S,o,a),d=c<i.length?i[c]:null,f=l<s.length?s[l]:null}}function pS(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=gV(l)?g0(c,e,n,i,Io(l),o):void 0;if(!Kd(d)){Kd(s)||fV(l)&&(s=g0(c,null,n,i,a,o));let f=sb(oi(),n);bF(r,o,f,i,s)}}function g0(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===un&&(g=f?Nt:void 0);let m=f?zg(g,r):d===r?g:void 0;if(l&&!Kd(m)&&(m=zg(c,r)),Kd(m)&&(a=m,o))return a;let _=t[i+1];i=o?os(_):Io(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=zg(c,r))}return a}function Kd(t){return t!==void 0}function xV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Pt(Dn(t)))),t}function gS(t,e){return(t.flags&(e?8:16))!==0}function Z7(t,e,n){let r=te(),i=sv(r,t,e,n);dS(rh,uS,i,!0)}var Jm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Jg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function MV(t,e,n){let r,i,s=0,o=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=t.at(s),d=e[s],f=Jg(s,l,s,d,n);if(f!==0){f<0&&t.updateValue(s,d),s++;continue}let g=t.at(o),m=e[c],_=Jg(o,g,c,m,n);if(_!==0){_<0&&t.updateValue(o,m),o--,c--;continue}let S=n(s,l),D=n(o,g),P=n(s,d);if(Object.is(P,D)){let L=n(c,m);Object.is(L,S)?(t.swap(s,o),t.updateValue(o,m),c--,o--):t.move(o,s),t.updateValue(s,d),s++;continue}if(r??=new Qd,i??=y0(t,s,o,n),ey(t,r,s,P))t.updateValue(s,d),s++,o++;else if(i.has(P))r.set(S,t.detach(s)),o--;else{let L=t.create(s,e[s]);t.attach(s,L),s++,o++}}for(;s<=c;)m0(t,r,n,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let d=t.at(s),f=l.value,g=Jg(s,d,s,f,n);if(g!==0)g<0&&t.updateValue(s,f),s++,l=c.next();else{r??=new Qd,i??=y0(t,s,o,n);let m=n(s,f);if(ey(t,r,s,m))t.updateValue(s,f),s++,o++,l=c.next();else if(!i.has(m))t.attach(s,t.create(s,f)),s++,o++,l=c.next();else{let _=n(s,d);r.set(_,t.detach(s)),o--}}}for(;!l.done;)m0(t,r,n,t.length,l.value),l=c.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(c=>{t.destroy(c)})}function ey(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function m0(t,e,n,r,i){if(ey(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function y0(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var Qd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function X7(t,e){Tn("NgControlFlow");let n=te(),r=si(),i=n[r]!==un?n[r]:-1,s=i!==-1?Yd(n,ft+i):void 0,o=0;if(Xt(n,r,t)){let a=fe(null);try{if(s!==void 0&&PC(s,o),t!==-1){let c=ft+t,l=Yd(n,c),d=iy(n[se],c),f=vo(l,d.tView.ssrId),g=xc(n,d,e,{dehydratedView:f});Mc(l,g,o,yo(d,f))}}finally{fe(a)}}else if(s!==void 0){let a=NC(s,o);a!==void 0&&(a[It]=e)}}var ty=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Dt}};function J7(t,e){return e}var ny=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function eK(t,e,n,r,i,s,o,a,c,l,d,f,g){Tn("NgControlFlow");let m=te(),_=xe(),S=c!==void 0,D=te(),P=a?o.bind(D[Zt][It]):o,L=new ny(S,P);D[ft+t]=L,Wd(m,_,t+1,e,n,r,i,Jr(_.consts,s)),S&&Wd(m,_,t+2,c,l,d,f,Jr(_.consts,g))}var ry=class extends Jm{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Dt}at(e){return this.getLView(e)[It].$implicit}attach(e,n){let r=n[po];this.needsIndexUpdate||=e!==this.length,Mc(this.lContainer,n,e,yo(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,NV(this.lContainer,e)}create(e,n){let r=vo(this.lContainer,this.templateTNode.tView.ssrId),i=xc(this.hostLView,this.templateTNode,new ty(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){vh(e[se],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[It].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[It].$index=e}getLView(e){return PV(this.lContainer,e)}};function tK(t){let e=fe(null),n=oi();try{let r=te(),i=r[se],s=r[n],o=n+1,a=Yd(r,o);if(s.liveCollection===void 0){let l=iy(i,o);s.liveCollection=new ry(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(MV(c,t,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=si(),d=c.length===0;if(Xt(r,l,d)){let f=n+2,g=Yd(r,f);if(d){let m=iy(i,f),_=vo(g,m.tView.ssrId),S=xc(r,m,void 0,{dehydratedView:_});Mc(g,S,0,yo(m,_))}else PC(g,0)}}}finally{fe(e)}}function Yd(t,e){return t[e]}function NV(t,e){return _c(t,e)}function PV(t,e){return NC(t,e)}function iy(t,e){return Cy(t,e)}function kV(t,e,n,r,i,s){let o=e.consts,a=Jr(o,i),c=So(e,t,2,r,a);return Yy(e,n,c,Jr(o,s)),c.attrs!==null&&zd(c,c.attrs,!1),c.mergedAttrs!==null&&zd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ln(t,e,n,r){let i=te(),s=xe(),o=ft+t,a=i[Pe],c=s.firstCreatePass?kV(o,s,i,e,n,r):s.data[o],l=OV(s,i,c,a,e,t);i[o]=l;let d=ch(c);return cs(c,!0),yC(a,l,c),!aV(c)&&hh()&&_h(s,i,l,c),z1()===0&&ei(l,i),H1(),d&&(Wy(s,i,c),Gy(s,c,i)),r!==null&&Ky(i,c),ln}function dn(){let t=at();Ay()?Ry():(t=t.parent,cs(t,!1));let e=t;G1(e)&&W1(),q1();let n=xe();return n.firstCreatePass&&(ph(n,t),by(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&aO(e)&&Xm(n,e,te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&cO(e)&&Xm(n,e,te(),e.stylesWithoutHost,!1),dn}function Wn(t,e,n,r){return ln(t,e,n,r),dn(),Wn}var OV=(t,e,n,r,i,s)=>(fh(!0),aC(r,i,rO()));function FV(t,e,n,r,i){let s=e.consts,o=Jr(s,r),a=So(e,t,8,"ng-container",o);o!==null&&zd(a,o,!0);let c=Jr(s,i);return Yy(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function mS(t,e,n){let r=te(),i=xe(),s=t+ft,o=i.firstCreatePass?FV(s,i,r,e,n):i.data[s];cs(o,!0);let a=LV(i,r,o,t);return r[s]=a,hh()&&_h(i,r,a,o),ei(a,r),ch(o)&&(Wy(i,r,o),Gy(i,o,r)),n!=null&&Ky(r,o),mS}function yS(){let t=at(),e=xe();return Ay()?Ry():(t=t.parent,cs(t,!1)),e.firstCreatePass&&(ph(e,t),by(t)&&e.queries.elementEnd(t)),yS}function Pc(t,e,n){return mS(t,e,n),yS(),Pc}var LV=(t,e,n,r)=>(fh(!0),dF(e[Pe],""));function vS(){return te()}function VV(t,e,n){let r=te(),i=si();if(Xt(r,i,e)){let s=xe(),o=To();Rc(s,o,r,t,e,r[Pe],n,!0)}return VV}function jV(t,e,n){let r=te(),i=si();if(Xt(r,i,e)){let s=xe(),o=To(),a=xy(s.data),c=xC(a,o,r);Rc(s,o,r,t,e,c,n,!0)}return jV}var Zd="en-US";var UV=Zd;function BV(t){typeof t=="string"&&(UV=t.toLowerCase().replace(/_/g,"-"))}var $V=(t,e,n)=>{};function kc(t,e,n,r){let i=te(),s=xe(),o=at();return av(s,i,i[Pe],o,t,e,r),kc}function zV(t,e){let n=at(),r=te(),i=xe(),s=xy(i.data),o=xC(s,n,r);return av(i,r,o,n,t,e),zV}function HV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Md],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function av(t,e,n,r,i,s,o){let a=ch(r),l=t.firstCreatePass&&RC(t),d=e[It],f=AC(e),g=!0;if(r.type&3||o){let S=cn(r,e),D=o?o(S):S,P=f.length,L=o?j=>o(Un(j[r.index])):r.index,V=null;if(!o&&a&&(V=HV(t,e,i,r.index)),V!==null){let j=V.__ngLastListenerFn__||V;j.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,g=!1}else{s=_0(r,e,d,s),$V(S,i,s);let j=n.listen(D,i,s);f.push(s,j),l&&l.push(i,L,P,P+1)}}else s=_0(r,e,d,s);let m=r.outputs,_;if(g&&m!==null&&(_=m[i])){let S=_.length;if(S)for(let D=0;D<S;D+=2){let P=_[D],L=_[D+1],ee=e[P][L].subscribe(s),H=f.length;f.push(s,ee),l&&l.push(i,r.index,H,-(H+1))}}}function v0(t,e,n,r){let i=fe(null);try{return Fn(6,e,n),n(r)!==!1}catch(s){return MC(t,s),!1}finally{Fn(7,e,n),fe(i)}}function _0(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?ii(t.index,e):e;Jy(o,5);let a=v0(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=v0(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Wt(t=1){return tO(t)}function qV(t,e){let n=null,r=h1(t);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){n=i;continue}if(r===null?$0(t,s,!0):g1(r,s))return i}return n}function nK(t){let e=te()[Zt][qt];if(!e.projection){let n=t?t.length:1,r=e.projection=r1(n,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=t?qV(s,t):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function rK(t,e=0,n,r,i,s){let o=te(),a=xe(),c=r?t+1:null;c!==null&&Wd(o,a,c,r,i,s,null,n);let l=So(a,ft+t,16,null,n||null);l.projection===null&&(l.projection=e),Ry();let f=!o[po]||hb();o[Zt][qt].projection[l.projection]===null&&c!==null?GV(o,a,c):f&&(l.flags&32)!==32&&DF(a,o,l)}function GV(t,e,n){let r=ft+n,i=e.data[r],s=t[r],o=vo(s,i.tView.ssrId),a=xc(t,i,void 0,{dehydratedView:o});Mc(s,a,0,yo(i,o))}function WV(t,e,n){return _S(t,"",e,"",n),WV}function _S(t,e,n,r,i){let s=te(),o=sv(s,e,n,r);if(o!==un){let a=xe(),c=To();Rc(a,c,s,t,o,s[Pe],i,!1)}return _S}function KV(t,e,n,r){GC(t,e,n,r)}function iK(t,e,n){BL(t,e,n)}function QV(t){let e=te(),n=xe(),r=My();dh(r+1);let i=nv(n,r);if(t.dirty&&j1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=KC(e,r);t.reset(s,jb),t.notifyOnChanges()}return!0}return!1}function YV(){return tv(te(),My())}function sK(t,e,n,r,i){QL(e,GC(t,n,r,i))}function oK(t=1){dh(My()+t)}function ZV(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Ch(t){let e=Q1();return ob(e,ft+t)}function aK(t,e=""){let n=te(),r=xe(),i=t+ft,s=r.firstCreatePass?So(r,i,1,e,null):r.data[i],o=XV(r,n,s,e,t);n[i]=o,hh()&&_h(r,n,o,s),cs(s,!1)}var XV=(t,e,n,r,i)=>(fh(!0),uF(e[Pe],r));function JV(t){return wS("",t,""),JV}function wS(t,e,n){let r=te(),i=sv(r,t,e,n);return i!==un&&XF(r,oi(),i),wS}function e2(t,e,n){QC(e)&&(e=e());let r=te(),i=si();if(Xt(r,i,e)){let s=xe(),o=To();Rc(s,o,r,t,e,r[Pe],n,!1)}return e2}function cK(t,e){let n=QC(t);return n&&t.set(e),n}function t2(t,e){let n=te(),r=xe(),i=at();return av(r,n,n[Pe],i,t,e),t2}function n2(t,e,n){let r=xe();if(r.firstCreatePass){let i=vr(t);sy(n,r.data,r.blueprint,i,!0),sy(e,r.data,r.blueprint,i,!1)}}function sy(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let s=0;s<t.length;s++)sy(t[s],e,n,r,i);else{let s=xe(),o=te(),a=at(),c=fo(t)?t:ht(t.provide),l=Z0(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(fo(t)||!t.multi){let m=new ns(l,i,Me),_=tm(c,e,i?d:d+g,f);_===-1?(mm(Ld(a,o),s,c),em(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[_]=m,o[_]=m)}else{let m=tm(c,e,d+g,f),_=tm(c,e,d,d+g),S=m>=0&&n[m],D=_>=0&&n[_];if(i&&!D||!i&&!S){mm(Ld(a,o),s,c);let P=s2(i?i2:r2,n.length,i,r,l);!i&&D&&(n[_].providerFactory=P),em(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=ES(n[i?_:m],l,!i&&r);em(s,t,m>-1?m:_,P)}!i&&r&&D&&n[_].componentProviders++}}}function em(t,e,n,r){let i=fo(e),s=C1(e);if(i||s){let c=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function ES(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function tm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function r2(t,e,n,r){return oy(this.multi,[])}function i2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=rs(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),oy(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],oy(i,s);return s}function oy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function s2(t,e,n,r,i){let s=new ns(t,n,Me);return s.multi=[],s.index=e,s.componentProviders=0,ES(s,i,r&&!n),s}function uK(t,e=[]){return n=>{n.providersResolver=(r,i)=>n2(r,i?i(t):t,e)}}var o2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=K0(!1,r.type),s=i.length>0?Th([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=G({token:e,providedIn:"environment",factory:()=>new e(z(kt))});let t=e;return t})();function IS(t){Tn("NgStandalone"),t.getStandaloneInjector=e=>e.get(o2).getOrCreateStandaloneInjector(t)}function lK(t,e,n){let r=Sc()+t,i=te();return i[r]===un?bh(i,r,n?e.call(n):e()):eS(i,r)}function DS(t,e,n,r){return CS(te(),Sc(),t,e,n,r)}function dK(t,e,n,r,i){return a2(te(),Sc(),t,e,n,r,i)}function TS(t,e,n,r,i,s,o,a,c,l,d){let f=Sc()+t,g=te(),m=f0(g,f,n,r,i,s);return f0(g,f+4,o,a,c,l)||m?bh(g,f+8,d?e.call(d,n,r,i,s,o,a,c,l):e(n,r,i,s,o,a,c,l)):eS(g,f+8)}function bS(t,e){let n=t[e];return n===un?void 0:n}function CS(t,e,n,r,i,s){let o=e+n;return Xt(t,o,i)?bh(t,o+1,s?r.call(s,i):r(i)):bS(t,o+1)}function a2(t,e,n,r,i,s,o){let a=e+n;return Wm(t,a,i,s)?bh(t,a+2,o?r.call(o,i,s):r(i,s)):bS(t,a+2)}function hK(t,e){let n=xe(),r,i=t+ft;n.firstCreatePass?(r=c2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Zi(r.type,!0)),o,a=zt(Me);try{let c=Fd(!1),l=s();return Fd(c),ZV(n,te(),i,l),l}finally{zt(a)}}function c2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function fK(t,e,n){let r=t+ft,i=te(),s=ob(i,r);return u2(i,r)?CS(i,Sc(),e,s.transform,n,s):s.transform(n)}function u2(t,e){return t[se].data[e].pure}function Sh(t,e){return Dh(t,e)}var as=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}};var Ah=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var SS=new K("");function Ao(t){return!!t&&typeof t.then=="function"}function cv(t){return!!t&&typeof t.subscribe=="function"}var Rh=new K(""),AS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=F(Rh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ao(o))r.push(o);else if(cv(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Oc=new K("");function l2(){sT(()=>{throw new Q(600,!1)})}function d2(t){return t.isBoundToModule}var h2=10;function f2(t,e,n){try{let r=n();return Ao(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ci=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(SO),this.afterRenderManager=F(tS),this.zonelessEnabled=F(ev),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=F(Er).hasPendingTasks.pipe(ce(r=>!r)),this._injector=F(kt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof $d;if(!this._injector.get(AS).done){let m=!s&&H0(r),_=!1;throw new Q(405,_)}let a;s?a=r:a=this._injector.get(wo).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=d2(a)?void 0:this._injector.get(ti),l=i||a.selector,d=a.create(Ht.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(SS,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),bd(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let r=fe(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,fe(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Eo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<h2;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)p2(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>uh(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;bd(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Oc,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>bd(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function p2(t,e,n,r){if(!n&&!uh(t))return;FC(t,e,n&&!r?0:1)}var ay=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},xh=(()=>{let e=class e{compileModuleSync(r){return new Gm(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=q0(r),o=sC(s.declarations).reduce((a,c)=>{let l=mr(c);return l&&a.push(new ss(l)),a},[]);return new ay(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var g2=(()=>{let e=class e{constructor(){this.zone=F(ye),this.changeDetectionScheduler=F(_o),this.applicationRef=F(ci)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),m2=new K("",{factory:()=>!1});function RS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ye(Re(q({},xS()),{scheduleInRootZone:n})),[{provide:ye,useFactory:t},{provide:ho,multi:!0,useFactory:()=>{let r=F(g2,{optional:!0});return()=>r.initialize()}},{provide:ho,multi:!0,useFactory:()=>{let r=F(y2);return()=>{r.initialize()}}},e===!0?{provide:UC,useValue:!0}:[],{provide:BC,useValue:n??Fb}]}function pK(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=RS({ngZoneFactory:()=>{let i=xS(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Tn("NgZone_CoalesceEvent"),new ye(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return ri([{provide:m2,useValue:!0},{provide:ev,useValue:!1},r])}function xS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var y2=(()=>{let e=class e{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=F(ye),this.pendingTasks=F(Er)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var v2=(()=>{let e=class e{constructor(){this.appRef=F(ci),this.taskService=F(Er),this.ngZone=F(ye),this.zonelessEnabled=F(ev),this.disableScheduling=F(UC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(BC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Em||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?KT:Lb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _2(){return typeof $localize<"u"&&$localize.locale||Zd}var uv=new K("",{providedIn:"root",factory:()=>F(uv,he.Optional|he.SkipSelf)||_2()});var MS=new K("");function _d(t){return!!t.platformInjector}function w2(t){let e=_d(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ye);return n.run(()=>{_d(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Bn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),_d(t)){let s=()=>e.destroy(),o=t.platformInjector.get(MS);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{bd(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return f2(r,n,()=>{let s=e.get(AS);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(uv,Zd);if(BV(o||Zd),_d(t)){let a=e.get(ci);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return E2(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function E2(t,e){let n=t.injector.get(ci);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new Q(-403,!1);e.push(t)}var Cd=null;function I2(t=[],e){return Ht.create({name:e,providers:[{provide:ih,useValue:"platform"},{provide:MS,useValue:new Set([()=>Cd=null])},...t]})}function D2(t=[]){if(Cd)return Cd;let e=I2(t);return Cd=e,l2(),T2(e),e}function T2(t){t.get(jy,null)?.forEach(n=>n())}function lv(){return!1}var bn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=b2;let t=e;return t})();function b2(t){return C2(at(),te(),(t&16)===16)}function C2(t,e,n){if(ah(t)&&!n){let r=ii(t.index,e);return new is(r,r)}else if(t.type&175){let r=e[Zt];return new is(r,e)}return null}var cy=class{constructor(){}supports(e){return JC(e)}create(e){return new uy(e)}},S2=(t,e)=>e,uy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||S2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<w0(r,i,s)?n:r,a=w0(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<s.length?s[g]:s[g]=0,_=m+g;d<=_&&_<l&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!JC(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,oV(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new ly(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ly=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},dy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Xd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new dy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function w0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var hy=class{constructor(){}supports(e){return e instanceof Map||rv(e)}create(){return new fy}},fy=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||rv(e)))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new py(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},py=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function E0(){return new dv([new cy])}var dv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||E0()),deps:[[e,new nh,new Hn]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=G({token:e,providedIn:"root",factory:E0});let t=e;return t})();function I0(){return new hv([new hy])}var hv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||I0()),deps:[[e,new nh,new Hn]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new Q(901,!1)}};e.\u0275prov=G({token:e,providedIn:"root",factory:I0});let t=e;return t})();function NS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=D2(r),s=[RS({}),{provide:_o,useExisting:v2},...n||[]],o=new Gd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return w2({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var PS=new K("");function kS(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function A2(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}function gK(t,e){Tn("NgSignals");let n=_g(t);return e?.equal&&(n[Yt].equal=e.equal),n}function fv(t){let e=fe(null);try{return t()}finally{fe(e)}}var R2=new K("",{providedIn:"root",factory:()=>F(x2)}),x2=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>new gy});let t=e;return t})(),gy=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=F(Er),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},my=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=cT(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Bn,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function M2(t,e){Tn("NgSignals"),!e?.injector&&Dy(M2);let n=e?.injector??F(Ht),r=e?.manualCleanup!==!0?n.get(gh):null,i=new my(n.get(R2),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(bn,null,{optional:!0});return!s||!(s._lView[ne]&8)?i.watcher.notify():(s._lView[Ed]??=[]).push(i.watcher.notify),i}function mK(t,e){let n=mr(t),r=e.elementInjector||sh();return new ss(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}function OS(t){let e=mr(t);if(!e)return null;let n=new ss(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var BS=null;function Ro(){return BS}function $S(t){BS??=t}var Mh=class{};var ct=new K(""),Iv=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(P2),providedIn:"platform"});let t=e;return t})(),zS=new K(""),P2=(()=>{let e=class e extends Iv{constructor(){super(),this._doc=F(ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ro().getBaseHref(this._doc)}onPopState(r){let i=Ro().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ro().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Dv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function FS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Cr(t){return t&&t[0]!=="?"?"?"+t:t}var us=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(Tv),providedIn:"root"});let t=e;return t})(),HS=new K(""),Tv=(()=>{let e=class e extends us{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Dv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Cr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Cr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Cr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Iv),z(HS,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qS=(()=>{let e=class e extends us{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Dv(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Cr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Cr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Iv),z(HS,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Mo=(()=>{let e=class e{constructor(r){this._subject=new ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=F2(FS(LS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Cr(i))}normalize(r){return e.stripTrailingSlash(O2(this._basePath,LS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Cr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Cr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Cr,e.joinWithSlash=Dv,e.stripTrailingSlash=FS,e.\u0275fac=function(i){return new(i||e)(z(us))},e.\u0275prov=G({token:e,factory:()=>k2(),providedIn:"root"});let t=e;return t})();function k2(){return new Mo(z(us))}function O2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function LS(t){return t.replace(/\/index.html$/,"")}function F2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Nh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var gv=/\s+/,VS=[],bv=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=VS,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(gv):VS}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(gv):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(gv).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(Me(Ir),Me(Nc))},e.\u0275dir=ni({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var mv=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},GS=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new mv(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),jS(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);jS(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Me(Tr),Me(zn),Me(dv))},e.\u0275dir=ni({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function jS(t,e){t.context.$implicit=e.item}var WS=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new yv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){US("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){US("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Me(Tr),Me(zn))},e.\u0275dir=ni({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),yv=class{constructor(){this.$implicit=null,this.ngIf=null}};function US(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Pt(e)}'.`)}var KS=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:$n.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(Me(Ir),Me(hv),Me(Nc))},e.\u0275dir=ni({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),QS=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,i,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,s):!1,get:(r,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}};e.\u0275fac=function(i){return new(i||e)(Me(Tr))},e.\u0275dir=ni({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Cc]});let t=e;return t})();function L2(t,e){return new Q(2100,!1)}var vv=class{createSubscription(e,n){return fv(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){fv(()=>e.unsubscribe())}},_v=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},V2=new _v,j2=new vv,VK=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ao(r))return V2;if(cv(r))return j2;throw L2(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(Me(bn,16))},e.\u0275pipe=wy({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Cv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=In({type:e}),e.\u0275inj=En({});let t=e;return t})(),Sv="browser",U2="server";function B2(t){return t===Sv}function Ph(t){return t===U2}var YS=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>B2(F(Jt))?new wv(F(ct),window):new Ev});let t=e;return t})(),wv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=$2(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function $2(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Ev=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},xo=class{};var Lc=class{},Oh=class{},Sr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Rv=class{encodeKey(e){return XS(e)}encodeValue(e){return XS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function q2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var G2=/%(\d[a-f0-9])/gi,W2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XS(t){return encodeURIComponent(t).replace(G2,(e,n)=>W2[n]??e)}function kh(t){return`${t}`}var di=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Rv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=q2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(kh):[kh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(kh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(kh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var xv=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function K2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function eA(t){return typeof Blob<"u"&&t instanceof Blob}function tA(t){return typeof FormData<"u"&&t instanceof FormData}function Q2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Fc=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(K2(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Sr,this.context??=new xv,!this.params)this.params=new di,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||JS(this.body)||eA(this.body)||tA(this.body)||Q2(this.body)?this.body:this.body instanceof di?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||tA(this.body)?null:eA(this.body)?this.body.type||null:JS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof di?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),d)),new t(n,r,o,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},hi=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(hi||{}),Vc=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Sr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Fh=class t extends Vc{constructor(e={}){super(e),this.type=hi.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},jc=class t extends Vc{constructor(e={}){super(e),this.type=hi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},li=class extends Vc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},sA=200,Y2=204;function Av(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Z2=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Fc)o=r;else{let l;s.headers instanceof Sr?l=s.headers:l=new Sr(s.headers);let d;s.params&&(s.params instanceof di?d=s.params:d=new di({fromObject:s.params})),o=new Fc(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=J(o).pipe(fr(l=>this.handler.handle(l)));if(r instanceof Fc||s.observe==="events")return a;let c=a.pipe(Et(l=>l instanceof jc));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ce(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ce(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ce(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ce(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new di().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Av(s,i))}post(r,i,s={}){return this.request("POST",r,Av(s,i))}put(r,i,s={}){return this.request("PUT",r,Av(s,i))}};e.\u0275fac=function(i){return new(i||e)(z(Lc))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),X2=/^\)\]\}',?\n/,J2="X-Request-URL";function nA(t){if(t.url)return t.url;let e=J2.toLocaleLowerCase();return t.headers.get(e)}var ej=(()=>{let e=class e{constructor(){this.fetchImpl=F(Mv,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=F(ye)}handle(r){return new ae(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(Nv,o=>i.error(new li({error:o}))),()=>s.abort()})}doRequest(r,i,s){return x(this,null,function*(){let o=this.createRequestInit(r),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,q({signal:i},o)));tj(_),s.next({type:hi.Sent}),a=yield _}catch(_){s.error(new li({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let c=new Sr(a.headers),l=a.statusText,d=nA(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&s.next(new Fh({headers:c,status:f,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),S=[],D=a.body.getReader(),P=0,L,V,j=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>x(this,null,function*(){for(;;){let{done:H,value:I}=yield D.read();if(H)break;if(S.push(I),P+=I.length,r.reportProgress){V=r.responseType==="text"?(V??"")+(L??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:hi.DownloadProgress,total:_?+_:void 0,loaded:P,partialText:V});j?j.run(v):v()}}}));let ee=this.concatChunks(S,P);try{let H=a.headers.get("Content-Type")??"";g=this.parseBody(r,ee,H)}catch(H){s.error(new li({error:H,headers:new Sr(a.headers),status:a.status,statusText:a.statusText,url:nA(a)??r.urlWithParams}));return}}f===0&&(f=g?sA:0),f>=200&&f<300?(s.next(new jc({body:g,headers:c,status:f,statusText:l,url:d})),s.complete()):s.error(new li({error:g,headers:c,status:f,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(X2,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Mv=class{};function Nv(){}function tj(t){t.then(Nv,Nv)}function nj(t,e){return e(t)}function rj(t,e,n){return(r,i)=>an(n,()=>e(r,s=>t(s,i)))}var oA=new K(""),ij=new K(""),sj=new K("",{providedIn:"root",factory:()=>!0});var rA=(()=>{let e=class e extends Lc{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=F(Er),this.contributeToStability=F(sj)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(oA),...this.injector.get(ij,[])]));this.chain=i.reduceRight((s,o)=>rj(s,o,this.injector),nj)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Wi(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(z(Oh),z(kt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();var oj=/^\)\]\}',?\n/;function aj(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var iA=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Q(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ee(i.\u0275loadImpl()):J(null)).pipe(Ge(()=>new ae(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((D,P)=>a.setRequestHeader(D,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let D=r.detectContentTypeHeader();D!==null&&a.setRequestHeader("Content-Type",D)}if(r.responseType){let D=r.responseType.toLowerCase();a.responseType=D!=="json"?D:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let D=a.statusText||"OK",P=new Sr(a.getAllResponseHeaders()),L=aj(a)||r.url;return l=new Fh({headers:P,status:a.status,statusText:D,url:L}),l},f=()=>{let{headers:D,status:P,statusText:L,url:V}=d(),j=null;P!==Y2&&(j=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=j?sA:0);let ee=P>=200&&P<300;if(r.responseType==="json"&&typeof j=="string"){let H=j;j=j.replace(oj,"");try{j=j!==""?JSON.parse(j):null}catch(I){j=H,ee&&(ee=!1,j={error:I,text:j})}}ee?(o.next(new jc({body:j,headers:D,status:P,statusText:L,url:V||void 0})),o.complete()):o.error(new li({error:j,headers:D,status:P,statusText:L,url:V||void 0}))},g=D=>{let{url:P}=d(),L=new li({error:D,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});o.error(L)},m=!1,_=D=>{m||(o.next(d()),m=!0);let P={type:hi.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(P.total=D.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),o.next(P)},S=D=>{let P={type:hi.UploadProgress,loaded:D.loaded};D.lengthComputable&&(P.total=D.total),o.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",_),c!==null&&a.upload&&a.upload.addEventListener("progress",S)),a.send(c),o.next({type:hi.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",_),c!==null&&a.upload&&a.upload.removeEventListener("progress",S)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(z(xo))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),aA=new K(""),cj="XSRF-TOKEN",uj=new K("",{providedIn:"root",factory:()=>cj}),lj="X-XSRF-TOKEN",dj=new K("",{providedIn:"root",factory:()=>lj}),Lh=class{},hj=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Nh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(z(ct),z(Jt),z(uj))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function fj(t,e){let n=t.url.toLowerCase();if(!F(aA)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=F(Lh).getToken(),i=F(dj);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function YK(...t){let e=[Z2,iA,rA,{provide:Lc,useExisting:rA},{provide:Oh,useFactory:()=>F(ej,{optional:!0})??F(iA)},{provide:oA,useValue:fj,multi:!0},{provide:aA,useValue:!0},{provide:Lh,useClass:hj}];for(let n of t)e.push(...n.\u0275providers);return ri(e)}var Ov=class extends Mh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Fv=class t extends Ov{static makeCurrent(){$S(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=pj();return n==null?null:gj(n)}resetBaseElement(){Uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nh(document.cookie,e)}},Uc=null;function pj(){return Uc=Uc||document.querySelector("base"),Uc?Uc.getAttribute("href"):null}function gj(t){return new URL(t,document.baseURI).pathname}var mj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Vh=new K(""),dA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(Vh),z(ye))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Bc=class{constructor(e){this._doc=e}},Pv="ng-app-id",hA=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ph(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Pv}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Pv),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Pv,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z(ct),z(Vy),z(Uy,8),z(Jt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),kv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vv=/%COMP%/g,fA="%COMP%",yj=`_nghost-${fA}`,vj=`_ngcontent-${fA}`,_j=!0,wj=new K("",{providedIn:"root",factory:()=>_j});function Ej(t){return vj.replace(Vv,t)}function Ij(t){return yj.replace(Vv,t)}function pA(t,e){return e.map(n=>n.replace(Vv,t))}var cA=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Ph(c),this.defaultRenderer=new $c(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Vn.ShadowDom&&(i=Re(q({},i),{encapsulation:Vn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof jh?s.applyToHost(r):s instanceof zc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Vn.Emulated:o=new jh(l,d,i,this.appId,f,a,c,g);break;case Vn.ShadowDom:return new Lv(l,d,r,i,a,c,this.nonce,g);default:o=new zc(l,d,i,f,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(dA),z(hA),z(Vy),z(wj),z(ct),z(Jt),z(ye),z(Uy))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),$c=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(kv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(uA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(uA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=kv[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=kv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($n.DashCase|$n.Important)?e.style.setProperty(n,r,i&$n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ro().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function uA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Lv=class extends $c{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=pA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zc=class extends $c{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?pA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jh=class extends zc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=Ej(l),this.hostAttr=Ij(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Dj=(()=>{let e=class e extends Bc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(z(ct))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Tj=(()=>{let e=class e extends Bc{constructor(r){super(r),this.delegate=F(PS,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(z(ct))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),lA=["alt","control","meta","shift"],bj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Sj=(()=>{let e=class e extends Bc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ro().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),lA.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=bj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),lA.forEach(a=>{if(a!==s){let c=Cj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z(ct))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function mQ(t,e){return NS(q({rootComponent:t},Aj(e)))}function Aj(t){return{appProviders:[...Pj,...t?.providers??[]],platformProviders:Nj}}function Rj(){Fv.makeCurrent()}function xj(){return new Bn}function Mj(){return qb(document),document}var Nj=[{provide:Jt,useValue:Sv},{provide:jy,useValue:Rj,multi:!0},{provide:ct,useFactory:Mj,deps:[]}];var Pj=[{provide:ih,useValue:"root"},{provide:Bn,useFactory:xj,deps:[]},{provide:Vh,useClass:Dj,multi:!0,deps:[ct,ye,Jt]},{provide:Vh,useClass:Sj,multi:!0,deps:[ct]},{provide:Vh,useClass:Tj,multi:!0},cA,hA,dA,{provide:Eo,useExisting:cA},{provide:xo,useClass:mj,deps:[]},[]];var gA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z(ct))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=z(kj),s},providedIn:"root"});let t=e;return t})(),kj=(()=>{let e=class e extends jv{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Gn.NONE:return i;case Gn.HTML:return ai(i,"HTML")?Dn(i):$y(this._doc,String(i)).toString();case Gn.STYLE:return ai(i,"Style")?Dn(i):i;case Gn.SCRIPT:if(ai(i,"Script"))return Dn(i);throw new Q(5200,!1);case Gn.URL:return ai(i,"URL")?Dn(i):yh(String(i));case Gn.RESOURCE_URL:if(ai(i,"ResourceURL"))return Dn(i);throw new Q(5201,!1);default:throw new Q(5202,!1)}}bypassSecurityTrustHtml(r){return Kb(r)}bypassSecurityTrustStyle(r){return Qb(r)}bypassSecurityTrustScript(r){return Yb(r)}bypassSecurityTrustUrl(r){return Zb(r)}bypassSecurityTrustResourceUrl(r){return Xb(r)}};e.\u0275fac=function(i){return new(i||e)(z(ct))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var de="primary",su=Symbol("RouteTitle"),Hv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Lo(t){return new Hv(t)}function Oj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Kn(t[n],e[n]))return!1;return!0}function Kn(t,e){let n=t?qv(t):void 0,r=e?qv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!SA(t[i],e[i]))return!1;return!0}function qv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function SA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function AA(t){return t.length>0?t[t.length-1]:null}function gi(t){return Pg(t)?t:Ao(t)?Ee(Promise.resolve(t)):J(t)}var Lj={exact:xA,subset:MA},RA={exact:Vj,subset:jj,ignored:()=>!0};function yA(t,e,n){return Lj[n.paths](t.root,e.root,n.matrixParams)&&RA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Vj(t,e){return Kn(t,e)}function xA(t,e,n){if(!ds(t.segments,e.segments)||!$h(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!xA(t.children[r],e.children[r],n))return!1;return!0}function jj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>SA(t[n],e[n]))}function MA(t,e,n){return NA(t,e,e.segments,n)}function NA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ds(i,n)||e.hasChildren()||!$h(i,n,r))}else if(t.segments.length===n.length){if(!ds(t.segments,n)||!$h(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!MA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!ds(t.segments,i)||!$h(t.segments,i,r)||!t.children[de]?!1:NA(t.children[de],e,s,r)}}function $h(t,e,n){return e.every((r,i)=>RA[n](t[i].parameters,r.parameters))}var Rr=class{constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Lo(this.queryParams),this._queryParamMap}toString(){return $j.serialize(this)}},Ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zh(this)}},ls=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Lo(this.parameters),this._parameterMap}toString(){return kA(this)}};function Uj(t,e){return ds(t,e)&&t.every((n,r)=>Kn(n.parameters,e[r].parameters))}function ds(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Bj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===de&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==de&&(n=n.concat(e(i,r)))}),n}var ou=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new Vo,providedIn:"root"});let t=e;return t})(),Vo=class{parse(e){let n=new Wv(e);return new Rr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Hc(e.root,!0)}`,r=qj(e.queryParams),i=typeof e.fragment=="string"?`#${zj(e.fragment)}`:"";return`${n}${r}${i}`}},$j=new Vo;function zh(t){return t.segments.map(e=>kA(e)).join("/")}function Hc(t,e){if(!t.hasChildren())return zh(t);if(e){let n=t.children[de]?Hc(t.children[de],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==de&&r.push(`${i}:${Hc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Bj(t,(r,i)=>i===de?[Hc(t.children[de],!1)]:[`${i}:${Hc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[de]!=null?`${zh(t)}/${n[0]}`:`${zh(t)}/(${n.join("//")})`}}function PA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uh(t){return PA(t).replace(/%3B/gi,";")}function zj(t){return encodeURI(t)}function Gv(t){return PA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hh(t){return decodeURIComponent(t)}function vA(t){return Hh(t.replace(/\+/g,"%20"))}function kA(t){return`${Gv(t.path)}${Hj(t.parameters)}`}function Hj(t){return Object.entries(t).map(([e,n])=>`;${Gv(e)}=${Gv(n)}`).join("")}function qj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Uh(n)}=${Uh(i)}`).join("&"):`${Uh(n)}=${Uh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Gj=/^[^\/()?;#]+/;function Uv(t){let e=t.match(Gj);return e?e[0]:""}var Wj=/^[^\/()?;=#]+/;function Kj(t){let e=t.match(Wj);return e?e[0]:""}var Qj=/^[^=?&#]+/;function Yj(t){let e=t.match(Qj);return e?e[0]:""}var Zj=/^[^&#]+/;function Xj(t){let e=t.match(Zj);return e?e[0]:""}var Wv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[de]=new Ie(e,n)),r}parseSegment(){let e=Uv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new ls(Hh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Kj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Uv(this.remaining);i&&(r=i,this.capture(r))}e[Hh(n)]=Hh(r)}parseQueryParam(e){let n=Yj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Xj(this.remaining);o&&(r=o,this.capture(r))}let i=vA(n),s=vA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Uv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=de);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[de]:new Ie([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function OA(t){return t.segments.length>0?new Ie([],{[de]:t}):t}function FA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=FA(i);if(r===de&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ie(t.segments,e);return Jj(n)}function Jj(t){if(t.numberOfChildren===1&&t.children[de]){let e=t.children[de];return new Ie(t.segments.concat(e.segments),e.children)}return t}function Yc(t){return t instanceof Rr}function eU(t,e,n=null,r=null){let i=LA(t);return VA(i,e,n,r)}function LA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ie(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=OA(r);return e??i}function VA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Bv(i,i,i,n,r);let s=tU(e);if(s.toRoot())return Bv(i,i,new Ie([],{}),n,r);let o=nU(s,i,t),a=o.processChildren?Wc(o.segmentGroup,o.index,s.commands):UA(o.segmentGroup,o.index,s.commands);return Bv(i,o.segmentGroup,a,n,r)}function qh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Zc(t){return typeof t=="object"&&t!=null&&t.outlets}function Bv(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=jA(t,e,n);let a=OA(FA(o));return new Rr(a,s,i)}function jA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=jA(s,e,n)}),new Ie(t.segments,r)}var Gh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&qh(r[0]))throw new Q(4003,!1);let i=r.find(Zc);if(i&&i!==AA(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Gh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Gh(n,e,r)}var ko=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function nU(t,e,n){if(t.isAbsolute)return new ko(e,!0,0);if(!n)return new ko(e,!1,NaN);if(n.parent===null)return new ko(n,!0,0);let r=qh(t.commands[0])?0:1,i=n.segments.length-1+r;return rU(n,i,t.numberOfDoubleDots)}function rU(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new ko(r,!1,i-s)}function iU(t){return Zc(t[0])?t[0].outlets:{[de]:t}}function UA(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return Wc(t,e,n);let r=sU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ie(t.segments.slice(0,r.pathIndex),{});return s.children[de]=new Ie(t.segments.slice(r.pathIndex),t.children),Wc(s,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?Kv(t,e,n):r.match?Wc(t,0,i):Kv(t,e,n)}function Wc(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=iU(n),i={};if(Object.keys(r).some(s=>s!==de)&&t.children[de]&&t.numberOfChildren===1&&t.children[de].segments.length===0){let s=Wc(t.children[de],e,n);return new Ie(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=UA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ie(t.segments,i)}}function sU(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Zc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!wA(c,l,o))return s;r+=2}else{if(!wA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Kv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Zc(s)){let c=oU(s.outlets);return new Ie(r,c)}if(i===0&&qh(n[0])){let c=t.segments[e];r.push(new ls(c.path,_A(n[0]))),i++;continue}let o=Zc(s)?s.outlets[de]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&qh(a)?(r.push(new ls(o,_A(a))),i+=2):(r.push(new ls(o,{})),i++)}return new Ie(r,{})}function oU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Kv(new Ie([],{}),0,r))}),e}function _A(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function wA(t,e,n){return t==n.path&&Kn(e,n.parameters)}var Kc="imperative",ut=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ut||{}),hn=class{constructor(e,n){this.id=e,this.url=n}},jo=class extends hn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xr=class extends hn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(tn||{}),Wh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Wh||{}),Ar=class extends hn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fi=class extends hn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationSkipped}},Xc=class extends hn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kh=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qv=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yv=class extends hn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zv=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xv=class extends hn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jv=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},e_=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},t_=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},n_=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},r_=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},i_=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ut.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Jc=class{},Uo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function aU(t,e){return t.providers&&!t._injector&&(t._injector=Th(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Cn(t){return t.outlet||de}function cU(t,e){let n=t.filter(r=>Cn(r)===e);return n.push(...t.filter(r=>Cn(r)!==e)),n}function au(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var s_=class{get injector(){return au(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new cu(this.rootInjector),this.attachRef=null}},cu=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new s_(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(z(kt))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=o_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=o_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=a_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return a_(e,this._root).map(n=>n.value)}};function o_(t,e){if(t===e.value)return e;for(let n of e.children){let r=o_(t,n);if(r)return r}return null}function a_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=a_(t,n);if(r.length)return r.unshift(e),r}return[]}var en=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Po(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Zh=class extends Yh{constructor(e,n){super(e),this.snapshot=n,m_(this,e)}toString(){return this.snapshot.toString()}};function BA(t){let e=uU(t),n=new dt([new ls("",{})]),r=new dt({}),i=new dt({}),s=new dt({}),o=new dt(""),a=new hs(n,r,s,o,i,de,t,e.root);return a.snapshot=e.root,new Zh(new en(a,[]),e)}function uU(t){let e={},n={},r={},i="",s=new Oo([],e,r,i,n,de,t,null,{});return new Jh("",new en(s,[]))}var hs=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ce(l=>l[su]))??J(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>Lo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>Lo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),t.params),data:q(q({},e.data),t.data),resolve:q(q(q(q({},t.data),e.data),i?.data),t._resolvedData)}:r={params:q({},t.params),data:q({},t.data),resolve:q(q({},t.data),t._resolvedData??{})},i&&zA(i)&&(r.resolve[su]=i.title),r}var Oo=class{get title(){return this.data?.[su]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Lo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Lo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Jh=class extends Yh{constructor(e,n){super(n),this.url=e,m_(this,n)}toString(){return $A(this._root)}};function m_(t,e){e.value._routerState=t,e.children.forEach(n=>m_(t,n))}function $A(t){let e=t.children.length>0?` { ${t.children.map($A).join(", ")} } `:"";return`${t.value}${e}`}function $v(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Kn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Kn(e.params,n.params)||t.paramsSubject.next(n.params),Fj(e.url,n.url)||t.urlSubject.next(n.url),Kn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function c_(t,e){let n=Kn(t.params,e.params)&&Uj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||c_(t.parent,e.parent))}function zA(t){return typeof t.title=="string"||t.title===null}var lU=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.parentContexts=F(cu),this.location=F(Tr),this.changeDetector=F(bn),this.inputBinder=F(rf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new u_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ni({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Cc]});let t=e;return t})(),u_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===hs?this.route:e===cu?this.childContexts:this.parent.get(e,n)}},rf=new K(""),EA=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=dc([i.queryParams,i.params,i.data]).pipe(Ge(([o,a,c],l)=>(c=q(q(q({},o),a),c),l===0?J(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=OS(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function dU(t,e,n){let r=eu(t,e._root,n?n._root:void 0);return new Zh(r,e)}function eu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=hU(t,e,n);return new en(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>eu(t,a)),o}}let r=fU(e.value),i=e.children.map(s=>eu(t,s));return new en(r,i)}}function hU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return eu(t,r,i);return eu(t,r)})}function fU(t){return new hs(new dt(t.url),new dt(t.params),new dt(t.queryParams),new dt(t.fragment),new dt(t.data),t.outlet,t.component,t)}var tu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},HA="ngNavigationCancelingError";function ef(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Yc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qA(!1,tn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function qA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[HA]=!0,n.cancellationCode=e,n}function pU(t){return GA(t)&&Yc(t.url)}function GA(t){return!!t&&t[HA]}var gU=(t,e,n,r)=>ce(i=>(new l_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),l_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),$v(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Po(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Po(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Po(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Po(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new i_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new n_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if($v(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$v(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},tf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fo=class{constructor(e,n){this.component=e,this.route=n}};function mU(t,e,n){let r=t._root,i=e?e._root:null;return qc(r,i,n,[r.value])}function yU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function $o(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!R0(t)?t:e.get(t):r}function qc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Po(e);return t.children.forEach(o=>{vU(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Qc(a,n.getContext(o),i)),i}function vU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=_U(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new tf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?qc(t,e,a?a.children:null,r,i):qc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fo(a.outlet.component,o))}else o&&Qc(e,a,i),i.canActivateChecks.push(new tf(r)),s.component?qc(t,null,a?a.children:null,r,i):qc(t,null,n,r,i);return i}function _U(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ds(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ds(t.url,e.url)||!Kn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!c_(t,e)||!Kn(t.queryParams,e.queryParams);case"paramsChange":default:return!c_(t,e)}}function Qc(t,e,n){let r=Po(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Qc(o,e.children.getContext(s),n):Qc(o,null,n):Qc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Fo(e.outlet.component,i)):n.canDeactivateChecks.push(new Fo(null,i)):n.canDeactivateChecks.push(new Fo(null,i))}function uu(t){return typeof t=="function"}function wU(t){return typeof t=="boolean"}function EU(t){return t&&uu(t.canLoad)}function IU(t){return t&&uu(t.canActivate)}function DU(t){return t&&uu(t.canActivateChild)}function TU(t){return t&&uu(t.canDeactivate)}function bU(t){return t&&uu(t.canMatch)}function WA(t){return t instanceof dr||t?.name==="EmptyError"}var Bh=Symbol("INITIAL_VALUE");function Bo(){return Ge(t=>dc(t.map(e=>e.pipe(pr(1),Bg(Bh)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===Bh)return Bh;if(n===!1||CU(n))return n}return!0}),Et(e=>e!==Bh),pr(1)))}function CU(t){return Yc(t)||t instanceof tu}function SU(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?J(Re(q({},n),{guardsResult:!0})):AU(o,r,i,t).pipe($e(a=>a&&wU(a)?RU(r,s,t,e):J(a)),ce(a=>Re(q({},n),{guardsResult:a})))})}function AU(t,e,n,r){return Ee(t).pipe($e(i=>kU(i.component,i.route,n,e,r)),yn(i=>i!==!0,!0))}function RU(t,e,n,r){return Ee(e).pipe(fr(i=>ro(MU(i.route.parent,r),xU(i.route,r),PU(t,i.path,n),NU(t,i.route,n))),yn(i=>i!==!0,!0))}function xU(t,e){return t!==null&&e&&e(new r_(t)),J(!0)}function MU(t,e){return t!==null&&e&&e(new t_(t)),J(!0)}function NU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>dd(()=>{let o=au(e)??n,a=$o(s,o),c=IU(a)?a.canActivate(e,t):an(o,()=>a(e,t));return gi(c).pipe(yn())}));return J(i).pipe(Bo())}function PU(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>yU(o)).filter(o=>o!==null).map(o=>dd(()=>{let a=o.guards.map(c=>{let l=au(o.node)??n,d=$o(c,l),f=DU(d)?d.canActivateChild(r,t):an(l,()=>d(r,t));return gi(f).pipe(yn())});return J(a).pipe(Bo())}));return J(s).pipe(Bo())}function kU(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(a=>{let c=au(e)??i,l=$o(a,c),d=TU(l)?l.canDeactivate(t,e,n,r):an(c,()=>l(t,e,n,r));return gi(d).pipe(yn())});return J(o).pipe(Bo())}function OU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let a=$o(o,t),c=EU(a)?a.canLoad(e,n):an(t,()=>a(e,n));return gi(c)});return J(s).pipe(Bo(),KA(r))}function KA(t){return Cg(We(e=>{if(typeof e!="boolean")throw ef(t,e)}),ce(e=>e===!0))}function FU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let a=$o(o,t),c=bU(a)?a.canMatch(e,n):an(t,()=>a(e,n));return gi(c)});return J(s).pipe(Bo(),KA(r))}var nu=class{constructor(e){this.segmentGroup=e||null}},ru=class extends Error{constructor(e){super(),this.urlTree=e}};function No(t){return to(new nu(t))}function LU(t){return to(new Q(4e3,!1))}function VU(t){return to(qA(!1,tn.GuardRejected))}var d_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[de])return LU(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:m,data:_,title:S}=i,D=an(s,()=>a({params:m,data:_,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:S}));if(D instanceof Rr)throw new ru(D);n=D}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ru(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Rr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ie(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},h_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jU(t,e,n,r,i){let s=QA(t,e,n);return s.matched?(r=aU(e,r),FU(r,e,n,i).pipe(ce(o=>o===!0?s:q({},h_)))):J(s)}function QA(t,e,n){if(e.path==="**")return UU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?q({},h_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Oj)(n,t,e);if(!i)return q({},h_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?q(q({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function UU(t){return{matched:!0,parameters:t.length>0?AA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function IA(t,e,n,r){return n.length>0&&zU(t,n,r)?{segmentGroup:new Ie(e,$U(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&HU(t,n,r)?{segmentGroup:new Ie(t.segments,BU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function BU(t,e,n,r){let i={};for(let s of n)if(sf(t,e,s)&&!r[Cn(s)]){let o=new Ie([],{});i[Cn(s)]=o}return q(q({},r),i)}function $U(t,e){let n={};n[de]=e;for(let r of t)if(r.path===""&&Cn(r)!==de){let i=new Ie([],{});n[Cn(r)]=i}return n}function zU(t,e,n){return n.some(r=>sf(t,e,r)&&Cn(r)!==de)}function HU(t,e,n){return n.some(r=>sf(t,e,r))}function sf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function qU(t,e,n){return e.length===0&&!t.children[n]}var f_=class{};function GU(t,e,n,r,i,s,o="emptyOnly"){return new p_(t,e,n,r,i,o,s).recognize()}var WU=31,p_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new d_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=IA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new en(r,n),s=new Jh("",i),o=eU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Oo([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,n).pipe(ce(r=>({children:r,rootSnapshot:n})),hr(r=>{if(r instanceof ru)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof nu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ce(o=>o instanceof en?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ee(s).pipe(fr(o=>{let a=r.children[o],c=cU(n,o);return this.processSegmentGroup(e,c,a,o,i)}),Vg((o,a)=>(o.push(...a),o)),Kr(null),Lg(),$e(o=>{if(o===null)return No(r);let a=YA(o);return KU(a),J(a)}))}processSegment(e,n,r,i,s,o,a){return Ee(n).pipe(fr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(hr(l=>{if(l instanceof nu)return J(null);throw l}))),yn(c=>!!c),hr(c=>{if(WA(c))return qU(r,i,s)?J(new f_):No(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return Cn(r)!==o&&(o===de||!sf(i,s,r))?No(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):No(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=QA(n,i,s);if(!c)return No(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WU&&(this.allowRedirects=!1));let m=new Oo(s,l,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,DA(i),Cn(i),i.component??i._loadedComponent??null,i,TA(i)),_=Xh(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let S=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,S).pipe($e(D=>this.processSegment(e,r,n,D.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=jU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ge(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ge(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,_=new Oo(g,f,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,DA(r),Cn(r),r.component??r._loadedComponent??null,r,TA(r)),S=Xh(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data);let{segmentGroup:D,slicedSegments:P}=IA(n,g,m,l);if(P.length===0&&D.hasChildren())return this.processChildren(d,l,D,_).pipe(ce(V=>new en(_,V)));if(l.length===0&&P.length===0)return J(new en(_,[]));let L=Cn(r)===s;return this.processSegment(d,l,D,P,L?de:s,!0,_).pipe(ce(V=>new en(_,V instanceof en?[V]:[])))}))):No(n)))}getChildConfig(e,n,r){return n.children?J({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):OU(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(We(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):VU(n))):J({routes:[],injector:e})}};function KU(t){t.sort((e,n)=>e.value.outlet===de?-1:n.value.outlet===de?1:e.value.outlet.localeCompare(n.value.outlet))}function QU(t){let e=t.value.routeConfig;return e&&e.path===""}function YA(t){let e=[],n=new Set;for(let r of t){if(!QU(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=YA(r.children);e.push(new en(r.value,i))}return e.filter(r=>!n.has(r))}function DA(t){return t.data||{}}function TA(t){return t.resolve||{}}function YU(t,e,n,r,i,s){return $e(o=>GU(t,e,n,r,o.extractedUrl,i,s).pipe(ce(({state:a,tree:c})=>Re(q({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function ZU(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return J(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of ZA(c))o.add(l);let a=0;return Ee(o).pipe(fr(c=>s.has(c)?XU(c,r,t,e):(c.data=Xh(c,c.parent,t).resolve,J(void 0))),We(()=>a++),io(1),$e(c=>a===o.size?J(n):Mt))})}function ZA(t){let e=t.children.map(n=>ZA(n)).flat();return[t,...e]}function XU(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!zA(i)&&(s[su]=i.title),JU(s,t,e,r).pipe(ce(o=>(t._resolvedData=o,t.data=Xh(t,t.parent,n).resolve,null)))}function JU(t,e,n,r){let i=qv(t);if(i.length===0)return J({});let s={};return Ee(i).pipe($e(o=>eB(t[o],e,n,r).pipe(yn(),We(a=>{if(a instanceof tu)throw ef(new Vo,a);s[o]=a}))),io(1),Fg(s),hr(o=>WA(o)?Mt:to(o)))}function eB(t,e,n,r){let i=au(e)??r,s=$o(t,i),o=s.resolve?s.resolve(e,n):an(i,()=>s(e,n));return gi(o)}function zv(t){return Ge(e=>{let n=t(e);return n?Ee(n).pipe(ce(()=>e)):J(e)})}var XA=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===de);return i}getResolvedTitleForRoute(r){return r.data[su]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(tB),providedIn:"root"});let t=e;return t})(),tB=(()=>{let e=class e extends XA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(gA))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lu=new K("",{providedIn:"root",factory:()=>({})}),nB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=bc({type:e,selectors:[["ng-component"]],standalone:!0,features:[IS],decls:1,vars:0,template:function(i,s){i&1&&Wn(0,"router-outlet")},dependencies:[lU],encapsulation:2});let t=e;return t})();function y_(t){let e=t.children&&t.children.map(y_),n=e?Re(q({},t),{children:e}):q({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=nB),n}var iu=new K(""),v_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(xh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return J(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=gi(r.loadComponent()).pipe(ce(JA),We(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Wi(()=>{this.componentLoaders.delete(r)})),s=new Ys(i,()=>new qe).pipe(Qs());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return J({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=rB(i,this.compiler,r,this.onLoadEndListener).pipe(Wi(()=>{this.childrenLoaders.delete(i)})),a=new Ys(o,()=>new qe).pipe(Qs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rB(t,e,n,r){return gi(t.loadChildren()).pipe(ce(JA),$e(i=>i instanceof wc||Array.isArray(i)?J(i):Ee(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(iu,[],{optional:!0,self:!0}).flat()),{routes:o.map(y_),injector:s}}))}function iB(t){return t&&typeof t=="object"&&"default"in t}function JA(t){return iB(t)?t.default:t}var __=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(sB),providedIn:"root"});let t=e;return t})(),sB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eR=new K(""),tR=new K("");function oB(t,e,n){let r=t.get(tR),i=t.get(ct);return t.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),aB(t))),{onViewTransitionCreated:c}=r;return c&&an(t,()=>c({transition:a,from:e,to:n})),o})}function aB(t){return new Promise(e=>{iv({read:()=>setTimeout(e)},{injector:t})})}var cB=new K(""),w_=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=F(v_),this.environmentInjector=F(kt),this.urlSerializer=F(ou),this.rootContexts=F(cu),this.location=F(Mo),this.inputBindingEnabled=F(rf,{optional:!0})!==null,this.titleStrategy=F(XA),this.options=F(lu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(__),this.createViewTransition=F(eR,{optional:!0}),this.navigationErrorHandler=F(cB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Jv(s)),i=s=>this.events.next(new e_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Re(q(q({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new dt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Kc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),ce(o=>Re(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ge(o=>{let a=!1,c=!1;return J(o).pipe(Ge(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),Mt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Re(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new fi(l.id,this.urlSerializer.serialize(l.rawUrl),g,Wh.IgnoredSameUrlNavigation)),l.resolve(!1),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return J(l).pipe(Ge(g=>{let m=this.transitions?.getValue();return this.events.next(new jo(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?Mt:Promise.resolve(g)}),YU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),We(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Re(q({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new Kh(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:m,source:_,restoredState:S,extras:D}=l,P=new jo(g,this.urlSerializer.serialize(m),_,S);this.events.next(P);let L=BA(this.rootComponentType).snapshot;return this.currentTransition=o=Re(q({},l),{targetSnapshot:L,urlAfterRedirects:m,extras:Re(q({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let g="";return this.events.next(new fi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,Wh.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Mt}}),We(l=>{let d=new Qv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ce(l=>(this.currentTransition=o=Re(q({},l),{guards:mU(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),SU(this.environmentInjector,l=>this.events.next(l)),We(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw ef(this.urlSerializer,l.guardsResult);let d=new Yv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Et(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",tn.GuardRejected),!1)),zv(l=>{if(l.guards.canActivateChecks.length)return J(l).pipe(We(d=>{let f=new Zv(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ge(d=>{let f=!1;return J(d).pipe(ZU(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",tn.NoDataFromResolver)}}))}),We(d=>{let f=new Xv(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),zv(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(We(m=>{f.component=m}),ce(()=>{})));for(let m of f.children)g.push(...d(m));return g};return dc(d(l.targetSnapshot.root)).pipe(Kr(null),pr(1))}),zv(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?Ee(f).pipe(ce(()=>o)):J(o)}),ce(l=>{let d=dU(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Re(q({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),We(()=>{this.events.next(new Jc)}),gU(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),pr(1),We({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),$g(this.transitionAbortSubject.pipe(We(l=>{throw l}))),Wi(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",tn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),hr(l=>{if(c=!0,GA(l))this.events.next(new Ar(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),pU(l)?this.events.next(new Uo(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Xc(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=an(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof tu){let{message:g,cancellationCode:m}=ef(this.urlSerializer,f);this.events.next(new Ar(o.id,this.urlSerializer.serialize(o.extractedUrl),g,m)),this.events.next(new Uo(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);o.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Mt}))}))}cancelNavigationTransition(r,i,s){let o=new Ar(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uB(t){return t!==Kc}var lB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(dB),providedIn:"root"});let t=e;return t})(),g_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},dB=(()=>{let e=class e extends g_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Oy(e)))(s||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(hB),providedIn:"root"});let t=e;return t})(),hB=(()=>{let e=class e extends nR{constructor(){super(...arguments),this.location=F(Mo),this.urlSerializer=F(ou),this.options=F(lu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(__),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=BA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof jo)this.stateMemento=this.createStateMemento();else if(r instanceof fi)this.rawUrlTree=i.initialUrl;else if(r instanceof Kh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Jc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Ar&&(r.code===tn.GuardRejected||r.code===tn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Xc?this.restoreHistory(i,!0):r instanceof xr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Rr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=q(q({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=q(q({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Oy(e)))(s||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Gc||{});function rR(t,e){t.events.pipe(Et(n=>n instanceof xr||n instanceof Ar||n instanceof Xc||n instanceof fi),ce(n=>n instanceof xr||n instanceof fi?Gc.COMPLETE:(n instanceof Ar?n.code===tn.Redirect||n.code===tn.SupersededByNewNavigation:!1)?Gc.REDIRECTING:Gc.FAILED),Et(n=>n!==Gc.REDIRECTING),pr(1)).subscribe(()=>{e()})}function fB(t){throw t}var pB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(Ah),this.stateManager=F(nR),this.options=F(lu,{optional:!0})||{},this.pendingTasks=F(Er),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(w_),this.urlSerializer=F(ou),this.location=F(Mo),this.urlHandlingStrategy=F(__),this._events=new qe,this.errorHandler=this.options.errorHandler||fB,this.navigated=!1,this.routeReuseStrategy=F(lB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(iu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(rf,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ar&&i.code!==tn.Redirect&&i.code!==tn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof xr)this.navigated=!0;else if(i instanceof Uo){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=q({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uB(s.source)},a);this.scheduleNavigation(c,Kc,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}yB(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=q({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(y_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=LA(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return VA(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Yc(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Kc,null,i)}navigate(r,i={skipLocationChange:!1}){return mB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=q({},pB):i===!1?s=q({},gB):s=i,Yc(r))return yA(this.currentUrlTree,r,s);let o=this.parseUrl(r);return yA(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,m)=>{c=g,l=m});let f=this.pendingTasks.add();return rR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function yB(t){return!(t instanceof Jc)&&!(t instanceof Uo)}var nf=class{};var vB=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Et(r=>r instanceof xr),fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Th(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Ee(s).pipe(Wr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=J(null);let o=s.pipe($e(a=>a===null?J(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ee([o,a]).pipe(Wr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(z(pi),z(xh),z(kt),z(nf),z(v_))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iR=new K(""),_B=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof jo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof xr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof fi&&r.code===Wh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Qh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){_C()},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function OQ(t,...e){return ri([{provide:iu,multi:!0,useValue:t},[],{provide:hs,useFactory:sR,deps:[pi]},{provide:Oc,multi:!0,useFactory:oR},e.map(n=>n.\u0275providers)])}function sR(t){return t.routerState.root}function du(t,e){return{\u0275kind:t,\u0275providers:e}}function oR(){let t=F(Ht);return e=>{let n=t.get(ci);if(e!==n.components[0])return;let r=t.get(pi),i=t.get(aR);t.get(E_)===1&&r.initialNavigation(),t.get(cR,null,he.Optional)?.setUpPreloading(),t.get(iR,null,he.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aR=new K("",{factory:()=>new qe}),E_=new K("",{providedIn:"root",factory:()=>1});function wB(){return du(2,[{provide:E_,useValue:0},{provide:Rh,multi:!0,deps:[Ht],useFactory:e=>{let n=e.get(zS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(pi),s=e.get(aR);rR(i,()=>{r(!0)}),e.get(w_).afterPreactivation=()=>(r(!0),s.closed?J(void 0):s),i.initialNavigation()}))}}])}function EB(){return du(3,[{provide:Rh,multi:!0,useFactory:()=>{let e=F(pi);return()=>{e.setUpLocationChangeListener()}}},{provide:E_,useValue:2}])}var cR=new K("");function IB(t){return du(0,[{provide:cR,useExisting:vB},{provide:nf,useExisting:t}])}function DB(){return du(8,[EA,{provide:rf,useExisting:EA}])}function TB(t){let e=[{provide:eR,useValue:oB},{provide:tR,useValue:q({skipNextTransition:!!t?.skipInitialTransition},t)}];return du(9,e)}var bA=new K("ROUTER_FORROOT_GUARD"),bB=[Mo,{provide:ou,useClass:Vo},pi,cu,{provide:hs,useFactory:sR,deps:[pi]},v_,[]],FQ=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[bB,[],{provide:iu,multi:!0,useValue:r},{provide:bA,useFactory:RB,deps:[[pi,new Hn,new nh]]},{provide:lu,useValue:i||{}},i?.useHash?SB():AB(),CB(),i?.preloadingStrategy?IB(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?xB(i):[],i?.bindToComponentInputs?DB().\u0275providers:[],i?.enableViewTransitions?TB().\u0275providers:[],MB()]}}static forChild(r){return{ngModule:e,providers:[{provide:iu,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(z(bA,8))},e.\u0275mod=In({type:e}),e.\u0275inj=En({});let t=e;return t})();function CB(){return{provide:iR,useFactory:()=>{let t=F(YS),e=F(ye),n=F(lu),r=F(w_),i=F(ou);return n.scrollOffset&&t.setOffset(n.scrollOffset),new _B(i,r,t,e,n)}}}function SB(){return{provide:us,useClass:qS}}function AB(){return{provide:us,useClass:Tv}}function RB(t){return"guarded"}function xB(t){return[t.initialNavigation==="disabled"?EB().\u0275providers:[],t.initialNavigation==="enabledBlocking"?wB().\u0275providers:[]]}var CA=new K("");function MB(){return[{provide:CA,useFactory:oR},{provide:Oc,multi:!0,useExisting:CA}]}var NB="firebase",PB="10.13.1";Bt(NB,PB,"app");var af=new as("ANGULARFIRE2_VERSION");function uR(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var D_=(t,e)=>{let n=e?[e]:kl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ps=class{constructor(){return D_(kB)}},kB="app-check";function zo(){}var of=class{zone;delegate;constructor(e,n=Mg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},I_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zo,{},zo,zo)),n.pipe(We({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},cf=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new of(Zone.current)),this.insideAngular=n.run(()=>new of(Zone.current,qr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(ye))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function OB(t){return hu().ngZone.runOutsideAngular(()=>t())}function fs(t){return hu().ngZone.run(()=>t())}function T_(t){return t.pipe(lr(hu().outsideAngular))}function uf(t){return FB(hu())(t)}function FB(t){return function(n){return n=n.lift(new I_(t.ngZone)),n.pipe(Gr(t.outsideAngular),lr(t.insideAngular))}}var LB=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),fs(()=>t.apply(void 0,r))},lR=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=fs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zo,{},zo,zo))),r[s]=LB(r[s],n));let i=OB(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=hu();return i.pipe(Gr(s.outsideAngular),lr(s.insideAngular))}else return fs(()=>i);return i instanceof ae?i.pipe(uf):i instanceof Promise?fs(()=>new Promise((s,o)=>i.then(a=>fs(()=>s(a)),a=>fs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:fs(()=>i)};var lf=class{constructor(e){return e}},df=class{constructor(){return kl()}};var dR="auth",fu=class{constructor(e){return e}},b_=class{constructor(){return D_(dR)}};var C_=new K("angularfire2.auth-instances");function V$(t,e){let n=uR(dR,t,e);return n&&new fu(n)}function j$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fu(r)}}var U$={provide:b_,deps:[[new Hn,C_]]},B$={provide:fu,useFactory:V$,deps:[[new Hn,C_],lf]};function qY(t,...e){return Bt("angularfire",af.full,"auth"),ri([B$,U$,{provide:C_,useFactory:j$(t),multi:!0,deps:[ye,Ht,cf,df,[new Hn,ps],...e]}])}var GY=lR(gg,!0);var Ho=t=>t!=null&&t!="undefined",QY=t=>t==null||t==null,YY=t=>t==null;function ZY(t){return t===null?!1:typeof t=="function"||typeof t=="object"}var hR=class{static isTypeDate(e){return Ho(e)&&e.toString()=="Invalid Date"?!1:e instanceof Date?!isNaN(e.getTime()):!!new Date(e).getTime()}static getRandom(e){return Math.floor(Math.random()*Math.floor(e))}};var Sn=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Sn||{}),JY="*";function gR(t,e){return{type:Sn.Trigger,name:t,definitions:e,options:{}}}function Ot(t,e=null){return{type:Sn.Animate,styles:e,timings:t}}function eZ(t,e=null){return{type:Sn.Group,steps:t,options:e}}function tZ(t,e=null){return{type:Sn.Sequence,steps:t,options:e}}function Te(t){return{type:Sn.Style,styles:t,offset:null}}function Ft(t,e,n){return{type:Sn.State,name:t,styles:e,options:n}}function nZ(t){return{type:Sn.Keyframes,steps:t}}function Lt(t,e,n=null){return{type:Sn.Transition,expr:t,animation:e,options:n}}function rZ(t=null){return{type:Sn.AnimateChild,options:t}}function iZ(t,e,n=null){return{type:Sn.Query,selector:t,animation:e,options:n}}var fR=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},pR=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},sZ="!";var $$=(t,e,n,r,i,s,o,a)=>({alert:t,error:e,warn:n,success:r,info:i,bare:s,"rtl-mode":o,"has-icon":a}),z$=t=>({width:t});function H$(t,e){t&1&&Pc(0)}function q$(t,e){if(t&1&&(ln(0,"div",9),br(1,H$,1,0,"ng-container",10),dn()),t&2){let n=Wt(2);Gt(),Ve("ngTemplateOutlet",n.title)("ngTemplateOutletContext",n.item.context)}}function G$(t,e){if(t&1&&Wn(0,"div",11),t&2){let n=Wt(2);Ve("innerHTML",n.title,Co)}}function W$(t,e){t&1&&Pc(0)}function K$(t,e){if(t&1&&(ln(0,"div",12),br(1,W$,1,0,"ng-container",10),dn()),t&2){let n=Wt(2);Gt(),Ve("ngTemplateOutlet",n.content)("ngTemplateOutletContext",n.item.context)}}function Q$(t,e){if(t&1&&Wn(0,"div",13),t&2){let n=Wt(2);Ve("innerHTML",n.content,Co)}}function Y$(t,e){if(t&1&&Wn(0,"div",14),t&2){let n=Wt(2);Ve("innerHTML",n.safeSvg,Co)}}function Z$(t,e){if(t&1&&(ln(0,"div"),br(1,q$,2,2,"div",6)(2,G$,1,1,"ng-template",null,0,Sh)(4,K$,2,2,"div",7)(5,Q$,1,1,"ng-template",null,1,Sh)(7,Y$,1,1,"div",8),dn()),t&2){let n=Ch(3),r=Ch(6),i=Wt();Gt(),Ve("ngIf",i.titleIsTemplate)("ngIfElse",n),Gt(3),Ve("ngIf",i.contentIsTemplate)("ngIfElse",r),Gt(3),Ve("ngIf",i.item.icon!=="bare")}}function X$(t,e){t&1&&Pc(0)}function J$(t,e){if(t&1&&(ln(0,"div",17),br(1,X$,1,0,"ng-container",10),dn()),t&2){let n=Wt(2);Gt(),Ve("ngTemplateOutlet",n.item.html)("ngTemplateOutletContext",n.item.context)}}function e4(t,e){if(t&1&&Wn(0,"div",13),t&2){let n=Wt(2);Ve("innerHTML",n.safeInputHtml,Co)}}function t4(t,e){if(t&1){let n=vS();ln(0,"div",18),kc("click",function(i){fb(n);let s=Wt(2);return pb(s.onClickIcon(i))}),dn()}if(t&2){let n=Wt(2);ov("icon-hover",n.clickIconToClose),Ve("innerHTML",n.safeSvg,Co)}}function n4(t,e){if(t&1&&(ln(0,"div"),br(1,J$,2,2,"div",15)(2,e4,1,1,"ng-template",null,2,Sh)(4,t4,1,3,"div",16),dn()),t&2){let n=Ch(3),r=Wt();Gt(),Ve("ngIf",r.htmlIsTemplate)("ngIfElse",n),Gt(3),Ve("ngIf",r.item.icon)}}function r4(t,e){if(t&1&&(ln(0,"div",19),Wn(1,"span",20),dn()),t&2){let n=Wt();Gt(),Ve("ngStyle",DS(1,z$,n.progressWidth+"%"))}}function i4(t,e){if(t&1&&Wn(0,"simple-notification",2),t&2){let n=e.$implicit,r=e.index,i=Wt();Ve("item",n)("timeOut",i.timeOut)("clickToClose",i.clickToClose)("clickIconToClose",i.clickIconToClose)("maxLength",i.maxLength)("showProgressBar",i.showProgressBar)("pauseOnHover",i.pauseOnHover)("theClass",i.theClass)("rtl",i.rtl)("animate",i.animate)("position",r)}}var yR={alert:`
        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
        </svg>
    `,error:`
        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0V0z" fill="none"/>
            <path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
        </svg>
    `,info:`
        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/>
        </svg>
    `,success:`
        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
        </svg>
    `,warn:`
        <svg class="simple-notification-svg" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" width="64" viewBox="0 0 64 64" height="64">
          <circle cx="32.086" cy="50.142" r="2.256"/>
          <path d="M30.08 25.012V42.32c0 1.107.897 2.005 2.006 2.005s2.006-.897 2.006-2.005V25.012c0-1.107-.897-2.006-2.006-2.006s-2.006.898-2.006 2.006z"/>
          <path d="M63.766 59.234L33.856 3.082c-.697-1.308-2.844-1.308-3.54 0L.407 59.234c-.331.622-.312 1.372.051 1.975.362.605 1.015.975 1.72.975h59.816c.705 0 1.357-.369 1.721-.975.361-.603.381-1.353.051-1.975zM5.519 58.172L32.086 8.291l26.568 49.881H5.519z"/>
        </svg>
    `},Mr=function(t){return t.Success="success",t.Error="error",t.Alert="alert",t.Info="info",t.Warn="warn",t.Bare="bare",t}(Mr||{}),pu=(()=>{class t{globalOptions;constructor(n){this.globalOptions=n}emitter=new qe;icons=yR;set(n,r){return n.id=n.override&&n.override.id?n.override.id:Math.random().toString(36).substring(3),n.click=new ze,n.clickIcon=new ze,n.timeoutEnd=new ze,this.emitter.next({command:"set",notification:n,add:r}),n}success(n="",r="",i,s){return this.set({title:n,content:r||"",type:Mr.Success,icon:this.icons.success,override:i,context:s},!0)}error(n="",r="",i,s){return this.set({title:n,content:r||"",type:Mr.Error,icon:this.icons.error,override:i,context:s},!0)}alert(n="",r="",i,s){return this.set({title:n,content:r||"",type:Mr.Alert,icon:this.icons.alert,override:i,context:s},!0)}info(n="",r="",i,s){return this.set({title:n,content:r||"",type:Mr.Info,icon:this.icons.info,override:i,context:s},!0)}warn(n="",r="",i,s){return this.set({title:n,content:r||"",type:Mr.Warn,icon:this.icons.warn,override:i,context:s},!0)}bare(n="",r="",i,s){return this.set({title:n,content:r||"",type:Mr.Bare,icon:"bare",override:i,context:s},!0)}create(n="",r="",i=Mr.Success,s,o){return this.set({title:n,content:r,type:i,icon:this.icons[i],override:s,context:o},!0)}html(n,r=Mr.Success,i,s="bare",o){return this.set({html:n,type:r,icon:this.icons[s],override:i,context:o},!0)}remove(n){n?this.emitter.next({command:"clean",id:n}):this.emitter.next({command:"cleanAll"})}static \u0275fac=function(r){return new(r||t)(z("options"))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),s4=(()=>{class t{notificationService;domSanitizer;cd;zone;timeOut;showProgressBar;pauseOnHover;clickToClose;clickIconToClose;maxLength;theClass;rtl;animate;position;item;title;content;titleIsTemplate=!1;contentIsTemplate=!1;htmlIsTemplate=!1;progressWidth=0;safeSvg;safeInputHtml;stopTime=!1;timer;framesPerSecond=40;sleepTime;startTime;endTime;pauseStart;icon;constructor(n,r,i,s){this.notificationService=n,this.domSanitizer=r,this.cd=i,this.zone=s}ngOnInit(){this.item.override&&this.attachOverrides(),this.animate&&(this.item.state=this.animate),this.timeOut!==0&&this.startTimeOut(),this.contentType(this.item.title,"title"),this.contentType(this.item.content,"content"),this.contentType(this.item.html,"html"),this.safeSvg=this.domSanitizer.bypassSecurityTrustHtml(this.icon||this.item.icon),this.safeInputHtml=this.domSanitizer.bypassSecurityTrustHtml(this.item.html)}ngOnDestroy(){clearTimeout(this.timer),this.cd.detach()}startTimeOut(){this.sleepTime=1e3/this.framesPerSecond,this.startTime=new Date().getTime(),this.endTime=this.startTime+this.timeOut,this.zone.runOutsideAngular(()=>this.timer=setTimeout(this.instance,this.sleepTime))}onEnter(){this.pauseOnHover&&(this.stopTime=!0,this.pauseStart=new Date().getTime())}onLeave(){this.pauseOnHover&&(this.stopTime=!1,this.startTime+=new Date().getTime()-this.pauseStart,this.endTime+=new Date().getTime()-this.pauseStart,this.zone.runOutsideAngular(()=>setTimeout(this.instance,this.sleepTime)))}onClick(n){this.item.click.emit(n),this.clickToClose&&this.remove()}onClickIcon(n){this.item.clickIcon.emit(n),this.clickIconToClose&&this.remove()}attachOverrides(){Object.keys(this.item.override).forEach(n=>{this.hasOwnProperty(n)&&(this[n]=this.item.override[n])})}instance=()=>{let n=new Date().getTime();this.endTime<n?(this.remove(),this.item.timeoutEnd.emit()):this.stopTime||(this.showProgressBar&&(this.progressWidth=Math.min((n-this.startTime+this.sleepTime)*100/this.timeOut,100)),this.timer=setTimeout(this.instance,this.sleepTime)),this.zone.run(()=>{this.cd.destroyed||this.cd.detectChanges()})};remove(){this.animate?(this.item.state=this.animate+"Out",setTimeout(()=>{this.notificationService.set(this.item,!1)},310)):this.notificationService.set(this.item,!1)}contentType(n,r){n instanceof zn?this[r]=n:this[r]=this.domSanitizer.bypassSecurityTrustHtml(n),this[r+"IsTemplate"]=n instanceof zn}static \u0275fac=function(r){return new(r||t)(Me(pu),Me(jv),Me(bn),Me(ye))};static \u0275cmp=bc({type:t,selectors:[["simple-notification"]],inputs:{timeOut:"timeOut",showProgressBar:"showProgressBar",pauseOnHover:"pauseOnHover",clickToClose:"clickToClose",clickIconToClose:"clickIconToClose",maxLength:"maxLength",theClass:"theClass",rtl:"rtl",animate:"animate",position:"position",item:"item"},decls:4,vars:16,consts:[["regularTitle",""],["regularContent",""],["regularHtml",""],[1,"simple-notification",3,"click","mouseenter","mouseleave","ngClass"],[4,"ngIf"],["class","sn-progress-loader",4,"ngIf"],["class","sn-title",4,"ngIf","ngIfElse"],["class","sn-content",4,"ngIf","ngIfElse"],["class","icon",3,"innerHTML",4,"ngIf"],[1,"sn-title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sn-title",3,"innerHTML"],[1,"sn-content"],[1,"sn-content",3,"innerHTML"],[1,"icon",3,"innerHTML"],["class","sn-html",4,"ngIf","ngIfElse"],["class","icon",3,"icon-hover","innerHTML","click",4,"ngIf"],[1,"sn-html"],[1,"icon",3,"click","innerHTML"],[1,"sn-progress-loader"],[3,"ngStyle"]],template:function(r,i){r&1&&(ln(0,"div",3),kc("click",function(o){return i.onClick(o)})("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()}),br(1,Z$,8,5,"div",4)(2,n4,5,3,"div",4)(3,r4,2,3,"div",5),dn()),r&2&&(cS(i.theClass),Ve("@enterLeave",i.item.state)("ngClass",TS(7,$$,i.item.type==="alert",i.item.type==="error",i.item.type==="warn",i.item.type==="success",i.item.type==="info",i.item.type==="bare",i.rtl,i.item.icon!=="bare")),Gt(),Ve("ngIf",!i.item.html),Gt(),Ve("ngIf",i.item.html),Gt(),Ve("ngIf",i.showProgressBar))},dependencies:[bv,WS,QS,KS],styles:[`.simple-notification{width:100%;padding:10px 20px;box-sizing:border-box;position:relative;float:left;margin-bottom:10px;color:#fff;cursor:pointer;transition:all .5s;min-height:70px}.simple-notification .sn-title,.simple-notification .sn-content,.simple-notification .sn-html{margin:0}.simple-notification .sn-title{line-height:30px;font-size:20px}.simple-notification .sn-content{font-size:16px;line-height:20px}.simple-notification.has-icon .sn-title,.simple-notification.has-icon .sn-content,.simple-notification.has-icon .sn-html{padding:0 50px 0 0}.simple-notification .icon{position:absolute;box-sizing:border-box;top:0;right:0;width:70px;height:70px;padding:10px}.simple-notification .icon.icon-hover:hover{opacity:.5}.simple-notification .icon svg{fill:#fff;width:100%;height:100%}.simple-notification .icon svg g{fill:#fff}.simple-notification.rtl-mode.has-icon .sn-title,.simple-notification.rtl-mode.has-icon .sn-content,.simple-notification.rtl-mode.has-icon .sn-html{padding:0 0 0 50px}.simple-notification.rtl-mode{direction:rtl}.simple-notification.rtl-mode .sn-content{padding:0 0 0 50px}.simple-notification.rtl-mode svg{left:0;right:auto}.simple-notification.error{background:#F44336}.simple-notification.success{background:#8BC34A}.simple-notification.alert{background:#ffdb5b}.simple-notification.info{background:#03A9F4}.simple-notification.warn{background:#ffdb5b}.simple-notification .sn-progress-loader{position:absolute;top:0;left:0;width:100%;height:5px}.simple-notification .sn-progress-loader span{float:left;height:100%}.simple-notification.success .sn-progress-loader span{background:#689F38}.simple-notification.error .sn-progress-loader span{background:#D32F2F}.simple-notification.alert .sn-progress-loader span{background:#edc242}.simple-notification.info .sn-progress-loader span{background:#0288D1}.simple-notification.warn .sn-progress-loader span{background:#edc242}.simple-notification.bare .sn-progress-loader span{background:#ccc}.simple-notification.warn div .sn-title,.simple-notification.warn div .sn-content,.simple-notification.warn div .sn-html{color:#444}
`],encapsulation:2,data:{animation:[gR("enterLeave",[Ft("fade",Te({opacity:1})),Lt("* => fade",[Te({opacity:0}),Ot("400ms ease-in-out")]),Ft("fadeOut",Te({opacity:0})),Lt("fade => fadeOut",[Te({opacity:1}),Ot("300ms ease-in-out")]),Ft("fromTop",Te({opacity:1,transform:"translateY(0)"})),Lt("* => fromTop",[Te({opacity:0,transform:"translateY(-5%)"}),Ot("400ms ease-in-out")]),Ft("fromTopOut",Te({opacity:0,transform:"translateY(5%)"})),Lt("fromTop => fromTopOut",[Te({opacity:1,transform:"translateY(0)"}),Ot("300ms ease-in-out")]),Ft("fromRight",Te({opacity:1,transform:"translateX(0)"})),Lt("* => fromRight",[Te({opacity:0,transform:"translateX(5%)"}),Ot("400ms ease-in-out")]),Ft("fromRightOut",Te({opacity:0,transform:"translateX(-5%)"})),Lt("fromRight => fromRightOut",[Te({opacity:1,transform:"translateX(0)"}),Ot("300ms ease-in-out")]),Ft("fromBottom",Te({opacity:1,transform:"translateY(0)"})),Lt("* => fromBottom",[Te({opacity:0,transform:"translateY(5%)"}),Ot("400ms ease-in-out")]),Ft("fromBottomOut",Te({opacity:0,transform:"translateY(-5%)"})),Lt("fromBottom => fromBottomOut",[Te({opacity:1,transform:"translateY(0)"}),Ot("300ms ease-in-out")]),Ft("fromLeft",Te({opacity:1,transform:"translateX(0)"})),Lt("* => fromLeft",[Te({opacity:0,transform:"translateX(-5%)"}),Ot("400ms ease-in-out")]),Ft("fromLeftOut",Te({opacity:0,transform:"translateX(5%)"})),Lt("fromLeft => fromLeftOut",[Te({opacity:1,transform:"translateX(0)"}),Ot("300ms ease-in-out")]),Ft("scale",Te({opacity:1,transform:"scale(1)"})),Lt("* => scale",[Te({opacity:0,transform:"scale(0)"}),Ot("400ms ease-in-out")]),Ft("scaleOut",Te({opacity:0,transform:"scale(0)"})),Lt("scale => scaleOut",[Te({opacity:1,transform:"scale(1)"}),Ot("400ms ease-in-out")]),Ft("rotate",Te({opacity:1,transform:"rotate(0deg)"})),Lt("* => rotate",[Te({opacity:0,transform:"rotate(5deg)"}),Ot("400ms ease-in-out")]),Ft("rotateOut",Te({opacity:0,transform:"rotate(-5deg)"})),Lt("rotate => rotateOut",[Te({opacity:1,transform:"rotate(0deg)"}),Ot("400ms ease-in-out")])])]},changeDetection:0})}return t})(),S_=function(t){return t.Fade="fade",t.FromTop="fromTop",t.FromRight="fromRight",t.FromBottom="fromBottom",t.FromLeft="fromLeft",t.Scale="scale",t.Rotate="rotate",t}(S_||{}),_Z=(()=>{class t{service;cd;constructor(n,r){this.service=n,this.cd=r}set options(n){this.usingComponentOptions=!0,this.attachChanges(n)}create=new ze;destroy=new ze;notifications=[];position=["bottom","right"];lastNotificationCreated;listener;lastOnBottom=!0;maxStack=8;preventLastDuplicates=!1;preventDuplicates=!1;timeOut=0;maxLength=0;clickToClose=!0;clickIconToClose=!1;showProgressBar=!0;pauseOnHover=!0;theClass="";rtl=!1;animate=S_.FromRight;usingComponentOptions=!1;ngOnInit(){this.usingComponentOptions||this.attachChanges(this.service.globalOptions),this.listener=this.service.emitter.subscribe(n=>{switch(n.command){case"cleanAll":this.notifications=[];break;case"clean":this.cleanSingle(n.id);break;case"set":n.add?this.add(n.notification):this.defaultBehavior(n);break;default:this.defaultBehavior(n);break}this.cd.destroyed||this.cd.detectChanges()})}ngOnDestroy(){this.listener&&this.listener.unsubscribe(),this.cd.detach()}defaultBehavior(n){this.notifications.splice(this.notifications.indexOf(n.notification),1),this.destroy.emit(this.buildEmit(n.notification,!1))}add(n){n.createdOn=new Date;let r=this.preventLastDuplicates||this.preventDuplicates?this.block(n):!1;this.lastNotificationCreated=n,n.override&&n.override.icons&&n.override.icons[n.type]&&(n.icon=n.override.icons[n.type]),r||(this.lastOnBottom?(this.notifications.length>=this.maxStack&&this.notifications.splice(0,1),this.notifications.push(n)):(this.notifications.length>=this.maxStack&&this.notifications.splice(this.notifications.length-1,1),this.notifications.splice(0,0,n)),this.create.emit(this.buildEmit(n,!0)))}block(n){let r=n.html?this.checkHtml:this.checkStandard;if(this.preventDuplicates&&this.notifications.length>0){for(let i of this.notifications)if(r(i,n))return!0}if(this.preventLastDuplicates){let i;if(this.preventLastDuplicates==="visible"&&this.notifications.length>0)this.lastOnBottom?i=this.notifications[this.notifications.length-1]:i=this.notifications[0];else if(this.preventLastDuplicates==="all"&&this.lastNotificationCreated)i=this.lastNotificationCreated;else return!1;return r(i,n)}return!1}checkStandard(n,r){return n.type===r.type&&n.title===r.title&&n.content===r.content}checkHtml(n,r){return n.html?n.type===r.type&&n.title===r.title&&n.content===r.content&&n.html===r.html:!1}attachChanges(n){for(let r in n)this.hasOwnProperty(r)?this[r]=n[r]:r==="icons"&&(this.service.icons=n[r])}buildEmit(n,r){let i={createdOn:n.createdOn,type:n.type,icon:n.icon,id:n.id};return n.html?i.html=n.html:(i.title=n.title,i.content=n.content),r||(i.destroyedOn=new Date),i}cleanSingle(n){let r=0,i=!1,s;this.notifications.forEach((o,a)=>{o.id===n&&(r=a,s=o,i=!0)}),i&&(this.notifications.splice(r,1),this.destroy.emit(this.buildEmit(s,!1)))}static \u0275fac=function(r){return new(r||t)(Me(pu),Me(bn))};static \u0275cmp=bc({type:t,selectors:[["simple-notifications"]],inputs:{options:"options"},outputs:{create:"create",destroy:"destroy"},decls:2,vars:2,consts:[[1,"simple-notification-wrapper",3,"ngClass"],[3,"item","timeOut","clickToClose","clickIconToClose","maxLength","showProgressBar","pauseOnHover","theClass","rtl","animate","position",4,"ngFor","ngForOf"],[3,"item","timeOut","clickToClose","clickIconToClose","maxLength","showProgressBar","pauseOnHover","theClass","rtl","animate","position"]],template:function(r,i){r&1&&(ln(0,"div",0),br(1,i4,1,11,"simple-notification",1),dn()),r&2&&(Ve("ngClass",i.position),Gt(),Ve("ngForOf",i.notifications))},dependencies:[bv,GS,s4],styles:[`.simple-notification-wrapper{position:fixed;width:300px;z-index:1000}.simple-notification-wrapper.left{left:20px}.simple-notification-wrapper.top{top:20px}.simple-notification-wrapper.right{right:20px}.simple-notification-wrapper.bottom{bottom:20px}.simple-notification-wrapper.center{left:50%;transform:translate(-50%)}.simple-notification-wrapper.middle{top:50%;transform:translateY(-50%)}.simple-notification-wrapper.middle.center{transform:translate(-50%,-50%)}@media (max-width: 340px){.simple-notification-wrapper{width:auto;left:20px;right:20px}}
`],encapsulation:2,changeDetection:0})}return t})(),o4={position:["bottom","right"],timeOut:0,showProgressBar:!0,pauseOnHover:!0,lastOnBottom:!0,clickToClose:!0,clickIconToClose:!1,maxLength:0,maxStack:8,preventDuplicates:!1,preventLastDuplicates:!1,theClass:"",rtl:!1,animate:S_.FromRight,icons:yR},mR=new K("options");function a4(t){return q(q({},o4),t)}var wZ=(()=>{class t{static forRoot(n={}){return{ngModule:t,providers:[pu,{provide:mR,useValue:n},{provide:"options",useFactory:a4,deps:[mR]}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=In({type:t});static \u0275inj=En({imports:[Cv]})}return t})();var vR=class t{constructor(e){this.notificationsService=e}showNotificationError(e,n){this.notificationsService.error('<div fxLayout="column" style="width: 500px"><h5 style="color: white !important; font-size: 1em !important">'+(Ho(e)?e:"")+"</h5>",'<span fxLayout="row" fxLayoutAlign="start center" class="notification" style="color: white !important;font-size: 0.750em !important;">'+n+"</span> </div>")}showNotificationWarn(e,n){this.notificationsService.warn('<div fxLayout="column" style="width: 500px"><h5 style="color: white !important; font-size: 1em !important">'+(Ho(e)?e:"")+"</h5>",'<span fxLayout="row" fxLayoutAlign="start center" class="notification" style="color: white !important; font-size: 0.750em !important;">'+n+"</span> </div>")}showNotificationSuccess(e,n){this.notificationsService.success('<div fxLayout="column"  style="width: 500px"><h5 style="color: white !important; font-size: 1em !important">'+(Ho(e)?e:"")+"</h5>",'<span fxLayout="row" fxLayoutAlign="start center" class="notification" style="font-size: 0.750em !important;">'+n+"</span> </div>")}showNotificationAlert(e,n){this.notificationsService.alert('<div fxLayout="column"  style="width: 500px"><h5 style="color: white !important; font-size: 1em !important">'+(Ho(e)?e:"")+"</h5>",'<span fxLayout="row" fxLayoutAlign="start center" class="notification" style="font-size: 0.750em !important;">'+n+"</span> </div>")}static \u0275fac=function(n){return new(n||t)(z(pu))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var u4="firebase",l4="10.13.1";kn.registerVersion(u4,l4,"app-compat");var d4=["ngOnDestroy"],NZ=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(d4.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,f),f})})})});var A_=class{constructor(e){return e}},wR=new K("angularfire2.app.options"),ER=new K("angularfire2.app.name");function IR(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=kn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>kn.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;h4("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new A_(o)}var h4=(t,...e)=>{lv()&&typeof console<"u"&&console[t](...e)};function DR(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return f4(i,o)||(_R("error",`${e} was already initialized on the ${n} Firebase App with different settings.${p4?" You may need to reload as Firebase is not HMR aware.":""}`),_R("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function f4(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var p4=typeof module<"u"&&!!module.hot,_R=(t,...e)=>{lv()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var g4=new Map,m4={activated:!1,tokenObservers:[]},y4={initialized:!1,enabled:!1};function An(t){return g4.get(t)||Object.assign({},m4)}function AR(){return y4}var v4="https://content-firebaseappcheck.googleapis.com/v1";var _4="exchangeDebugToken",TR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$Z=24*60*60*1e3;var x_=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new hg,this.pending.promise.catch(n=>{}),yield w4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new hg,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function w4(t){return new Promise(e=>{setTimeout(e,t)})}var E4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},mi=new WD("appCheck","AppCheck",E4);function RR(t){if(!An(t).activated)throw mi.create("use-before-activation",{appName:t.name})}function xR(r,i){return x(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(t,a)}catch(m){throw mi.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw mi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw mi.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function MR(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${v4}/projects/${n}/apps/${r}:${_4}?key=${i}`,body:{debug_token:e}}}var I4="firebase-app-check-database",D4=1,M_="firebase-app-check-store";var hf=null;function T4(){return hf||(hf=new Promise((t,e)=>{try{let n=indexedDB.open(I4,D4);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(M_,{keyPath:"compositeKey"})}}}catch(n){e(mi.create("storage-open",{originalErrorMessage:n?.message}))}}),hf)}function b4(t,e){return C4(S4(t),e)}function C4(t,e){return x(this,null,function*(){let r=(yield T4()).transaction(M_,"readwrite"),s=r.objectStore(M_).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(mi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function S4(t){return`${t.options.appId}-${t.name}`}var N_=new Nl("@firebase/app-check");function R_(t,e){return xl()?b4(t,e).catch(n=>{N_.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function NR(){return AR().enabled}function PR(){return x(this,null,function*(){let t=AR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var A4={error:"UNKNOWN_ERROR"};function R4(t){return GD.encodeString(JSON.stringify(t),!1)}function P_(t,e=!1){return x(this,null,function*(){let n=t.app;RR(n);let r=An(n),i=r.token,s;if(i&&!gu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(gu(c)?i=c:yield R_(n,void 0))}if(!e&&i&&gu(i))return{token:i.token};let o=!1;if(NR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xR(MR(n,yield PR()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield R_(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield An(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?N_.warn(c.message):N_.error(c),s=c}let a;return i?s?gu(i)?a={token:i.token,internalError:s}:a=CR(s):(a={token:i.token},r.token=i,yield R_(n,i)):a=CR(s),o&&P4(n,a),a})}function x4(t){return x(this,null,function*(){let e=t.app;RR(e);let{provider:n}=An(e);if(NR()){let r=yield PR(),{token:i}=yield xR(MR(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function M4(t,e,n,r){let{app:i}=t,s=An(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&gu(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),bR(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>bR(t))}function kR(t,e){let n=An(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function bR(t){let{app:e}=t,n=An(e),r=n.tokenRefresher;r||(r=N4(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function N4(t){let{app:e}=t;return new x_(()=>x(this,null,function*(){let n=An(e),r;if(n.token?r=yield P_(t,!0):r=yield P_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=An(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TR.RETRIAL_MIN_WAIT,TR.RETRIAL_MAX_WAIT)}function P4(t,e){let n=An(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function gu(t){return t.expireTimeMillis-Date.now()>0}function CR(t){return{token:R4(A4),error:t}}var k_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=An(this.app);for(let n of e)kR(this.app,n.next);return Promise.resolve()}};function k4(t,e){return new k_(t,e)}function O4(t){return{getToken:e=>P_(t,e),getLimitedUseToken:()=>x4(t),addTokenListener:e=>M4(t,"INTERNAL",e),removeTokenListener:e=>kR(t.app,e)}}var F4="@firebase/app-check",L4="0.8.7";var V4="app-check",SR="app-check-internal";function j4(){zi(new cr(V4,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return k4(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(SR).initialize()})),zi(new cr(SR,t=>{let e=t.getProvider("app-check").getImmediate();return O4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Bt(F4,L4)}j4();var U4=["localhost","0.0.0.0","127.0.0.1"],eX=typeof window<"u"&&U4.includes(window.location.hostname);var zR="firebasestorage.googleapis.com",HR="storageBucket",$4=2*60*1e3,z4=10*60*1e3,H4=1e3;var je=class t extends Ml{constructor(e,n,r=0){super(O_(e),`Firebase Storage: ${n} (${O_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return O_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Oe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Oe||{});function O_(t){return"storage/"+t}function z_(){let t="An unknown error occurred, please check the error payload for server response.";return new je(Oe.UNKNOWN,t)}function q4(t){return new je(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function G4(t){return new je(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function W4(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(Oe.UNAUTHENTICATED,t)}function K4(){return new je(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q4(t){return new je(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function qR(){return new je(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GR(){return new je(Oe.CANCELED,"User canceled the upload/download.")}function Y4(t){return new je(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function Z4(t){return new je(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function X4(){return new je(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HR+"' property when initializing the app?")}function WR(){return new je(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J4(){return new je(Oe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function ez(){return new je(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tz(t){return new je(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gs(t){return new je(Oe.INVALID_ARGUMENT,t)}function KR(){return new je(Oe.APP_DELETED,"The Firebase app was deleted.")}function H_(t){return new je(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yu(t,e){return new je(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mu(t){throw new je(Oe.INTERNAL_ERROR,"Internal error: "+t)}var Vt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw Z4(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(j){j.path_=decodeURIComponent(j.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),_={bucket:1,path:3},S=n===zR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",P=new RegExp(`^https?://${S}/${i}/${D}`,"i"),V=[{regex:a,indices:c,postModify:s},{regex:m,indices:_,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let j=0;j<V.length;j++){let ee=V[j],H=ee.regex.exec(e);if(H){let I=H[ee.indices.bucket],v=H[ee.indices.path];v||(v=""),r=new t(I,v),ee.postModify(r);break}}if(r==null)throw Y4(e);return r}},L_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function nz(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...D){l||(l=!0,e.apply(null,D))}function f(D){i=setTimeout(()=>{i=null,t(m,c())},D)}function g(){s&&clearTimeout(s)}function m(D,...P){if(l){g();return}if(D){g(),d.call(null,D,...P);return}if(c()||o){g(),d.call(null,D,...P);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,f(V)}let _=!1;function S(D){_||(_=!0,g(),!l&&(i!==null?(D||(a=2),clearTimeout(i),f(0)):D||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function rz(t){t(!1)}function iz(t){return t!==void 0}function sz(t){return typeof t=="function"}function oz(t){return typeof t=="object"&&!Array.isArray(t)}function gf(t){return typeof t=="string"||t instanceof String}function OR(t){return q_()&&t instanceof Blob}function q_(){return typeof Blob<"u"}function V_(t,e,n,r){if(r<e)throw gs(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw gs(`Invalid value for '${t}'. Expected ${n} or less.`)}function yi(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function QR(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Wo=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Wo||{});function YR(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var j_=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Go(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Wo.NO_ERROR,c=s.getStatus();if(!a||YR(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===Wo.ABORT;r(!1,new Go(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Go(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());iz(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=z_();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?KR():GR();o(c)}else{let c=qR();o(c)}};this.canceled_?n(!1,new Go(!1,null,!0)):this.backoffId_=nz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Go=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function az(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dz(t,e,n,r,i,s,o=!0){let a=QR(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return uz(l,e),az(l,n),cz(l,s),lz(l,r),new j_(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function hz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fz(...t){let e=hz();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(q_())return new Blob(t);throw new je(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function gz(t){if(typeof atob>"u")throw tz("base-64");return atob(t)}var nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},vu=class{constructor(e,n){this.data=e,this.contentType=n||null}};function G_(t,e){switch(t){case nn.RAW:return new vu(ZR(e));case nn.BASE64:case nn.BASE64URL:return new vu(XR(t,e));case nn.DATA_URL:return new vu(yz(e),vz(e))}throw z_()}function ZR(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mz(t){let e;try{e=decodeURIComponent(t)}catch{throw yu(nn.DATA_URL,"Malformed data URL.")}return ZR(e)}function XR(t,e){switch(t){case nn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw yu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case nn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw yu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gz(e)}catch(i){throw i.message.includes("polyfill")?i:yu(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var pf=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw yu(nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=_z(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function yz(t){let e=new pf(t);return e.base64?XR(nn.BASE64,e.rest):mz(e.rest)}function vz(t){return new pf(t).contentType}function _z(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ms=class t{constructor(e,n){let r=0,i="";OR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(OR(this.data_)){let r=this.data_,i=pz(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(q_()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(fz.apply(null,n))}else{let n=e.map(o=>gf(o)?G_(nn.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function W_(t){let e;try{e=JSON.parse(t)}catch{return null}return oz(e)?e:null}function wz(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Ez(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function JR(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function Iz(t,e){return e}var pt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Iz}},ff=null;function Dz(t){return!gf(t)||t.length<2?t:JR(t)}function Eu(){if(ff)return ff;let t=[];t.push(new pt("bucket")),t.push(new pt("generation")),t.push(new pt("metageneration")),t.push(new pt("name","fullPath",!0));function e(s,o){return Dz(o)}let n=new pt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new pt("size");return i.xform=r,t.push(i),t.push(new pt("timeCreated")),t.push(new pt("updated")),t.push(new pt("md5Hash",null,!0)),t.push(new pt("cacheControl",null,!0)),t.push(new pt("contentDisposition",null,!0)),t.push(new pt("contentEncoding",null,!0)),t.push(new pt("contentLanguage",null,!0)),t.push(new pt("contentType",null,!0)),t.push(new pt("metadata","customMetadata",!0)),ff=t,ff}function Tz(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new Vt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function bz(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return Tz(r,t),r}function ex(t,e,n){let r=W_(e);return r===null?null:bz(t,r,n)}function Cz(t,e,n,r){let i=W_(e);if(i===null||!gf(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let d=t.bucket,f=t.fullPath,g="/b/"+o(d)+"/o/"+o(f),m=yi(g,n,r),_=QR({alt:"media",token:l});return m+_})[0]}function K_(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var FR="prefixes",LR="items";function Sz(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[FR])for(let i of n[FR]){let s=i.replace(/\/$/,""),o=t._makeStorageReference(new Vt(e,s));r.prefixes.push(o)}if(n[LR])for(let i of n[LR]){let s=t._makeStorageReference(new Vt(e,i.name));r.items.push(s)}return r}function Az(t,e,n){let r=W_(n);return r===null?null:Sz(t,e,r)}var xn=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Qn(t){if(!t)throw z_()}function mf(t,e){function n(r,i){let s=ex(t,i,e);return Qn(s!==null),s}return n}function Rz(t,e){function n(r,i){let s=Az(t,e,i);return Qn(s!==null),s}return n}function xz(t,e){function n(r,i){let s=ex(t,i,e);return Qn(s!==null),Cz(s,i,t.host,t._protocol)}return n}function Yo(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=K4():i=W4():n.getStatus()===402?i=G4(t.bucket):n.getStatus()===403?i=Q4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function yf(t){let e=Yo(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=q4(t.path)),s.serverResponse=i.serverResponse,s}return n}function tx(t,e,n){let r=e.fullServerUrl(),i=yi(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new xn(i,s,mf(t,n),o);return a.errorHandler=yf(e),a}function Mz(t,e,n,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),a=yi(o,t.host,t._protocol),c="GET",l=t.maxOperationRetryTime,d=new xn(a,c,Rz(t,e.bucket),l);return d.urlParams=s,d.errorHandler=Yo(e),d}function Nz(t,e,n){let r=e.fullServerUrl(),i=yi(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new xn(i,s,xz(t,n),o);return a.errorHandler=yf(e),a}function Pz(t,e,n,r){let i=e.fullServerUrl(),s=yi(i,t.host,t._protocol),o="PATCH",a=K_(n,r),c={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,d=new xn(s,o,mf(t,r),l);return d.headers=c,d.body=a,d.errorHandler=yf(e),d}function kz(t,e){let n=e.fullServerUrl(),r=yi(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(c,l){}let a=new xn(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=yf(e),a}function Oz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function nx(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Oz(null,e)),r}function rx(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let j=0;j<2;j++)V=V+Math.random().toString().slice(2);return V}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let l=nx(e,r,i),d=K_(l,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+c+"--",m=ms.getBlob(f,r,g);if(m===null)throw WR();let _={name:l.fullPath},S=yi(s,t.host,t._protocol),D="POST",P=t.maxUploadRetryTime,L=new xn(S,D,mf(t,n),P);return L.urlParams=_,L.headers=o,L.body=m.uploadData(),L.errorHandler=Yo(e),L}var Ko=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function Q_(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Qn(!1)}return Qn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Fz(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o=nx(e,r,i),a={name:o.fullPath},c=yi(s,t.host,t._protocol),l="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=K_(o,n),g=t.maxUploadRetryTime;function m(S){Q_(S);let D;try{D=S.getResponseHeader("X-Goog-Upload-URL")}catch{Qn(!1)}return Qn(gf(D)),D}let _=new xn(c,l,m,g);return _.urlParams=a,_.headers=d,_.body=f,_.errorHandler=Yo(e),_}function Lz(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function s(l){let d=Q_(l,["active","final"]),f=null;try{f=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Qn(!1)}f||Qn(!1);let g=Number(f);return Qn(!isNaN(g)),new Ko(g,r.size(),d==="final")}let o="POST",a=t.maxUploadRetryTime,c=new xn(n,o,s,a);return c.headers=i,c.errorHandler=Yo(e),c}var VR=256*1024;function Vz(t,e,n,r,i,s,o,a){let c=new Ko(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw J4();let l=c.total-c.current,d=l;i>0&&(d=Math.min(d,i));let f=c.current,g=f+d,m="";d===0?m="finalize":l===d?m="upload, finalize":m="upload";let _={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},S=r.slice(f,g);if(S===null)throw WR();function D(j,ee){let H=Q_(j,["active","final"]),I=c.current+d,v=r.size(),w;return H==="final"?w=mf(e,s)(j,ee):w=null,new Ko(I,v,H==="final",w)}let P="POST",L=e.maxUploadRetryTime,V=new xn(n,P,D,L);return V.headers=_,V.body=S.uploadData(),V.progressCallback=a||null,V.errorHandler=Yo(t),V}var ix={STATE_CHANGED:"state_changed"},bt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function F_(t){switch(t){case"running":case"pausing":case"canceling":return bt.RUNNING;case"paused":return bt.PAUSED;case"success":return bt.SUCCESS;case"canceled":return bt.CANCELED;case"error":return bt.ERROR;default:return bt.ERROR}}var U_=class{constructor(e,n,r){if(sz(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function qo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var jR=null,B_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw mu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},$_=class extends B_{initXhr(){this.xhr_.responseType="text"}};function Rn(){return jR?jR():new $_}var _u=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Eu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Oe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(YR(i.status,[]))if(s)i=qR();else{this.sleepTime=Math.max(this.sleepTime*2,H4),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Oe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=Fz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=Lz(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Rn,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=VR*this._chunkMultiplier,n=new Ko(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Vz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(o,Rn,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){VR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=tx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Rn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=rx(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=GR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=F_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let s=new U_(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(F_(this._state)){case bt.SUCCESS:qo(this._resolve.bind(null,this.snapshot))();break;case bt.CANCELED:case bt.ERROR:let n=this._reject;qo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(F_(this._state)){case bt.RUNNING:case bt.PAUSED:e.next&&qo(e.next.bind(e,this.snapshot))();break;case bt.SUCCESS:e.complete&&qo(e.complete.bind(e))();break;case bt.CANCELED:case bt.ERROR:e.error&&qo(e.error.bind(e,this._error))();break;default:e.error&&qo(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Qo=class t{constructor(e,n){this._service=e,n instanceof Vt?this._location=n:this._location=Vt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Vt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JR(this._location.path)}get storage(){return this._service}get parent(){let e=wz(this._location.path);if(e===null)return null;let n=new Vt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw H_(e)}};function jz(t,e,n){t._throwIfRoot("uploadBytes");let r=rx(t.storage,t._location,Eu(),new ms(e,!0),n);return t.storage.makeRequestWithTokens(r,Rn).then(i=>({metadata:i,ref:t}))}function Uz(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _u(t,new ms(e),n)}function Bz(t){let e={prefixes:[],items:[]};return sx(t,e).then(()=>e)}function sx(t,e,n){return x(this,null,function*(){let i=yield ox(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield sx(t,e,i.nextPageToken))})}function ox(t,e){e!=null&&typeof e.maxResults=="number"&&V_("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=Mz(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Rn)}function $z(t){t._throwIfRoot("getMetadata");let e=tx(t.storage,t._location,Eu());return t.storage.makeRequestWithTokens(e,Rn)}function zz(t,e){t._throwIfRoot("updateMetadata");let n=Pz(t.storage,t._location,e,Eu());return t.storage.makeRequestWithTokens(n,Rn)}function Hz(t){t._throwIfRoot("getDownloadURL");let e=Nz(t.storage,t._location,Eu());return t.storage.makeRequestWithTokens(e,Rn).then(n=>{if(n===null)throw ez();return n})}function qz(t){t._throwIfRoot("deleteObject");let e=kz(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Rn)}function ax(t,e){let n=Ez(t._location.path,e),r=new Vt(t._location.bucket,n);return new Qo(t.storage,r)}function Gz(t){return/^[A-Za-z]+:\/\//.test(t)}function Wz(t,e){return new Qo(t,e)}function cx(t,e){if(t instanceof wu){let n=t;if(n._bucket==null)throw X4();let r=new Qo(n,n._bucket);return e!=null?cx(r,e):r}else return e!==void 0?ax(t,e):t}function Kz(t,e){if(e&&Gz(e)){if(t instanceof wu)return Wz(t,e);throw gs("To use ref(service, url), the first argument must be a Storage instance.")}else return cx(t,e)}function UR(t,e){let n=e?.[HR];return n==null?null:Vt.makeFromBucketSpec(n,t)}function Qz(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Rl(i,t.app.options.projectId))}var wu=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=zR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$4,this._maxUploadRetryTime=z4,this._requests=new Set,i!=null?this._bucket=Vt.makeFromBucketSpec(i,this._host):this._bucket=UR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vt.makeFromBucketSpec(this._url,e):this._bucket=UR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){V_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){V_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return x(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return x(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new L_(KR());{let o=dz(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return x(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},BR="@firebase/storage",$R="0.13.1";var ux="storage";function oX(t,e,n){return t=we(t),jz(t,e,n)}function lx(t,e,n){return t=we(t),Uz(t,e,n)}function dx(t){return t=we(t),$z(t)}function hx(t,e){return t=we(t),zz(t,e)}function fx(t,e){return t=we(t),ox(t,e)}function px(t){return t=we(t),Bz(t)}function gx(t){return t=we(t),Hz(t)}function mx(t){return t=we(t),qz(t)}function Y_(t,e){return t=we(t),Kz(t,e)}function yx(t,e){return ax(t,e)}function aX(t=zs(),e){t=we(t);let r=rc(t,ux).getImmediate({identifier:e}),i=Al("storage");return i&&Z_(r,...i),r}function Z_(t,e,n,r={}){Qz(t,e,n,r)}function Yz(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new wu(n,r,i,e,Pl)}function Zz(){zi(new cr(ux,Yz,"PUBLIC").setMultipleInstances(!0)),Bt(BR,$R,""),Bt(BR,$R,"esm2017")}Zz();var Zo=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var vf=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zo(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Zo(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Zo(o,this,this._ref)):s={next:n.next?o=>n.next(new Zo(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}},_f=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ys(e,this._service))}get items(){return this._delegate.items.map(e=>new ys(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var ys=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=yx(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new vf(lx(this._delegate,e,n),this)}putString(e,n=nn.RAW,r){this._throwIfRoot("putString");let i=G_(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new vf(new _u(this._delegate,new ms(i.data,!0),s),this)}listAll(){return px(this._delegate).then(e=>new _f(e,this.storage))}list(e){return fx(this._delegate,e||void 0).then(n=>new _f(n,this.storage))}getMetadata(){return dx(this._delegate)}updateMetadata(e){return hx(this._delegate,e)}getDownloadURL(){return gx(this._delegate)}delete(){return this._throwIfRoot("delete"),mx(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw H_(e)}};var wf=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(vx(e))throw gs("ref() expected a child path but got a URL, use refFromURL instead.");return new ys(Y_(this._delegate,e),this)}refFromURL(e){if(!vx(e))throw gs("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vt.makeFromUrl(e,this._delegate.host)}catch{throw gs("refFromUrl() expected a valid full URL but got an invalid one.")}return new ys(Y_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){Z_(this._delegate,e,n,r)}};function vx(t){return/^[A-Za-z]+:\/\//.test(t)}var Xz="@firebase/storage-compat",Jz="0.3.11";var eH="storage-compat";function tH(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new wf(n,r)}function nH(t){let e={TaskState:bt,TaskEvent:ix,StringFormat:nn,Storage:wf,Reference:ys};t.INTERNAL.registerComponent(new cr(eH,tH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Xz,Jz)}nH(kn);function rH(t){return new ae(e=>{let n=o=>e.next(o),r=o=>e.error(o),i=()=>e.complete();n(t.snapshot);let s=t.on("state_changed",n);return t.then(o=>{n(o),i()},o=>{n(t.snapshot),r(o)}),function(){s()}}).pipe(Og(0))}function _x(t){let e=rH(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ce(n=>n.bytesTransferred/n.totalBytes*100))}}function Ef(t){return{getDownloadURL:()=>J(void 0).pipe(T_,Ge(()=>t.getDownloadURL()),uf),getMetadata:()=>J(void 0).pipe(T_,Ge(()=>t.getMetadata()),uf),delete:()=>Ee(t.delete()),child:e=>Ef(t.child(e)),updateMetadata:e=>Ee(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return _x(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return _x(i)},list:e=>Ee(t.list(e)),listAll:()=>Ee(t.listAll())}}var iH=new K("angularfire2.storageBucket"),sH=new K("angularfire2.storage.maxUploadRetryTime"),oH=new K("angularfire2.storage.maxOperationRetryTime"),aH=new K("angularfire2.storage.use-emulator"),cH=(()=>{class t{storage;constructor(n,r,i,s,o,a,c,l,d,f){let g=IR(n,o,r);this.storage=DR(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{let m=o.runOutsideAngular(()=>g.storage(i||void 0)),_=d;return _&&m.useEmulator(..._),c&&m.setMaxUploadRetryTime(c),l&&m.setMaxOperationRetryTime(l),m},[c,l])}ref(n){return Ef(this.storage.ref(n))}refFromURL(n){return Ef(this.storage.refFromURL(n))}upload(n,r,i){let s=this.storage.ref(n);return Ef(s).put(r,i)}static \u0275fac=function(r){return new(r||t)(z(wR),z(ER,8),z(iH,8),z(Jt),z(ye),z(cf),z(sH,8),z(oH,8),z(aH,8),z(ps,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var uH=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=In({type:t});static \u0275inj=En({})}return t})(),SX=(()=>{class t{constructor(){kn.registerVersion("angularfire",af.full,"gcs-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=In({type:t});static \u0275inj=En({providers:[cH],imports:[uH]})}return t})();var wx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ex={};var vi,X_;(function(){var t;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(T,b,A){for(var E=Array(arguments.length-2),sr=2;sr<arguments.length;sr++)E[sr-2]=arguments[sr];return v.prototype[b].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)T[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],b=I.g[2];var A=I.g[3],E=v+(A^w&(b^A))+T[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(w^b))+T[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(w^b^A)+T[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(b^(w|~A))+T[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=w;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(T[b++]=I.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=I[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var T=0;32>T;T+=8)I[w++]=this.g[v]>>>T&255;return I};function s(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function o(I,v){this.h=v;for(var w=[],T=!0,b=I.length-1;0<=b;b--){var A=I[b]|0;T&&A==v||(w[b]=A,T=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return D(l(-I));for(var v=[],w=1,T=0;I>=w;T++)v[T]=I/w|0,w*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return D(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),T=f,b=0;b<I.length;b+=8){var A=Math.min(8,I.length-b),E=parseInt(I.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(w),T=T.add(l(E)))}return T}var f=c(0),g=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(S(this))return-D(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var T=this.i(w);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(S(this))return"-"+D(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,T="";;){var b=j(w,v).g;w=P(w,b.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=b,_(w))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=P(this,I),S(I)?-1:_(I)?0:1};function D(I){for(var v=I.g.length,w=[],T=0;T<v;T++)w[T]=~I.g[T];return new o(w,~I.h).add(g)}t.abs=function(){return S(this)?D(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(I.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,w[b]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(D(v))}t.j=function(I){if(_(this)||_(I))return f;if(S(this))return S(I)?D(this).j(D(I)):D(D(this).j(I));if(S(I))return D(this.j(D(I)));if(0>this.l(m)&&0>I.l(m))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],T=0;T<2*v;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<I.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,sr=I.i(b)>>>16,La=I.i(b)&65535;w[2*T+2*b]+=E*La,L(w,2*T+2*b),w[2*T+2*b+1]+=A*La,L(w,2*T+2*b+1),w[2*T+2*b+1]+=E*sr,L(w,2*T+2*b+1),w[2*T+2*b+2]+=A*sr,L(w,2*T+2*b+2)}for(T=0;T<v;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=v;T<2*v;T++)w[T]=0;return new o(w,0)};function L(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function j(I,v){if(_(v))throw Error("division by zero");if(_(I))return new V(f,f);if(S(I))return v=j(D(I),v),new V(D(v.g),D(v.h));if(S(v))return v=j(I,D(v)),new V(D(v.g),v.h);if(30<I.g.length){if(S(I)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=v;0>=T.l(I);)w=ee(w),T=ee(T);var b=H(w,1),A=H(T,1);for(T=H(T,2),w=H(w,2);!_(T);){var E=A.add(T);0>=E.l(I)&&(b=b.add(w),A=E),T=H(T,1),w=H(w,1)}return v=P(I,b.j(v)),new V(b,v)}for(b=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(w),E=A.j(v);S(E)||0<E.l(I);)w-=T,A=l(w),E=A.j(v);_(A)&&(A=g),b=b.add(A),I=P(I,E)}return new V(b,I)}t.A=function(I){return j(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)&I.i(T);return new o(w,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)|I.i(T);return new o(w,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)^I.i(T);return new o(w,this.h^I.h)};function ee(I){for(var v=I.g.length+1,w=[],T=0;T<v;T++)w[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(w,I.h)}function H(I,v){var w=v>>5;v%=32;for(var T=I.g.length-w,b=[],A=0;A<T;A++)b[A]=0<v?I.i(A+w)>>>v|I.i(A+w+1)<<32-v:I.i(A+w);return new o(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,X_=Ex.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,vi=Ex.Integer=o}).apply(typeof wx<"u"?wx:typeof self<"u"?self:typeof window<"u"?window:{});var If=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nr={};var J_,ew,Xo,tw,Iu,Df,nw,rw,iw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof If=="object"&&If];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var C=u[y];if(!(C in p))break e;p=p[C]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,y=!1,C={next:function(){if(!y&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),u.apply(h,C)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function _(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,C,N){for(var U=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)U[Ce-2]=arguments[Ce];return h.prototype[C].apply(y,U)}}function S(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function D(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let C=u.length||0,N=y.length||0;u.length=C+N;for(let U=0;U<N;U++)u[C+U]=y[U]}else u.push(y)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(u){return/^[\s\xa0]*$/.test(u)}function V(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var ee=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function H(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function I(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(p in y)u[p]=y[p];for(let N=0;N<w.length;N++)p=w[N],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Up;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class sr{constructor(){this.h=this.g=null}add(h,p){let y=La.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var La=new P(()=>new lP,u=>u.reset());class lP{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,ja=!1,Up=new sr,$I=()=>{let u=a.Promise.resolve(void 0);Va=()=>{u.then(dP)}};var dP=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=La;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ja=!1};function Br(){this.s=this.s,this.C=this.C}Br.prototype.s=!1,Br.prototype.ma=function(){this.s||(this.s=!0,this.N())},Br.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var hP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Ua(u,h){if(yt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ee){e:{try{j(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fP[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ua.aa.h.call(this)}}_(Ua,yt);var fP={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),pP=0;function gP(u,h,p,y,C){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=C,this.key=++pP,this.da=this.fa=!1}function ll(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dl(u){this.src=u,this.g={},this.h=0}dl.prototype.add=function(u,h,p,y,C){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var U=$p(u,h,y,C);return-1<U?(h=u[U],p||(h.fa=!1)):(h=new gP(h,this.src,N,!!y,C),h.fa=p,u.push(h)),h};function Bp(u,h){var p=h.type;if(p in u.g){var y=u.g[p],C=Array.prototype.indexOf.call(y,h,void 0),N;(N=0<=C)&&Array.prototype.splice.call(y,C,1),N&&(ll(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function $p(u,h,p,y){for(var C=0;C<u.length;++C){var N=u[C];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==y)return C}return-1}var zp="closure_lm_"+(1e6*Math.random()|0),Hp={};function zI(u,h,p,y,C){if(y&&y.once)return qI(u,h,p,y,C);if(Array.isArray(h)){for(var N=0;N<h.length;N++)zI(u,h[N],p,y,C);return null}return p=Kp(p),u&&u[Ba]?u.K(h,p,l(y)?!!y.capture:!!y,C):HI(u,h,p,!1,y,C)}function HI(u,h,p,y,C,N){if(!h)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,Ce=Gp(u);if(Ce||(u[zp]=Ce=new dl(u)),p=Ce.add(h,p,y,U,N),p.proxy)return p;if(y=mP(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)hP||(C=U),C===void 0&&(C=!1),u.addEventListener(h.toString(),y,C);else if(u.attachEvent)u.attachEvent(WI(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function mP(){function u(p){return h.call(u.src,u.listener,p)}let h=yP;return u}function qI(u,h,p,y,C){if(Array.isArray(h)){for(var N=0;N<h.length;N++)qI(u,h[N],p,y,C);return null}return p=Kp(p),u&&u[Ba]?u.L(h,p,l(y)?!!y.capture:!!y,C):HI(u,h,p,!0,y,C)}function GI(u,h,p,y,C){if(Array.isArray(h))for(var N=0;N<h.length;N++)GI(u,h[N],p,y,C);else y=l(y)?!!y.capture:!!y,p=Kp(p),u&&u[Ba]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=$p(N,p,y,C),-1<p&&(ll(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Gp(u))&&(h=u.g[h.toString()],u=-1,h&&(u=$p(h,p,y,C)),(p=-1<u?h[u]:null)&&qp(p))}function qp(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Ba])Bp(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(WI(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=Gp(h))?(Bp(p,u),p.h==0&&(p.src=null,h[zp]=null)):ll(u)}}}function WI(u){return u in Hp?Hp[u]:Hp[u]="on"+u}function yP(u,h){if(u.da)u=!0;else{h=new Ua(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&qp(u),u=p.call(y,h)}return u}function Gp(u){return u=u[zp],u instanceof dl?u:null}var Wp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kp(u){return typeof u=="function"?u:(u[Wp]||(u[Wp]=function(h){return u.handleEvent(h)}),u[Wp])}function vt(){Br.call(this),this.i=new dl(this),this.M=this,this.F=null}_(vt,Br),vt.prototype[Ba]=!0,vt.prototype.removeEventListener=function(u,h,p,y){GI(this,u,h,p,y)};function At(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new yt(h,u);else if(h instanceof yt)h.target=h.target||u;else{var C=h;h=new yt(y,u),T(h,C)}if(C=!0,p)for(var N=p.length-1;0<=N;N--){var U=h.g=p[N];C=hl(U,y,!0,h)&&C}if(U=h.g=u,C=hl(U,y,!0,h)&&C,C=hl(U,y,!1,h)&&C,p)for(N=0;N<p.length;N++)U=h.g=p[N],C=hl(U,y,!1,h)&&C}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)ll(p[y]);delete u.g[h],u.h--}}this.F=null},vt.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},vt.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function hl(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,N=0;N<h.length;++N){var U=h[N];if(U&&!U.da&&U.capture==p){var Ce=U.listener,lt=U.ha||U.src;U.fa&&Bp(u.i,U),C=Ce.call(lt,y)!==!1&&C}}return C&&!y.defaultPrevented}function KI(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function QI(u){u.g=KI(()=>{u.g=null,u.i&&(u.i=!1,QI(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class vP extends Br{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:QI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $a(u){Br.call(this),this.h=u,this.g={}}_($a,Br);var YI=[];function ZI(u){H(u.g,function(h,p){this.g.hasOwnProperty(p)&&qp(h)},u),u.g={}}$a.prototype.N=function(){$a.aa.N.call(this),ZI(this)},$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qp=a.JSON.stringify,_P=a.JSON.parse,wP=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Yp(){}Yp.prototype.h=null;function XI(u){return u.h||(u.h=u.i())}function JI(){}var za={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zp(){yt.call(this,"d")}_(Zp,yt);function Xp(){yt.call(this,"c")}_(Xp,yt);var ji={},eD=null;function fl(){return eD=eD||new vt}ji.La="serverreachability";function tD(u){yt.call(this,ji.La,u)}_(tD,yt);function Ha(u){let h=fl();At(h,new tD(h))}ji.STAT_EVENT="statevent";function nD(u,h){yt.call(this,ji.STAT_EVENT,u),this.stat=h}_(nD,yt);function Rt(u){let h=fl();At(h,new nD(h,u))}ji.Ma="timingevent";function rD(u,h){yt.call(this,ji.Ma,u),this.size=h}_(rD,yt);function qa(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Ga(){this.g=!0}Ga.prototype.xa=function(){this.g=!1};function EP(u,h,p,y,C,N){u.info(function(){if(u.g)if(N)for(var U="",Ce=N.split("&"),lt=0;lt<Ce.length;lt++){var ve=Ce[lt].split("=");if(1<ve.length){var _t=ve[0];ve=ve[1];var wt=_t.split("_");U=2<=wt.length&&wt[1]=="type"?U+(_t+"="+ve+"&"):U+(_t+"=redacted&")}}else U=null;else U=N;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+p+`
`+U})}function IP(u,h,p,y,C,N,U){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+p+`
`+N+" "+U})}function js(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+TP(u,p)+(y?" "+y:"")})}function DP(u,h){u.info(function(){return"TIMEOUT: "+h})}Ga.prototype.info=function(){};function TP(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return Qp(p)}catch{return h}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jp;function gl(){}_(gl,Yp),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},Jp=new gl;function $r(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new $a(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sD}function sD(){this.i=null,this.g="",this.h=!1}var oD={},eg={};function tg(u,h,p){u.L=1,u.v=_l(or(h)),u.m=p,u.P=!0,aD(u,null)}function aD(u,h){u.F=Date.now(),ml(u),u.A=or(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),ED(p.i,"t",y),u.C=0,p=u.j.J,u.h=new sD,u.g=jD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new vP(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(YI[0]=C.toString()),C=YI);for(var N=0;N<C.length;N++){var U=zI(p,C[N],y||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Ha(),EP(u.i,u.u,u.A,u.l,u.R,u.m)}$r.prototype.ca=function(u){u=u.target;let h=this.M;h&&ar(u)==3?h.j():this.Y(u)},$r.prototype.Y=function(u){try{if(u==this.g)e:{let wt=ar(this.g);var h=this.g.Ba();let $s=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||AD(this.g)))){this.J||wt!=4||h==7||(h==8||0>=$s?Ha(3):Ha(2)),ng(this);var p=this.g.Z();this.X=p;t:if(cD(this)){var y=AD(this.g);u="";var C=y.length,N=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),Wa(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(N&&h==C-1)});y.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,IP(this.i,this.u,this.A,this.l,this.R,wt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,lt=this.g;if((Ce=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Ce)){var ve=Ce;break t}}ve=null}if(p=ve)js(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rg(this,p);else{this.o=!1,this.s=3,Rt(12),Ui(this),Wa(this);break e}}if(this.P){p=!0;let gn;for(;!this.J&&this.C<U.length;)if(gn=bP(this,U),gn==eg){wt==4&&(this.s=4,Rt(14),p=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==oD){this.s=4,Rt(15),js(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else js(this.i,this.l,gn,null),rg(this,gn);if(cD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||U.length!=0||this.h.h||(this.s=1,Rt(16),p=!1),this.o=this.o&&p,!p)js(this.i,this.l,U,"[Invalid Chunked Response]"),Ui(this),Wa(this);else if(0<U.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),ug(_t),_t.M=!0,Rt(11))}}else js(this.i,this.l,U,null),rg(this,U);wt==4&&Ui(this),this.o&&!this.J&&(wt==4?OD(this.j,this):(this.o=!1,ml(this)))}else $P(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Ui(this),Wa(this)}}}catch{}finally{}};function cD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function bP(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?eg:(p=Number(h.substring(p,y)),isNaN(p)?oD:(y+=1,y+p>h.length?eg:(h=h.slice(y,y+p),u.C=y+p,h)))}$r.prototype.cancel=function(){this.J=!0,Ui(this)};function ml(u){u.S=Date.now()+u.I,uD(u,u.I)}function uD(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qa(g(u.ba,u),h)}function ng(u){u.B&&(a.clearTimeout(u.B),u.B=null)}$r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(DP(this.i,this.A),this.L!=2&&(Ha(),Rt(17)),Ui(this),this.s=2,Wa(this)):uD(this,this.S-u)};function Wa(u){u.j.G==0||u.J||OD(u.j,u)}function Ui(u){ng(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,ZI(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function rg(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||ig(p.h,u))){if(!u.K&&ig(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Tl(p),Il(p);else break e;cg(p),Rt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=qa(g(p.Za,p),6e3));if(1>=hD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else $i(p,11)}else if((u.K||p.g==u)&&Tl(p),!L(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let ve=C[h];if(p.T=ve[0],ve=ve[1],p.G==2)if(ve[0]=="c"){p.K=ve[1],p.ia=ve[2];let _t=ve[3];_t!=null&&(p.la=_t,p.j.info("VER="+p.la));let wt=ve[4];wt!=null&&(p.Aa=wt,p.j.info("SVER="+p.Aa));let $s=ve[5];$s!=null&&typeof $s=="number"&&0<$s&&(y=1.5*$s,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let gn=u.g;if(gn){let Cl=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cl){var N=y.h;N.g||Cl.indexOf("spdy")==-1&&Cl.indexOf("quic")==-1&&Cl.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(sg(N,N.h),N.h=null))}if(y.D){let lg=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;lg&&(y.ya=lg,Ne(y.I,y.D,lg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var U=u;if(y.qa=VD(y,y.J?y.ia:null,y.W),U.K){fD(y.h,U);var Ce=U,lt=y.L;lt&&(Ce.I=lt),Ce.B&&(ng(Ce),ml(Ce)),y.g=U}else PD(y);0<p.i.length&&Dl(p)}else ve[0]!="stop"&&ve[0]!="close"||$i(p,7);else p.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?$i(p,7):ag(p):ve[0]!="noop"&&p.l&&p.l.ta(ve),p.v=0)}}Ha(4)}catch{}}var CP=class{constructor(u,h){this.g=u,this.map=h}};function lD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hD(u){return u.h?1:u.g?u.g.size:0}function ig(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function sg(u,h){u.g?u.g.add(h):u.h=h}function fD(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}lD.prototype.cancel=function(){if(this.i=pD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function pD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return S(u.i)}function SP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function AP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function gD(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=AP(u),y=SP(u),C=y.length,N=0;N<C;N++)h.call(void 0,y[N],p&&p[N],u)}var mD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RP(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),C=null;if(0<=y){var N=u[p].substring(0,y);C=u[p].substring(y+1)}else N=u[p];h(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Bi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bi){this.h=u.h,yl(this,u.j),this.o=u.o,this.g=u.g,vl(this,u.s),this.l=u.l;var h=u.i,p=new Ya;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),yD(this,p),this.m=u.m}else u&&(h=String(u).match(mD))?(this.h=!1,yl(this,h[1]||"",!0),this.o=Ka(h[2]||""),this.g=Ka(h[3]||"",!0),vl(this,h[4]),this.l=Ka(h[5]||"",!0),yD(this,h[6]||"",!0),this.m=Ka(h[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}Bi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Qa(h,vD,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Qa(h,vD,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Qa(p,p.charAt(0)=="/"?NP:MP,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Qa(p,kP)),u.join("")};function or(u){return new Bi(u)}function yl(u,h,p){u.j=p?Ka(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function vl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function yD(u,h,p){h instanceof Ya?(u.i=h,OP(u.i,u.h)):(p||(h=Qa(h,PP)),u.i=new Ya(h,u.h))}function Ne(u,h,p){u.i.set(h,p)}function _l(u){return Ne(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ka(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qa(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,xP),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vD=/[#\/\?@]/g,MP=/[#\?:]/g,NP=/[#\?]/g,PP=/[#\?@]/g,kP=/#/g;function Ya(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function zr(u){u.g||(u.g=new Map,u.h=0,u.i&&RP(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ya.prototype,t.add=function(u,h){zr(this),this.i=null,u=Us(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function _D(u,h){zr(u),h=Us(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function wD(u,h){return zr(u),h=Us(u,h),u.g.has(h)}t.forEach=function(u,h){zr(this),this.g.forEach(function(p,y){p.forEach(function(C){u.call(h,C,y,this)},this)},this)},t.na=function(){zr(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let C=u[y];for(let N=0;N<C.length;N++)p.push(h[y])}return p},t.V=function(u){zr(this);let h=[];if(typeof u=="string")wD(this,u)&&(h=h.concat(this.g.get(Us(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return zr(this),this.i=null,u=Us(this,u),wD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function ED(u,h,p){_D(u,h),0<p.length&&(u.i=null,u.g.set(Us(u,h),S(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let N=encodeURIComponent(String(y)),U=this.V(y);for(y=0;y<U.length;y++){var C=N;U[y]!==""&&(C+="="+encodeURIComponent(String(U[y]))),u.push(C)}}return this.i=u.join("&")};function Us(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function OP(u,h){h&&!u.j&&(zr(u),u.i=null,u.g.forEach(function(p,y){var C=y.toLowerCase();y!=C&&(_D(this,y),ED(this,C,p))},u)),u.j=h}function FP(u,h){let p=new Ga;if(a.Image){let y=new Image;y.onload=m(Hr,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(Hr,p,"TestLoadImage: error",!1,h,y),y.onabort=m(Hr,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(Hr,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function LP(u,h){let p=new Ga,y=new AbortController,C=setTimeout(()=>{y.abort(),Hr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(N=>{clearTimeout(C),N.ok?Hr(p,"TestPingServer: ok",!0,h):Hr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Hr(p,"TestPingServer: error",!1,h)})}function Hr(u,h,p,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(p)}catch{}}function VP(){this.g=new wP}function jP(u,h,p){let y=p||"";try{gD(u,function(C,N){let U=C;l(C)&&(U=Qp(C)),h.push(y+N+"="+encodeURIComponent(U))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function Za(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Za,Yp),Za.prototype.g=function(){return new wl(this.l,this.j)},Za.prototype.i=function(u){return function(){return u}}({});function wl(u,h){vt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(wl,vt),t=wl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Ja(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ID(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ID(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Xa(this):Ja(this),this.readyState==3&&ID(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Xa(this))},t.Qa=function(u){this.g&&(this.response=u,Xa(this))},t.ga=function(){this.g&&Xa(this)};function Xa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ja(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Ja(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function DD(u){let h="";return H(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function og(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=DD(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ne(u,h,p))}function Ue(u){vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ue,vt);var UP=/^https?$/i,BP=["POST","PUT"];t=Ue.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jp.g(),this.v=this.o?XI(this.o):XI(Jp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){TD(this,N);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)p.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let N of y.keys())p.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(BP,h,void 0))||y||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,U]of p)this.g.setRequestHeader(N,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{SD(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){TD(this,N)}};function TD(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,bD(u),El(u)}function bD(u){u.A||(u.A=!0,At(u,"complete"),At(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,At(this,"complete"),At(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?CD(this):this.bb())},t.bb=function(){CD(this)};function CD(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ar(u)!=4||u.Z()!=2)){if(u.u&&ar(u)==4)KI(u.Ea,0,u);else if(At(u,"readystatechange"),ar(u)==4){u.h=!1;try{let U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=U===0){var C=String(u.D).match(mD)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!UP.test(C?C.toLowerCase():"")}p=y}if(p)At(u,"complete"),At(u,"success");else{u.m=6;try{var N=2<ar(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",bD(u)}}finally{El(u)}}}}function El(u,h){if(u.g){SD(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||At(u,"ready");try{p.onreadystatechange=y}catch{}}}function SD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),_P(h)}};function AD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $P(u){let h={};u=(u.g&&2<=ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(L(u[y]))continue;var p=b(u[y]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[C]||[];h[C]=N,N.push(p)}I(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function RD(u){this.Aa=0,this.i=[],this.j=new Ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ec("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ec("baseRetryDelayMs",5e3,u),this.cb=ec("retryDelaySeedMs",1e4,u),this.Wa=ec("forwardChannelMaxRetries",2,u),this.wa=ec("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new lD(u&&u.concurrentRequestLimit),this.Da=new VP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=RD.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,y){Rt(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=VD(this,null,this.W),Dl(this)};function ag(u){if(xD(u),u.G==3){var h=u.U++,p=or(u.I);if(Ne(p,"SID",u.K),Ne(p,"RID",h),Ne(p,"TYPE","terminate"),tc(u,p),h=new $r(u,u.j,h),h.L=2,h.v=_l(or(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=jD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ml(h)}LD(u)}function Il(u){u.g&&(ug(u),u.g.cancel(),u.g=null)}function xD(u){Il(u),u.u&&(a.clearTimeout(u.u),u.u=null),Tl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Dl(u){if(!dD(u.h)&&!u.s){u.s=!0;var h=u.Ga;Va||$I(),ja||(Va(),ja=!0),Up.add(h,u),u.B=0}}function zP(u,h){return hD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qa(g(u.Ga,u,h),FD(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new $r(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ND(this,C,h),p=or(this.I),Ne(p,"RID",u),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),tc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(DD(N)))+"&"+h:this.m&&og(p,this.m,N)),sg(this.h,C),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",h),Ne(p,"SID","null"),C.T=!0,tg(C,p,null)):tg(C,p,h),this.G=2}}else this.G==3&&(u?MD(this,u):this.i.length==0||dD(this.h)||MD(this))};function MD(u,h){var p;h?p=h.l:p=u.U++;let y=or(u.I);Ne(y,"SID",u.K),Ne(y,"RID",p),Ne(y,"AID",u.T),tc(u,y),u.m&&u.o&&og(y,u.m,u.o),p=new $r(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=ND(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sg(u.h,p),tg(p,y,h)}function tc(u,h){u.H&&H(u.H,function(p,y){Ne(h,y,p)}),u.l&&gD({},function(p,y){Ne(h,y,p)})}function ND(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let N=-1;for(;;){let U=["count="+p];N==-1?0<p?(N=C[0].g,U.push("ofs="+N)):N=0:U.push("ofs="+N);let Ce=!0;for(let lt=0;lt<p;lt++){let ve=C[lt].g,_t=C[lt].map;if(ve-=N,0>ve)N=Math.max(0,C[lt].g-100),Ce=!1;else try{jP(_t,U,"req"+ve+"_")}catch{y&&y(_t)}}if(Ce){y=U.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function PD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Va||$I(),ja||(Va(),ja=!0),Up.add(h,u),u.v=0}}function cg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qa(g(u.Fa,u),FD(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,kD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qa(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Il(this),kD(this))};function ug(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function kD(u){u.g=new $r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=or(u.qa);Ne(h,"RID","rpc"),Ne(h,"SID",u.K),Ne(h,"AID",u.T),Ne(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ne(h,"TO",u.ja),Ne(h,"TYPE","xmlhttp"),tc(u,h),u.m&&u.o&&og(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=_l(or(h)),p.m=null,p.P=!0,aD(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),cg(this),Rt(19))};function Tl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function OD(u,h){var p=null;if(u.g==h){Tl(u),ug(u),u.g=null;var y=2}else if(ig(u.h,h))p=h.D,fD(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=u.B;y=fl(),At(y,new rD(y,p)),Dl(u)}else PD(u);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&zP(u,h)||y==2&&cg(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),C){case 1:$i(u,5);break;case 4:$i(u,10);break;case 3:$i(u,6);break;default:$i(u,2)}}}function FD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function $i(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let C=!y;y=new Bi(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yl(y,"https"),_l(y),C?FP(y.toString(),p):LP(y.toString(),p)}else Rt(2);u.G=0,u.l&&u.l.sa(h),LD(u),xD(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function LD(u){if(u.G=0,u.ka=[],u.l){let h=pD(u.h);(h.length!=0||u.i.length!=0)&&(D(u.ka,h),D(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function VD(u,h,p){var y=p instanceof Bi?or(p):new Bi(p);if(y.g!="")h&&(y.g=h+"."+y.g),vl(y,y.s);else{var C=a.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var N=new Bi(null);y&&yl(N,y),h&&(N.g=h),C&&vl(N,C),p&&(N.l=p),y=N}return p=u.D,h=u.ya,p&&h&&Ne(y,p,h),Ne(y,"VER",u.la),tc(u,y),y}function jD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Ue(new Za({eb:p})):new Ue(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function UD(){}t=UD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bl(){}bl.prototype.g=function(u,h){return new Qt(u,h)};function Qt(u,h){vt.call(this),this.g=new RD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!L(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!L(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Bs(this)}_(Qt,vt),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){ag(this.g)},Qt.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Qp(u),u=p);h.i.push(new CP(h.Ya++,u)),h.G==3&&Dl(h)},Qt.prototype.N=function(){this.g.l=null,delete this.j,ag(this.g),delete this.g,Qt.aa.N.call(this)};function BD(u){Zp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}_(BD,Zp);function $D(){Xp.call(this),this.status=1}_($D,Xp);function Bs(u){this.g=u}_(Bs,UD),Bs.prototype.ua=function(){At(this.g,"a")},Bs.prototype.ta=function(u){At(this.g,new BD(u))},Bs.prototype.sa=function(u){At(this.g,new $D)},Bs.prototype.ra=function(){At(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,iw=Nr.createWebChannelTransport=function(){return new bl},rw=Nr.getStatEventTarget=function(){return fl()},nw=Nr.Event=ji,Df=Nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,Iu=Nr.ErrorCode=pl,iD.COMPLETE="complete",tw=Nr.EventType=iD,JI.EventType=za,za.OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Xo=Nr.WebChannel=JI,ew=Nr.FetchXmlHttpFactory=Za,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,J_=Nr.XhrIo=Ue}).apply(typeof If<"u"?If:typeof self<"u"?self:typeof window<"u"?window:{});var Ix="@firebase/firestore";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var Ma="10.13.1";var Ti=new Nl("@firebase/firestore");function ra(){return Ti.logLevel}function UX(t){Ti.setLogLevel(t)}function k(t,...e){if(Ti.logLevel<=Pn.DEBUG){let n=e.map(uI);Ti.debug(`Firestore (${Ma}): ${t}`,...n)}}function Ke(t,...e){if(Ti.logLevel<=Pn.ERROR){let n=e.map(uI);Ti.error(`Firestore (${Ma}): ${t}`,...n)}}function tr(t,...e){if(Ti.logLevel<=Pn.WARN){let n=e.map(uI);Ti.warn(`Firestore (${Ma}): ${t}`,...n)}}function uI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function W(t="Unexpected state"){let e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+t;throw Ke(e),new Error(e)}function Y(t,e){t||W()}function BX(t,e){t||W()}function B(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Ml{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}},lw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},dw=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>x(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new kf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new tt(e)}},hw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},fw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},pw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string"),this.R=n.token,new pw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function lH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=lH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function fa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function bM(t){return t+"\0"}var Qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ff=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends Ff{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},dH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends Ff{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return dH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var pa=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function mw(t){return t.fields.find(e=>e.kind===2)}function _s(t){return t.fields.filter(e=>e.kind!==2)}pa.UNKNOWN_ID=-1;var ua=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var ku=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,pn.min())}};function CM(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new pn(i,$.empty(),e)}function SM(t){return new pn(t.readTime,t.key,-1)}var pn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Z.min(),$.empty(),-1)}static max(){return new t(Z.max(),$.empty(),-1)}};function lI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var AM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fi(t){return x(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==AM)throw t;k("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Vf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new bs(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=dI(r.target.error);this.V.reject(new bs(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new bs(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new vw(n)}},bi=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(nc())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),ws(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xl())return!1;if(t.v())return!0;let e=nc(),n=t.S(e),r=0<n&&n<10,i=RM(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return x(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new bs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new O(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new O(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new bs(e,o))},i.onupgradeneeded=s=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return x(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Vf.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function RM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var yw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ws(this.B.delete())}},bs=class extends O{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Li(t){return t.name==="IndexedDbTransactionError"}var vw=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(k("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ws(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),ws(this.store.add(e))}get(e){return ws(this.store.get(e)).next(n=>(n===void 0&&(n=null),k("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),ws(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),ws(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new R((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new R((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new R((r,i)=>{n.onerror=s=>{let o=dI(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new R((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new yw(a),l=n(a.primaryKey,a.value,c);if(l instanceof R){let d=l.catch(f=>(c.done(),R.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>R.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ws(t){return new R((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=dI(r.target.error);n(i)}})}var Dx=!1;function dI(t){let e=bi.S(nc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dx||(Dx=!0,setTimeout(()=>{throw r},0)),r}}return t}var _w=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Li(n)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Fi(n)}yield this.X(6e4)}))}},ww=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,s=!0;return R.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return k("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=SM(s);lI(o,r)>0&&(r=o)}),new pn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var rn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function il(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function xM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tx(e)),e=hH(t.get(n),e);return Tx(e)}function hH(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Tx(t){return t+""}function Yn(t){let e=t.length;if(Y(e>=2),e===2)return Y(t.charAt(0)===""&&t.charAt(1)===""),me.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&W(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:W()}s=o+2}return new me(r)}var bx=["userId","batchId"];function Af(t,e){return[t,jt(e)]}function MM(t,e,n){return[t,jt(e),n]}var fH={},pH=["prefixPath","collectionGroup","readTime","documentId"],gH=["prefixPath","collectionGroup","documentId"],mH=["collectionGroup","readTime","prefixPath","documentId"],yH=["canonicalId","targetId"],vH=["targetId","path"],_H=["path","targetId"],wH=["collectionId","parent"],EH=["indexId","uid"],IH=["uid","sequenceNumber"],DH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TH=["indexId","uid","orderedDocumentKey"],bH=["userId","collectionPath","documentId"],CH=["userId","collectionPath","largestBatchId"],SH=["userId","collectionGroup","largestBatchId"],NM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AH=[...NM,"documentOverlays"],PM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kM=PM,hI=[...kM,"indexConfiguration","indexState","indexEntries"],RH=hI,xH=[...hI,"globals"];var Fu=class extends Lf{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function ot(t,e){let n=B(t);return bi.F(n._e,e)}function Cx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ke=class t{constructor(e,n){this.comparator=e,this.root=n||Xn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ca(this.root,e,this.comparator,!0)}},ca=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class t{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jf(this.data.getIterator())}getIteratorFrom(e){return new jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},jf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Jo(t){return t.hasNext()?t.getNext():void 0}var sn=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ae(st.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Uf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function zX(){return typeof atob<"u"}var Xe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Uf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Xe.EMPTY_BYTE_STRING=new Xe("");var MH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Y(!!t),typeof t=="string"){let e=0,n=MH.exec(t);if(Y(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ci(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}function xp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fI(t){let e=t.mapValue.fields.__previous_value__;return xp(e)?fI(e):e}function Lu(t){let e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}var Ew=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ga=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rf={nullValue:"NULL_VALUE"};function Cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xp(t)?4:FM(t)?9007199254740991:Mp(t)?10:11:W()}function nr(t,e){if(t===e)return!0;let n=Cs(t);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lu(t).isEqual(Lu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Or(i.timestampValue),a=Or(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ci(i.bytesValue).isEqual(Ci(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Fe(i.doubleValue),a=Fe(s.doubleValue);return o===a?Ou(o)===Ou(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fa(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Cx(o)!==Cx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!nr(o[c],a[c])))return!1;return!0}(t,e);default:return W()}}function Vu(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Si(t,e){if(t===e)return 0;let n=Cs(t),r=Cs(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Fe(s.integerValue||s.doubleValue),c=Fe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Sx(t.timestampValue,e.timestampValue);case 4:return Sx(Lu(t),Lu(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ci(s),c=Ci(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=oe(a[l],c[l]);if(d!==0)return d}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=oe(Fe(s.latitude),Fe(o.latitude));return a!==0?a:oe(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ax(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(c=g.value)===null||c===void 0?void 0:c.arrayValue,S=oe(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:Ax(m,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Di.mapValue&&o===Di.mapValue)return 0;if(s===Di.mapValue)return 1;if(o===Di.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=oe(c[f],d[f]);if(g!==0)return g;let m=Si(a[c[f]],l[d[f]]);if(m!==0)return m}return oe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw W()}}function Sx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=Or(t),r=Or(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function Ax(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Si(n[i],r[i]);if(s)return s}return oe(n.length,r.length)}function ma(t){return Iw(t)}function Iw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Iw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Iw(n.fields[o])}`;return i+"}"}(t.mapValue):W()}function Ss(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dw(t){return!!t&&"integerValue"in t}function ju(t){return!!t&&"arrayValue"in t}function Rx(t){return!!t&&"nullValue"in t}function xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xf(t){return!!t&&"mapValue"in t}function Mp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ru(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var LM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function NH(t){return"nullValue"in t?Rf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ss(ga.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Mp(t)?LM:{mapValue:{}}:W()}function PH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ss(ga.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?LM:"mapValue"in t?Mp(t)?{mapValue:{}}:Di:W()}function Mx(t,e){let n=Si(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Nx(t,e){let n=Si(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var St=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ru(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());xf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Ru(this.value))}};function VM(t){let e=[];return Fs(t.fields,(n,r)=>{let i=new st([n]);if(xf(r)){let s=VM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new sn(e)}var rt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Z.min(),Z.min(),Z.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Z.min(),Z.min(),St.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Z.min(),Z.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rr=class{constructor(e,n){this.position=e,this.inclusive=n}};function Px(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=Si(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}var As=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function kH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bf=class{},pe=class t extends Bf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cw(e,n,r):n==="array-contains"?new Rw(e,r):n==="in"?new $f(e,r):n==="not-in"?new xw(e,r):n==="array-contains-any"?new Mw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Sw(e,r):new Aw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Si(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(Si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class t extends Bf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return ya(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ya(t){return t.op==="and"}function Tw(t){return t.op==="or"}function pI(t){return jM(t)&&ya(t)}function jM(t){for(let e of t.filters)if(e instanceof be)return!1;return!0}function bw(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+ma(t.value);if(pI(t))return t.filters.map(e=>bw(e)).join(",");{let e=t.filters.map(n=>bw(n)).join(",");return`${t.op}(${e})`}}function UM(t,e){return t instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.field.isEqual(i.field)&&nr(r.value,i.value)}(t,e):t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&UM(o,i.filters[a]),!0):!1}(t,e):void W()}function BM(t,e){let n=t.filters.concat(e);return be.create(n,t.op)}function $M(t){return t instanceof pe?function(n){return`${n.field.canonicalString()} ${n.op} ${ma(n.value)}`}(t):t instanceof be?function(n){return n.op.toString()+" {"+n.getFilters().map($M).join(" ,")+"}"}(t):"Filter"}var Cw=class extends pe{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},Sw=class extends pe{constructor(e,n){super(e,"in",n),this.keys=zM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Aw=class extends pe{constructor(e,n){super(e,"not-in",n),this.keys=zM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function zM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var Rw=class extends pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ju(n)&&Vu(n.arrayValue,this.value)}},$f=class extends pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Vu(this.value.arrayValue,n)}},xw=class extends pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Vu(this.value.arrayValue,n)}},Mw=class extends pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ju(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vu(this.value.arrayValue,r))}};var Nw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Pw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Nw(t,e,n,r,i,s,o)}function Rs(t){let e=B(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),il(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ma(r)).join(",")),e.ue=n}return e.ue}function sl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kx(t.startAt,e.startAt)&&kx(t.endAt,e.endAt)}function zf(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hf(t,e){return t.filters.filter(n=>n instanceof pe&&n.field.isEqual(e))}function Ox(t,e,n){let r=Rf,i=!0;for(let s of Hf(t,e)){let o=Rf,a=!0;switch(s.op){case"<":case"<=":o=NH(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Rf}Mx({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];Mx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Fx(t,e,n){let r=Di,i=!0;for(let s of Hf(t,e)){let o=Di,a=!0;switch(s.op){case">=":case">":o=PH(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Di}Nx({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];Nx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var Mn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function HM(t,e,n,r,i,s,o,a){return new Mn(t,e,n,r,i,s,o,a)}function Na(t){return new Mn(t)}function Lx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gI(t){return t.collectionGroup!==null}function la(t){let e=B(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(st.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new As(s,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new As(st.keyField(),r))}return e.ce}function Ut(t){let e=B(t);return e.le||(e.le=OH(e,la(t))),e.le}function OH(t,e){if(t.limitType==="F")return Pw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new As(i.field,s)});let n=t.endAt?new rr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rr(t.startAt.position,t.startAt.inclusive):null;return Pw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kw(t,e){let n=t.filters.concat([e]);return new Mn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qf(t,e,n){return new Mn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ol(t,e){return sl(Ut(t),Ut(e))&&t.limitType===e.limitType}function qM(t){return`${Rs(Ut(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$M(i)).join(", ")}]`),il(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ma(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ma(i)).join(",")),`Target(${r})`}(Ut(t))}; limitType=${t.limitType})`}function al(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of la(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=Px(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,la(r),i)||r.endAt&&!function(o,a,c){let l=Px(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,la(r),i))}(t,e)}function GM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WM(t){return(e,n)=>{let r=!1;for(let i of la(t)){let s=FH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function FH(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Si(c,l):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var ir=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return OM(this.inner)}size(){return this.innerSize}};var LH=new ke($.comparator);function Kt(){return LH}var KM=new ke($.comparator);function Su(...t){let e=KM;for(let n of t)e=e.insert(n.key,n);return e}function QM(t){let e=KM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zn(){return xu()}function YM(){return xu()}function xu(){return new ir(t=>t.toString(),(t,e)=>t.isEqual(e))}var VH=new ke($.comparator),jH=new Ae($.comparator);function ue(...t){let e=jH;for(let n of t)e=e.add(n);return e}var UH=new Ae(oe);function mI(){return UH}function yI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function ZM(t){return{integerValue:""+t}}function XM(t,e){return xM(e)?ZM(e):yI(t,e)}var va=class{constructor(){this._=void 0}};function BH(t,e,n){return t instanceof Ai?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xp(s)&&(s=fI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Fr?eN(t,e):t instanceof Lr?tN(t,e):function(i,s){let o=JM(i,s),a=Vx(o)+Vx(i.Pe);return Dw(o)&&Dw(i.Pe)?ZM(a):yI(i.serializer,a)}(t,e)}function $H(t,e,n){return t instanceof Fr?eN(t,e):t instanceof Lr?tN(t,e):n}function JM(t,e){return t instanceof Ri?function(r){return Dw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ai=class extends va{},Fr=class extends va{constructor(e){super(),this.elements=e}};function eN(t,e){let n=nN(e);for(let r of t.elements)n.some(i=>nr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Lr=class extends va{constructor(e){super(),this.elements=e}};function tN(t,e){let n=nN(e);for(let r of t.elements)n=n.filter(i=>!nr(i,r));return{arrayValue:{values:n}}}var Ri=class extends va{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Vx(t){return Fe(t.integerValue||t.doubleValue)}function nN(t){return ju(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var xs=class{constructor(e,n){this.field=e,this.transform=n}};function zH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fr&&i instanceof Fr||r instanceof Lr&&i instanceof Lr?fa(r.elements,i.elements,nr):r instanceof Ri&&i instanceof Ri?nr(r.Pe,i.Pe):r instanceof Ai&&i instanceof Ai}(t.transform,e.transform)}var Ow=class{constructor(e,n){this.version=e,this.transformResults=n}},He=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var _a=class{};function rN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mi(t.key,He.none()):new xi(t.key,t.data,He.none());{let n=t.data,r=St.empty(),i=new Ae(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Nn(t.key,r,new sn(i.toArray()),He.none())}}function HH(t,e,n){t instanceof xi?function(i,s,o){let a=i.value.clone(),c=Ux(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Nn?function(i,s,o){if(!Mf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Ux(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(iN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mu(t,e,n,r){return t instanceof xi?function(s,o,a,c){if(!Mf(s.precondition,o))return a;let l=s.value.clone(),d=Bx(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Nn?function(s,o,a,c){if(!Mf(s.precondition,o))return a;let l=Bx(s.fieldTransforms,c,o),d=o.data;return d.setAll(iN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Mf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function qH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=JM(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function jx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fa(r,i,(s,o)=>zH(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var xi=class extends _a{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nn=class extends _a{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function iN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Ux(t,e,n){let r=new Map;Y(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$H(o,a,n[i]))}return r}function Bx(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,BH(s,o,e))}return r}var Mi=class extends _a{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Uu=class extends _a{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&HH(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=YM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=rN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(n,r)=>jx(n,r))&&fa(this.baseMutations,e.baseMutations,(n,r)=>jx(n,r))}},Fw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length);let i=function(){return VH}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var $u=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Lw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Je,ge;function sN(t){switch(t){default:return W();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function oN(t){if(t===void 0)return Ke("GRPC error has no .code"),M.UNKNOWN;switch(t){case Je.OK:return M.OK;case Je.CANCELLED:return M.CANCELLED;case Je.UNKNOWN:return M.UNKNOWN;case Je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Je.INTERNAL:return M.INTERNAL;case Je.UNAVAILABLE:return M.UNAVAILABLE;case Je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Je.NOT_FOUND:return M.NOT_FOUND;case Je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Je.ABORTED:return M.ABORTED;case Je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Je.DATA_LOSS:return M.DATA_LOSS;default:return W()}}(ge=Je||(Je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var $x=null;function aN(){return new TextEncoder}var GH=new vi([4294967295,4294967295],0);function zx(t){let e=aN().encode(t),n=new X_;return n.update(e),new Uint8Array(n.digest())}function Hx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vi([n,r],0),new vi([i,s],0)]}var Vw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ts(`Invalid padding: ${n}`);if(r<0)throw new Ts(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ts(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ts(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(vi.fromNumber(r)));return i.compare(GH)===1&&(i=new vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=zx(e),[r,i]=Hx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=zx(e),[r,i]=Hx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ts=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Z.min(),i,new ke(oe),Kt(),ue())}},Hu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var da=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Gf=class{constructor(e,n){this.targetId=e,this.me=n}},Wf=class{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Kf=class{constructor(){this.fe=0,this.ge=Gx(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Hu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Gx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Y(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},jw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kt(),this.qe=qx(),this.Qe=new ke(oe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(zf(s))if(r===0){let o=new $(s.path);this.Ue(n,o,rt.newNoDocument(o,Z.min()))}else Y(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}$x?.et(function(d,f,g,m,_){var S,D,P,L,V,j;let ee={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},H=f.unchangedNames;return H&&(ee.bloomFilter={applied:_===0,hashCount:(S=H?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(L=(P=(D=H?.bits)===null||D===void 0?void 0:D.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(j=(V=H?.bits)===null||V===void 0?void 0:V.padding)!==null&&j!==void 0?j:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),ee}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Ci(r).toUint8Array()}catch(c){if(c instanceof Uf)return tr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Vw(o,i,s)}catch(c){return tr(c instanceof Ts?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&zf(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,rt.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new zu(e,n,this.Qe,this.ke,r);return this.ke=Kt(),this.qe=qx(),this.Qe=new ke(oe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Kf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ae(oe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function qx(){return new ke($.comparator)}function Gx(){return new ke($.comparator)}var WH={asc:"ASCENDING",desc:"DESCENDING"},KH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QH={and:"AND",or:"OR"},Uw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Bw(t,e){return t.useProto3Json||il(e)?e:{value:e}}function wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YH(t,e){return wa(t,e.toTimestamp())}function Ye(t){return Y(!!t),Z.fromTimestamp(function(n){let r=Or(n);return new Qe(r.seconds,r.nanos)}(t))}function vI(t,e){return $w(t,e).canonicalString()}function $w(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uN(t){let e=me.fromString(t);return Y(_N(e)),e}function qu(t,e){return vI(t.databaseId,e.path)}function Jn(t,e){let n=uN(e);if(n.get(1)!==t.databaseId.projectId)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(hN(n))}function lN(t,e){return vI(t.databaseId,e)}function dN(t){let e=uN(t);return e.length===4?me.emptyPath():hN(e)}function zw(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hN(t){return Y(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wx(t,e,n){return{name:qu(t,e),fields:n.value.mapValue.fields}}function fN(t,e,n){let r=Jn(t,e.name),i=Ye(e.updateTime),s=e.createTime?Ye(e.createTime):Z.min(),o=new St({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ZH(t,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;let s=Jn(r,i.found.name),o=Ye(i.found.updateTime),a=i.found.createTime?Ye(i.found.createTime):Z.min(),c=new St({mapValue:{fields:i.found.fields}});return rt.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);let s=Jn(r,i.missing),o=Ye(i.readTime);return rt.newNoDocument(s,o)}(t,e):W()}function XH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Y(d===void 0||typeof d=="string"),Xe.fromBase64String(d||"")):(Y(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?M.UNKNOWN:oN(l.code);return new O(d,l.message||"")}(o);n=new Wf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jn(t,r.document.name),s=Ye(r.document.updateTime),o=r.document.createTime?Ye(r.document.createTime):Z.min(),a=new St({mapValue:{fields:r.document.fields}}),c=rt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new da(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jn(t,r.document),s=r.readTime?Ye(r.readTime):Z.min(),o=rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new da([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jn(t,r.document),s=r.removedTargetIds||[];n=new da([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Lw(i,s),a=r.targetId;n=new Gf(a,o)}}return n}function Gu(t,e){let n;if(e instanceof xi)n={update:Wx(t,e.key,e.value)};else if(e instanceof Mi)n={delete:qu(t,e.key)};else if(e instanceof Nn)n={update:Wx(t,e.key,e.data),updateMask:iq(e.fieldMask)};else{if(!(e instanceof Uu))return W();n={verify:qu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ai)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ri)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:YH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function Hw(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?He.updateTime(Ye(s.updateTime)):s.exists!==void 0?He.exists(s.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),c=new Ai;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Fr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Lr(d)}else"increment"in a?c=new Ri(o,a.increment):W();let l=st.fromServerFormat(a.fieldPath);return new xs(l,c)}(t,i)):[];if(e.update){e.update.name;let i=Jn(t,e.update.name),s=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new sn(l.map(d=>st.fromServerFormat(d)))}(e.updateMask);return new Nn(i,s,o,n,r)}return new xi(i,s,n,r)}if(e.delete){let i=Jn(t,e.delete);return new Mi(i,n)}if(e.verify){let i=Jn(t,e.verify);return new Uu(i,n)}return W()}function JH(t,e){return t&&t.length>0?(Y(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ye(i.updateTime):Ye(s);return o.isEqual(Z.min())&&(o=Ye(s)),new Ow(o,i.transformResults||[])}(n,e))):[]}function pN(t,e){return{documents:[lN(t,e.path)]}}function gN(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lN(t,i);let s=function(l){if(l.length!==0)return vN(be.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:sa(g.field),direction:tq(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Bw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function mN(t){let e=dN(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Y(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=yN(f);return g instanceof be&&pI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(_){return new As(oa(_.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,il(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new rr(m,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new rr(m,g)}(n.endAt)),HM(e,i,o,s,a,"F",c,l)}function eq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=oa(n.unaryFilter.field);return pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=oa(n.unaryFilter.field);return pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=oa(n.unaryFilter.field);return pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=oa(n.unaryFilter.field);return pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return pe.create(oa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return be.create(n.compositeFilter.filters.map(r=>yN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function tq(t){return WH[t]}function nq(t){return KH[t]}function rq(t){return QH[t]}function sa(t){return{fieldPath:t.canonicalString()}}function oa(t){return st.fromServerFormat(t.fieldPath)}function vN(t){return t instanceof pe?function(n){if(n.op==="=="){if(xx(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NAN"}};if(Rx(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xx(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NAN"}};if(Rx(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(n.field),op:nq(n.op),value:n.value}}}(t):t instanceof be?function(n){let r=n.getFilters().map(i=>vN(i));return r.length===1?r[0]:{compositeFilter:{op:rq(n.op),filters:r}}}(t):W()}function iq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _N(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ea=class t{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qf=class{constructor(e){this.ct=e}};function sq(t,e){let n;if(e.document)n=fN(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Ns(e.noDocument.readTime);n=rt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return W();{let r=$.fromSegments(e.unknownDocument.path),i=Ns(e.unknownDocument.version);n=rt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Qe(i[0],i[1]);return Z.fromTimestamp(s)}(e.readTime)),n}function Kx(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:qu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:wa(s,o.version.toTimestamp()),createTime:wa(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ms(e.version)};else{if(!e.isUnknownDocument())return W();r.unknownDocument={path:n.path.toArray(),version:Ms(e.version)}}return r}function Yf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ms(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ns(t){let e=new Qe(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function Es(t,e){let n=(e.baseMutations||[]).map(s=>Hw(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Hw(t.ct,s)),i=Qe.fromMillis(e.localWriteTimeMs);return new Bu(e.batchId,i,n,r)}function Au(t){let e=Ns(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ns(t.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Y(s.documents.length===1),Ut(Na(dN(s.documents[0])))}(t.query):function(s){return Ut(mN(s))}(t.query),new Ea(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xe.fromBase64String(t.resumeToken))}function wN(t,e){let n=Ms(e.snapshotVersion),r=Ms(e.lastLimboFreeSnapshotVersion),i;i=zf(e.target)?pN(t.ct,e.target):gN(t.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _I(t){let e=mN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qf(e,e.limit,"L"):e}function sw(t,e){return new $u(e.largestBatchId,Hw(t.ct,e.overlayMutation))}function Qx(t,e){let n=e.path.lastSegment();return[t,jt(e.path.popLast()),n]}function Yx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ms(r.readTime),documentKey:jt(r.documentKey.path),largestBatchId:r.largestBatchId}}var qw=class{getBundleMetadata(e,n){return Zx(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ns(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Zx(e).put(function(i){return{bundleId:i.id,createTime:Ms(Ye(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Xx(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:_I(s.bundledQuery),readTime:Ns(s.readTime)}}(r)})}saveNamedQuery(e,n){return Xx(e).put(function(i){return{name:i.name,readTime:Ms(Ye(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function Zx(t){return ot(t,"bundles")}function Xx(t){return ot(t,"namedQueries")}var Zf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Du(e).get(Qx(this.userId,n)).next(r=>r?sw(this.serializer,r):null)}getOverlays(e,n){let r=Zn();return R.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new $u(n,o);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(jt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Du(e).j("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Zn(),s=jt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Du(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=sw(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Zn(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Du(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=sw(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Du(e).put(function(i,s,o){let[a,c,l]=Qx(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Gu(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function Du(t){return ot(t,"documentOverlays")}var Gw=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Pr=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ou(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Or(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ci(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?FM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Mp(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):W()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Fe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),$.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Pr.vt=new Pr;function oq(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Jx(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=oq(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var Ww=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=Jx(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=Jx(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Kw=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Qw=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Is=class{constructor(){this.jt=new Ww,this.Ht=new Kw(this.jt),this.Jt=new Qw(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ds=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function _i(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=eM(t.arrayValue,e.arrayValue),n!==0?n:(n=eM(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function eM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Xf=class{constructor(e){this.Xt=new Ae((n,r)=>st.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Y(e.collectionGroup===this.collectionId),this.nn)return!1;let n=mw(e);if(n!==void 0&&!this.sn(n))return!1;let r=_s(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(st.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ua(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ua(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ua(r.field,r.dir==="asc"?0:1)));return new pa(pa.UNKNOWN_ID,this.collectionId,n,ku.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function EN(t){var e,n;if(Y(t instanceof pe||t instanceof be),t instanceof pe){if(t instanceof $f){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>pe.create(t.field,"==",s)))||[];return be.create(i,"or")}return t}let r=t.filters.map(i=>EN(i));return be.create(r,t.op)}function aq(t){if(t.getFilters().length===0)return[];let e=Xw(EN(t));return Y(IN(e)),Yw(e)||Zw(e)?[e]:e.getFilters()}function Yw(t){return t instanceof pe}function Zw(t){return t instanceof be&&pI(t)}function IN(t){return Yw(t)||Zw(t)||function(n){if(n instanceof be&&Tw(n)){for(let r of n.getFilters())if(!Yw(r)&&!Zw(r))return!1;return!0}return!1}(t)}function Xw(t){if(Y(t instanceof pe||t instanceof be),t instanceof pe)return t;if(t.filters.length===1)return Xw(t.filters[0]);let e=t.filters.map(r=>Xw(r)),n=be.create(e,t.op);return n=Jf(n),IN(n)?n:(Y(n instanceof be),Y(ya(n)),Y(n.filters.length>1),n.filters.reduce((r,i)=>wI(r,i)))}function wI(t,e){let n;return Y(t instanceof pe||t instanceof be),Y(e instanceof pe||e instanceof be),n=t instanceof pe?e instanceof pe?function(i,s){return be.create([i,s],"and")}(t,e):tM(t,e):e instanceof pe?tM(e,t):function(i,s){if(Y(i.filters.length>0&&s.filters.length>0),ya(i)&&ya(s))return BM(i,s.getFilters());let o=Tw(i)?i:s,a=Tw(i)?s:i,c=o.filters.map(l=>wI(l,a));return be.create(c,"or")}(t,e),Jf(n)}function tM(t,e){if(ya(e))return BM(e,t.getFilters());{let n=e.filters.map(r=>wI(t,r));return be.create(n,"or")}}function Jf(t){if(Y(t instanceof pe||t instanceof be),t instanceof pe)return t;let e=t.getFilters();if(e.length===1)return Jf(e[0]);if(jM(t))return t;let n=e.map(i=>Jf(i)),r=[];return n.forEach(i=>{i instanceof pe?r.push(i):i instanceof be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,t.op)}var Jw=class{constructor(){this.un=new Wu}addToCollectionParentIndex(e,n){return this.un.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(pn.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(pn.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Wu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(me.comparator)).toArray()}};var Tf=new Uint8Array(0),eE=class{constructor(e,n){this.databaseId=n,this.cn=new Wu,this.ln=new ir(r=>Rs(r),(r,i)=>sl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let s={collectionId:r,parent:jt(i)};return nM(e).put(s)}return R.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[bM(n),""],!1,!0);return nM(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Yn(o.parent))}return r})}addFieldIndex(e,n){let r=Tu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=ta(e);return s.next(a=>{o.put(Yx(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Tu(e),i=ta(e),s=ea(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Tu(e),r=ea(e),i=ta(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return R.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Xf(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=ea(e),i=!0,s=new Map;return R.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ue(),a=[];return R.forEach(s,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(j=>`${j.fieldPath}:${j.kind}`).join(",")}`}(c)} to execute ${Rs(n)}`);let d=function(V,j){let ee=mw(j);if(ee===void 0)return null;for(let H of Hf(V,ee.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(l,c),f=function(V,j){let ee=new Map;for(let H of _s(j))for(let I of Hf(V,H.fieldPath))switch(I.op){case"==":case"in":ee.set(H.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(H.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),g=function(V,j){let ee=[],H=!0;for(let I of _s(j)){let v=I.kind===0?Ox(V,I.fieldPath,V.startAt):Fx(V,I.fieldPath,V.startAt);ee.push(v.value),H&&(H=v.inclusive)}return new rr(ee,H)}(l,c),m=function(V,j){let ee=[],H=!0;for(let I of _s(j)){let v=I.kind===0?Fx(V,I.fieldPath,V.endAt):Ox(V,I.fieldPath,V.endAt);ee.push(v.value),H&&(H=v.inclusive)}return new rr(ee,H)}(l,c),_=this.In(c,l,g),S=this.In(c,l,m),D=this.Tn(c,l,f),P=this.En(c.indexId,d,_,g.inclusive,S,m.inclusive,D);return R.forEach(P,L=>r.G(L,n.limit).next(V=>{V.forEach(j=>{let ee=$.fromSegments(j.documentKey);o.has(ee)||(o=o.add(ee),a.push(ee))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=aq(be.create(e.filters,"and")).map(r=>Pw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let g=n?this.dn(n[f/l]):Tf,m=this.An(e,g,r[f%l],i),_=this.Rn(e,g,s[f%l],o),S=a.map(D=>this.An(e,g,D,!0));d.push(...this.createRange(m,_,S))}return d}An(e,n,r,i){let s=new Ds(e,$.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){let s=new Ds(e,$.empty(),n,r);return i?s.Zt():s}Pn(e,n){let r=new Xf(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.hn(n);return R.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ae(st.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new Is;for(let i of _s(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Pr.vt.It(s,o)}return r.zt()}dn(e){let n=new Is;return Pr.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new Is;return Pr.vt.It(Ss(this.databaseId,n),r.Yt(function(s){let o=_s(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Is);let s=0;for(let o of _s(e)){let a=r[s++];for(let c of i)if(this.fn(n,o.fieldPath)&&ju(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);Pr.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Is;c.seed(a.zt()),Pr.vt.It(o,c.Yt(n.kind)),s.push(c)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Tu(e),i=ta(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{let o=[];return R.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let g=f?new ku(f.sequenceNumber,new pn(Ns(f.readTime),new $(Yn(f.documentKey)),f.largestBatchId)):ku.empty(),m=d.fields.map(([_,S])=>new ua(st.fromServerFormat(_),S));return new pa(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:oe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Tu(e),s=ta(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,c=>s.put(Yx(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return R.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?R.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,n,r,i){return ea(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return ea(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=ea(e),s=new Ae(_i);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Ds(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ae(_i),i=this.Vn(n,e);if(i==null)return r;let s=mw(n);if(s!=null){let o=e.data.field(s.fieldPath);if(ju(o))for(let a of o.arrayValue.values||[])r=r.add(new Ds(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Ds(n.indexId,e.key,Tf,i));return r}bn(e,n,r,i,s){k("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,d,f,g){let m=c.getIterator(),_=l.getIterator(),S=Jo(m),D=Jo(_);for(;S||D;){let P=!1,L=!1;if(S&&D){let V=d(S,D);V<0?L=!0:V>0&&(P=!0)}else S!=null?L=!0:P=!0;P?(f(D),D=Jo(_)):L?(g(S),S=Jo(m)):(S=Jo(m),D=Jo(_))}}(i,s,_i,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),R.waitFor(o)}yn(e){let n=1;return ta(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>_i(o,a)).filter((o,a,c)=>!a||_i(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=_i(o,e),c=_i(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Tf,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Tf,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,n){return _i(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(rM)}getMinOffset(e,n){return R.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||W())).next(rM)}};function nM(t){return ot(t,"collectionParents")}function ea(t){return ot(t,"indexEntries")}function Tu(t){return ot(t,"indexConfiguration")}function ta(t){return ot(t,"indexState")}function rM(t){Y(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;lI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pn(e.readTime,e.documentKey,n)}var iM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function DN(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{Y(a===1)}));let l=[];for(let d of n.mutations){let f=MM(e,d.key.path,n.batchId);s.push(i.delete(f)),l.push(d.key)}return R.waitFor(s).next(()=>l)}function ep(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw W();e=t.noDocument}return JSON.stringify(e).length}fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);var tp=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Y(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=aa(e),o=wi(e);return o.add({}).next(a=>{Y(typeof a=="number");let c=new Bu(a,n,r,i),l=function(m,_,S){let D=S.baseMutations.map(L=>Gu(m.ct,L)),P=S.mutations.map(L=>Gu(m.ct,L));return{userId:_,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:D,mutations:P}}(this.serializer,this.userId,c),d=[],f=new Ae((g,m)=>oe(g.canonicalString(),m.canonicalString()));for(let g of i){let m=MM(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,fH))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),R.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return wi(e).get(n).next(r=>r?(Y(r.userId===this.userId),Es(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?R.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return wi(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(Y(a.batchId>=r),s=Es(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return wi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wi(e).U("userMutationsIndex",n).next(r=>r.map(i=>Es(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Af(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return aa(e).J({range:i},(o,a,c)=>{let[l,d,f]=o,g=Yn(d);if(l===this.userId&&n.path.isEqual(g))return wi(e).get(f).next(m=>{if(!m)throw W();Y(m.userId===this.userId),s.push(Es(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(oe),i=[];return n.forEach(s=>{let o=Af(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=aa(e).J({range:a},(l,d,f)=>{let[g,m,_]=l,S=Yn(m);g===this.userId&&s.path.isEqual(S)?r=r.add(_):f.done()});i.push(c)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Af(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ae(oe);return aa(e).J({range:o},(c,l,d)=>{let[f,g,m]=c,_=Yn(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(wi(e).get(s).next(o=>{if(o===null)throw W();Y(o.userId===this.userId),r.push(Es(this.serializer,o))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return DN(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return aa(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Yn(s[1]);i.push(c)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,n){return TN(e,this.userId,n)}Nn(e){return bN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function TN(t,e,n){let r=Af(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return aa(t).J({range:s,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function wi(t){return ot(t,"mutations")}function aa(t){return ot(t,"documentMutations")}function bN(t){return ot(t,"mutationQueues")}var Ia=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var tE=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new Ia(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Z.fromTimestamp(new Qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>na(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return na(e).J((o,a)=>{let c=Au(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(s)).next(()=>i)}forEachTarget(e,n){return na(e).J((r,i)=>{let s=Au(i);n(s)})}qn(e){return sM(e).get("targetGlobalKey").next(n=>(Y(n!==null),n))}Qn(e,n){return sM(e).put("targetGlobalKey",n)}Kn(e,n){return na(e).put(wN(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Rs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return na(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Au(a);sl(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Ei(e);return n.forEach(o=>{let a=jt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),R.waitFor(i)}removeMatchingKeys(e,n,r){let i=Ei(e);return R.forEach(n,s=>{let o=jt(s.path);return R.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Ei(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ei(e),s=ue();return i.J({range:r,H:!0},(o,a,c)=>{let l=Yn(o[1]),d=new $(l);s=s.add(d)}).next(()=>s)}containsKey(e,n){let r=jt(n.path),i=IDBKeyRange.bound([r],[bM(r)],!1,!0),s=0;return Ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,n){return na(e).get(n).next(r=>r?Au(r):null)}};function na(t){return ot(t,"targets")}function sM(t){return ot(t,"targetGlobal")}function Ei(t){return ot(t,"targetDocuments")}function oM([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var nE=class{constructor(e){this.Un=e,this.buffer=new Ae(oM),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();oM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},rE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Li(n)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Fi(n)}yield this.Hn(3e5)}))}},iE=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(rn.oe);let r=new nE(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(iM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iM):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ra()<=Pn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function cq(t,e){return new iE(t,e)}var sE=class{constructor(e,n){this.db=e,this.garbageCollector=cq(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return bf(e,r)}removeReference(e,n,r){return bf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return bf(e,n)}nr(e,n){return function(i,s){let o=!1;return bN(i).Y(a=>TN(i,a,s).next(c=>(c&&(o=!0),R.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=n){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Z.min()),Ei(e).delete(function(f){return[0,jt(f.path)]}(o))))});i.push(c)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return bf(e,n)}tr(e,n){let r=Ei(e),i,s=rn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==rn.oe&&n(new $(Yn(i)),s),s=l,i=c):s=rn.oe}).next(()=>{s!==rn.oe&&n(new $(Yn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function bf(t,e){return Ei(t).put(function(r,i){return{targetId:0,path:jt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var np=class{constructor(){this.changes=new ir(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var oE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vs(e).put(r)}removeEntry(e,n,r){return vs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Yf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=rt.newInvalidDocument(n);return vs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bu(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:rt.newInvalidDocument(n)};return vs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bu(n))},(i,s)=>{r={document:this.ir(n,s),size:ep(s)}}).next(()=>r)}getEntries(e,n){let r=Kt();return this._r(e,n,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Kt(),i=new ke($.comparator);return this._r(e,n,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,ep(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return R.resolve();let i=new Ae(uM);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(bu(i.first()),bu(i.last())),o=i.getIterator(),a=o.getNext();return vs(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let f=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&uM(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(bu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Yf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vs(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=Kt();for(let f of l){let g=this.ir($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(al(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Kt(),o=cM(n,r),a=cM(n,pn.max());return vs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let f=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new aE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return aM(e).get("remoteDocumentGlobalKey").next(n=>(Y(!!n),n))}rr(e,n){return aM(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=sq(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return rt.newInvalidDocument(e)}};function CN(t){return new oE(t)}var aE=class extends np{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ir(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ae((s,o)=>oe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=Kx(this.cr.serializer,o);i=i.add(s.path.popLast());let l=ep(c);r+=l-a.size,n.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=Kx(this.cr.serializer,o.convertToNoDocument(Z.min()));n.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),R.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function aM(t){return ot(t,"remoteDocumentGlobal")}function vs(t){return ot(t,"remoteDocumentsV14")}function bu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cM(t,e){let n=e.documentKey.path.toArray();return[t,Yf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uM(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=oe(n[s],r[s]),i)return i;return i=oe(n.length,r.length),i||(i=oe(n[n.length-2],r[r.length-2]),i||oe(n[n.length-1],r[r.length-1]))}var cE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var rp=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mu(r.mutation,i,sn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=Zn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Su();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Zn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Kt(),o=xu(),a=function(){return xu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Nn)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Mu(d.mutation,l,d.mutation.getFieldMask(),Qe.now())):o.set(l.key,sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new cE(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=xu(),i=new ke((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||sn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||ue()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=YM();d.forEach(g=>{if(!s.has(g)){let m=rN(n.get(g),r.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):R.resolve(Zn()),a=-1,c=s;return o.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ue())).next(d=>({batchId:a,changes:QM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Su();return this.indexManager.getCollectionParents(e,s).next(a=>R.forEach(a,c=>{let l=function(f,g){return new Mn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,rt.newInvalidDocument(d)))});let a=Su();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Mu(d.mutation,l,sn.empty(),Qe.now()),al(n,l)&&(a=a.insert(c,l))}),a})}};var uE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return R.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:_I(i.bundledQuery),readTime:Ye(i.readTime)}}(n)),R.resolve()}};var lE=class{constructor(){this.overlays=new ke($.comparator),this.Ir=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Zn();return R.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=Zn(),s=n.length+1,o=new $(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Zn(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Zn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $u(n,r));let s=this.Ir.get(n);s===void 0&&(s=ue(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var dE=class{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var Ku=class{constructor(){this.Tr=new Ae(et.Er),this.dr=new Ae(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new $(new me([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new $(new me([])),r=new et(n,e),i=new et(n,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return $.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||$.comparator(e.key,n.key)}};var hE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ae(et.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Bu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,n){return R.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(oe);return n.forEach(i=>{let s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;$.isDocumentKey(s)||(s=s.child(""));let o=new et(new $(s),0),a=new Ae(oe);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),R.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Y(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(n.mutations,i=>{let s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new et(n,0),i=this.br.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var fE=class{constructor(e){this.Mr=e,this.docs=function(){return new ke($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=Kt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Kt(),o=n.path,a=new $(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||lI(SM(d),r)<=0||(i.has(d.key)||al(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Or(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pE(this)}getSize(e){return R.resolve(this.size)}},pE=class extends np{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var gE=class{constructor(e){this.persistence=e,this.Nr=new ir(n=>Rs(n),sl),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ku,this.targetCount=0,this.kr=Ia.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),R.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Ia(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Kn(n),R.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Br.containsKey(n))}};var ip=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rn(0),this.Kr=!1,this.Kr=!0,this.$r=new dE,this.referenceDelegate=e(this),this.Ur=new gE(this),this.indexManager=new Jw,this.remoteDocumentCache=function(i){return new fE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Qf(n),this.Gr=new uE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new hE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);let i=new mE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},mE=class extends Lf{constructor(e){super(),this.currentSequenceNumber=e}},sp=class t{constructor(e){this.persistence=e,this.Jr=new Ku,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw W()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return R.or([()=>R.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var yE=class{constructor(e){this.serializer=e}O(e,n,r,i){let s=new Vf("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bx,{unique:!0}),c.createObjectStore("documentMutations")}(e),lM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),lM(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bx,{unique:!0});let f=l.store("mutations"),g=d.map(m=>f.put(m));return R.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:bH});l.createIndex("collectionPathOverlayIndex",CH,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",SH,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:pH});l.createIndex("documentKeyIndex",gH),l.createIndex("collectionGroupIndex",mH)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:EH}).createIndex("sequenceNumberIndex",IH,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:DH}).createIndex("documentKeyIndex",TH,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=ep(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>R.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>R.forEach(a,c=>{Y(c.userId===s.userId);let l=Es(this.serializer,c);return DN(e,s.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new me(o),l=function(f){return[0,jt(f)]}(c);s.push(n.get(l).next(d=>d?R.resolve():(f=>n.put({targetId:0,path:jt(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:wH});let r=n.store("collectionParents"),i=new Wu,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:jt(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new me(o);return s(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Yn(a);return s(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let s=Au(i),o=wN(this.serializer,s);return n.put(o)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new $(me.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):W()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=CN(this.serializer),s=new ip(sp.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:ue();Es(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),R.forEach(a,(c,l)=>{let d=new tt(l),f=Zf.lt(this.serializer,d),g=s.getIndexManager(d),m=tp.lt(d,this.serializer,g,s.referenceDelegate);return new rp(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Fu(n,rn.oe),c).next()})})}};function lM(t){t.createObjectStore("targetDocuments",{keyPath:vH}).createIndex("documentTargetsIndex",_H,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yH,{unique:!0}),t.createObjectStore("targetGlobal")}var ow="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vE=class t{constructor(e,n,r,i,s,o,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!t.D())throw new O(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sE(this,i),this.Ai=n+"main",this.serializer=new Qf(c),this.Ri=new bi(this.Ai,this.hi,new yE(this.serializer)),this.$r=new Gw,this.Ur=new tE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CN(this.serializer),this.Gr=new qw,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(M.FAILED_PRECONDITION,ow);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new rn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>x(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>x(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Li(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Cu(e).get("owner").next(n=>R.resolve(this.vi(n)))}Ci(e){return Cf(e).delete(this.clientId)}Fi(){return x(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=ot(n,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):Cu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new O(M.FAILED_PRECONDITION,ow);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&k("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return x(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Fu(e,rn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Cf(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return tp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Zf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){k("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===17?xH:c===16?RH:c===15?hI:c===14?kM:c===13?PM:c===12?AH:c===11?NM:void W()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Fu(a,this.Qr?this.Qr.next():rn.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(M.FAILED_PRECONDITION,AM);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Cu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new O(M.FAILED_PRECONDITION,ow)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cu(e).put("owner",n)}static D(){return bi.D()}bi(e){let n=Cu(e);return n.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;fg()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ke("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ke("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Cu(t){return ot(t,"owner")}function Cf(t){return ot(t,"clientMetadata")}function EI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var _E=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ue(),i=ue();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var wE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var op=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fg()?8:RM(nc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new wE;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ra()<=Pn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(ra()<=Pn.DEBUG&&k("QueryEngine","Query:",ia(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ra()<=Pn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(n))):R.resolve())}Yi(e,n){if(Lx(n))return R.resolve(null);let r=Ut(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qf(n,null,"F"),r=Ut(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,qf(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return Lx(n)||i.isEqual(Z.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?R.resolve(null):(ra()<=Pn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ia(n)),this.rs(e,o,n,CM(i,-1)).next(a=>a))})}ts(e,n){let r=new Ae(WM(e));return n.forEach((i,s)=>{al(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ra()<=Pn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ia(n)),this.Ji.getDocumentsMatchingQuery(e,n,pn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var EE=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ke(oe),this._s=new ir(s=>Rs(s),sl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function SN(t,e,n,r){return new EE(t,e,n,r)}function AN(t,e){return x(this,null,function*(){let n=B(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ue();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function uq(t,e){let n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),m=R.resolve();return g.forEach(_=>{m=m.next(()=>d.getEntry(c,_)).next(S=>{let D=l.docVersions.get(_);Y(D!==null),S.version.compareTo(D)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),d.addEntry(S)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RN(t){let e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lq(t,e){let n=B(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Xe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(S,D,P){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,m,d)&&a.push(n.Ur.updateTargetData(s,m))});let c=Kt(),l=ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(xN(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(Z.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function xN(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Kt();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function dq(t,e){let n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Da(t,e){let n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ea(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Ta(t,e,n){return x(this,null,function*(){let r=B(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Li(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ap(t,e,n){let r=B(t),i=Z.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=B(c),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:ue())).next(a=>(PN(r,GM(e),a),{documents:a,Ts:s})))}function MN(t,e){let n=B(t),r=B(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function NN(t,e){let n=B(t),r=n.us.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,CM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PN(n,e,i),i))}function PN(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function hq(t,e,n,r){return x(this,null,function*(){let i=B(t),s=ue(),o=Kt();for(let l of n){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Da(i,function(d){return Ut(Na(me.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>xN(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function fq(r,i){return x(this,arguments,function*(t,e,n=ue()){let s=yield Da(t,Ut(_I(e.bundledQuery))),o=B(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ye(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(Xe.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,n,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function dM(t,e){return`firestore_clients_${t}_${e}`}function hM(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function aw(t,e){return`firestore_targets_${t}_${e}`}var cp=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new O(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(Ke("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Nu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new O(r.error.code,r.error.message))),s?new t(e,r.state,i):(Ke("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},up=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=mI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=xM(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ke("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},IE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ke("SharedClientState",`Failed to parse online state: ${e}`),null)}},Qu=class{constructor(){this.activeTargetIds=mI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Pu=class{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(oe),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=dM(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Qu),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(dM(this.persistenceKey,r));if(i){let s=up.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let r=this.Ls(n);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(aw(this.persistenceKey,e));if(r){let i=Nu.Rs(e,r);i&&(n=i.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aw(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return k("SharedClientState","READ",e,n),n}setItem(e,n){k("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(k("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Gs(n.key);return this.zs(r,null)}{let r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){let r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){let r=function(s){let o=rn.oe;if(s!=null)try{let a=JSON.parse(s);Y(typeof a=="number"),o=a}catch(a){Ke("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==rn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){let r=this.Xs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){let i=new cp(this.currentUser,e,n,r),s=hM(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let n=hM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){let i=aw(this.persistenceKey,e),s=new Nu(e,n,r);this.setItem(i,s.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let r=this.Gs(e);return up.Rs(r,n)}Hs(e,n){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return cp.Rs(new tt(s),i,n)}Ys(e,n){let r=this.Ms.exec(e),i=Number(r[1]);return Nu.Rs(i,n)}Ls(e){return IE.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=mI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},lp=class{constructor(){this.so=new Qu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Qu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DE=class{_o(e){}shutdown(){}};var dp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sf=null;function cw(){return Sf===null?Sf=function(){return 268435456+Math.round(2147483648*Math.random())}():Sf++,"0x"+Sf.toString(16)}var pq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var TE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ct="WebChannelConnection",bE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=cw(),c=this.xo(n,r.toUriEncodedString());k("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>(k("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw tr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=pq[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=cw();return new Promise((o,a)=>{let c=new J_;c.setWithCredentials(!0),c.listenOnce(tw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Iu.NO_ERROR:let d=c.getResponseJson();k(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Iu.TIMEOUT:k(Ct,`RPC '${e}' ${s} timed out`),a(new O(M.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:let f=c.getStatus();if(k(Ct,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let _=function(D){let P=D.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(P)>=0?P:M.UNKNOWN}(m.status);a(new O(_,m.message))}else a(new O(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new O(M.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{k(Ct,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);k(Ct,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=cw(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iw(),a=rw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new ew({})),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");k(Ct,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,m=!1,_=new TE({Io:D=>{m?k(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(k(Ct,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),k(Ct,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},To:()=>f.close()}),S=(D,P,L)=>{D.listen(P,V=>{try{L(V)}catch(j){setTimeout(()=>{throw j},0)}})};return S(f,Xo.EventType.OPEN,()=>{m||(k(Ct,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),S(f,Xo.EventType.CLOSE,()=>{m||(m=!0,k(Ct,`RPC '${e}' stream ${i} transport closed`),_.So())}),S(f,Xo.EventType.ERROR,D=>{m||(m=!0,tr(Ct,`RPC '${e}' stream ${i} transport errored:`,D),_.So(new O(M.UNAVAILABLE,"The operation could not be completed")))}),S(f,Xo.EventType.MESSAGE,D=>{var P;if(!m){let L=D.data[0];Y(!!L);let V=L,j=V.error||((P=V[0])===null||P===void 0?void 0:P.error);if(j){k(Ct,`RPC '${e}' stream ${i} received error:`,j);let ee=j.status,H=function(w){let T=Je[w];if(T!==void 0)return oN(T)}(ee),I=j.message;H===void 0&&(H=M.INTERNAL,I="Unknown error status: "+ee+" with message "+j.message),m=!0,_.So(new O(H,I)),f.close()}else k(Ct,`RPC '${e}' stream ${i} received:`,L),_.bo(L)}}),S(a,nw.STAT_EVENT,D=>{D.stat===Df.PROXY?k(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Df.NOPROXY&&k(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function kN(){return typeof window<"u"?window:null}function Nf(){return typeof document<"u"?document:null}function cl(t){return new Uw(t,!0)}var Yu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var hp=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yu(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return x(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return x(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return x(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Ke(n.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new O(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>x(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},CE=class extends hp{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=XH(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Ye(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=zw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=zf(c)?{documents:pN(s,c)}:{query:gN(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cN(s,o.resumeToken);let l=Bw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=wa(s,o.snapshotVersion.toTimestamp());let l=Bw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=eq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=zw(this.serializer),n.removeTarget=e,this.a_(n)}},SE=class extends hp{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=JH(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=zw(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Gu(this.serializer,r))};this.a_(n)}};var AE=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,$w(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,$w(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},RE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ke(n),this.D_=!1):k("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var xE=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>x(this,null,function*(){Vi(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return x(this,null,function*(){let l=B(c);l.L_.add(4),yield Pa(l),l.q_.set("Unknown"),l.L_.delete(4),yield ul(l)})}(this))}))}),this.q_=new RE(r,i)}};function ul(t){return x(this,null,function*(){if(Vi(t))for(let e of t.B_)yield e(!0)})}function Pa(t){return x(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Np(t,e){let n=B(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),TI(n)?DI(n):Oa(n).r_()&&II(n,e))}function ba(t,e){let n=B(t),r=Oa(n);n.N_.delete(e),r.r_()&&ON(n,e),n.N_.size===0&&(r.r_()?r.o_():Vi(n)&&n.q_.set("Unknown"))}function II(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oa(t).A_(e)}function ON(t,e){t.Q_.xe(e),Oa(t).R_(e)}function DI(t){t.Q_=new jw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oa(t).start(),t.q_.v_()}function TI(t){return Vi(t)&&!Oa(t).n_()&&t.N_.size>0}function Vi(t){return B(t).L_.size===0}function FN(t){t.Q_=void 0}function gq(t){return x(this,null,function*(){t.q_.set("Online")})}function mq(t){return x(this,null,function*(){t.N_.forEach((e,n)=>{II(t,e)})})}function yq(t,e){return x(this,null,function*(){FN(t),TI(t)?(t.q_.M_(e),DI(t)):t.q_.set("Unknown")})}function vq(t,e,n){return x(this,null,function*(){if(t.q_.set("Online"),e instanceof Wf&&e.state===2&&e.cause)try{yield function(i,s){return x(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fp(t,r)}else if(e instanceof da?t.Q_.Ke(e):e instanceof Gf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{let r=yield RN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Xe.EMPTY_BYTE_STRING,d.snapshotVersion)),ON(s,c);let f=new Ea(d.target,c,l,d.sequenceNumber);II(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield fp(t,r)}})}function fp(t,e,n){return x(this,null,function*(){if(!Li(e))throw e;t.L_.add(1),yield Pa(t),t.q_.set("Offline"),n||(n=()=>RN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield ul(t)}))})}function LN(t,e){return e().catch(n=>fp(t,n,e))}function ka(t){return x(this,null,function*(){let e=B(t),n=Ni(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_q(e);)try{let i=yield dq(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,wq(e,i)}catch(i){yield fp(e,i)}VN(e)&&jN(e)})}function _q(t){return Vi(t)&&t.O_.length<10}function wq(t,e){t.O_.push(e);let n=Ni(t);n.r_()&&n.V_&&n.m_(e.mutations)}function VN(t){return Vi(t)&&!Ni(t).n_()&&t.O_.length>0}function jN(t){Ni(t).start()}function Eq(t){return x(this,null,function*(){Ni(t).p_()})}function Iq(t){return x(this,null,function*(){let e=Ni(t);for(let n of t.O_)e.m_(n.mutations)})}function Dq(t,e,n){return x(this,null,function*(){let r=t.O_.shift(),i=Fw.from(r,e,n);yield LN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ka(t)})}function Tq(t,e){return x(this,null,function*(){e&&Ni(t).V_&&(yield function(r,i){return x(this,null,function*(){if(function(o){return sN(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Ni(r).s_(),yield LN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ka(r)}})}(t,e)),VN(t)&&jN(t)})}function fM(t,e){return x(this,null,function*(){let n=B(t);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Vi(n);n.L_.add(3),yield Pa(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield ul(n)})}function ME(t,e){return x(this,null,function*(){let n=B(t);e?(n.L_.delete(2),yield ul(n)):e||(n.L_.add(2),yield Pa(n),n.q_.set("Unknown"))})}function Oa(t){return t.K_||(t.K_=function(n,r,i){let s=B(n);return s.w_(),new CE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:gq.bind(null,t),Ro:mq.bind(null,t),mo:yq.bind(null,t),d_:vq.bind(null,t)}),t.B_.push(e=>x(this,null,function*(){e?(t.K_.s_(),TI(t)?DI(t):t.q_.set("Unknown")):(yield t.K_.stop(),FN(t))}))),t.K_}function Ni(t){return t.U_||(t.U_=function(n,r,i){let s=B(n);return s.w_(),new SE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Eq.bind(null,t),mo:Tq.bind(null,t),f_:Iq.bind(null,t),g_:Dq.bind(null,t)}),t.B_.push(e=>x(this,null,function*(){e?(t.U_.s_(),yield ka(t)):(yield t.U_.stop(),t.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var NE=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fa(t,e){if(Ke("AsyncQueue",`${e}: ${t}`),Li(t))return new O(M.UNAVAILABLE,`${e}: ${t}`);throw t}var pp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Su(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var gp=class{constructor(){this.W_=new ke($.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):W():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ca=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,pp.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var PE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},kE=class{constructor(){this.queries=pM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=B(n),s=i.queries;i.queries=pM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new O(M.ABORTED,"Firestore shutting down"))}};function pM(){return new ir(t=>qM(t),ol)}function bI(t,e){return x(this,null,function*(){let n=B(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new PE,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Fa(o,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&SI(n)})}function CI(t,e){return x(this,null,function*(){let n=B(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function bq(t,e){let n=B(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&SI(n)}function Cq(t,e,n){let r=B(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function SI(t){t.Y_.forEach(e=>{e.next()})}var OE,gM;(gM=OE||(OE={})).ea="default",gM.Cache="cache";var Zu=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==OE.Cache}};var FE=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var mp=class{constructor(e){this.serializer=e}Es(e){return Jn(this.serializer,e)}ds(e){return e.metadata.exists?fN(this.serializer,e.document,!1):rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ye(e)}},LE=class{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UN(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,r=new mp(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||ue()).add(s);n.set(o,a)}}return n}complete(){return x(this,null,function*(){let e=yield hq(this.localStore,new mp(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let r of this.queries)yield fq(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function UN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var yp=class{constructor(e){this.key=e}},vp=class{constructor(e){this.key=e}},_p=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=WM(e),this.Ra=new pp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new gp,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=al(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),D=!1;g&&m?g.data.isEqual(m.data)?_!==S&&(r.track({type:3,doc:m}),D=!0):this.ga(g,m)||(r.track({type:2,doc:m}),D=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),D=!0):g&&!m&&(r.track({type:1,doc:g}),D=!0,(c||l)&&(a=!0)),D&&(m?(o=o.add(m),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(m,_){let S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return S(m)-S(_)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Ca(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new yp(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ca.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},VE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},jE=class{constructor(e){this.key=e,this.va=!1}},UE=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ir(a=>qM(a),ol),this.Ma=new Map,this.xa=new Set,this.Oa=new ke($.comparator),this.Na=new Map,this.La=new Ku,this.Ba={},this.ka=new Map,this.qa=Ia.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Sq(t,e,n=!0){return x(this,null,function*(){let r=Pp(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield BN(r,e,n,!0),i})}function Aq(t,e){return x(this,null,function*(){let n=Pp(t);yield BN(n,e,!0,!1)})}function BN(t,e,n,r){return x(this,null,function*(){let i=yield Da(t.localStore,Ut(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield AI(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Np(t.remoteStore,i),a})}function AI(t,e,n,r,i){return x(this,null,function*(){t.Ka=(f,g,m)=>function(S,D,P,L){return x(this,null,function*(){let V=D.view.ma(P);V.ns&&(V=yield ap(S.localStore,D.query,!1).then(({documents:I})=>D.view.ma(I,V)));let j=L&&L.targetChanges.get(D.targetId),ee=L&&L.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(V,S.isPrimaryClient,j,ee);return BE(S,D.targetId,H.wa),H.snapshot})}(t,f,g,m);let s=yield ap(t.localStore,e,!0),o=new _p(e,s.Ts),a=o.ma(s.documents),c=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);BE(t,n,l.wa);let d=new VE(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function Rq(t,e,n){return x(this,null,function*(){let r=B(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ol(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ta(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ba(r.remoteStore,i.targetId),Sa(r,i.targetId)}).catch(Fi))):(Sa(r,i.targetId),yield Ta(r.localStore,i.targetId,!0))})}function xq(t,e){return x(this,null,function*(){let n=B(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ba(n.remoteStore,r.targetId))})}function Mq(t,e,n){return x(this,null,function*(){let r=NI(t);try{let i=yield function(o,a){let c=B(o),l=Qe.now(),d=a.reduce((m,_)=>m.add(_.key),ue()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Kt(),S=ue();return c.cs.getEntries(m,d).next(D=>{_=D,_.forEach((P,L)=>{L.isValidDocument()||(S=S.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(D=>{f=D;let P=[];for(let L of a){let V=qH(L,f.get(L.key).overlayedDocument);V!=null&&P.push(new Nn(L.key,V,VM(V.value.mapValue),He.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,P,a)}).next(D=>{g=D;let P=D.applyToLocalDocumentSet(f,S);return c.documentOverlayCache.saveOverlays(m,D.batchId,P)})}).then(()=>({batchId:g.batchId,changes:QM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new ke(oe)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ur(r,i.changes),yield ka(r.remoteStore)}catch(i){let s=Fa(i,"Failed to persist write");n.reject(s)}})}function $N(t,e){return x(this,null,function*(){let n=B(t);try{let r=yield lq(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Y(o.va):i.removedDocuments.size>0&&(Y(o.va),o.va=!1))}),yield Ur(n,r,e)}catch(r){yield Fi(r)}})}function mM(t,e,n){let r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=B(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&SI(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Nq(t,e,n){return x(this,null,function*(){let r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new ke($.comparator);o=o.insert(s,rt.newNoDocument(s,Z.min()));let a=ue().add(s),c=new zu(Z.min(),new Map,new ke(oe),o,a);yield $N(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),MI(r)}else yield Ta(r.localStore,e,!1).then(()=>Sa(r,e,n)).catch(Fi)})}function Pq(t,e){return x(this,null,function*(){let n=B(t),r=e.batch.batchId;try{let i=yield uq(n.localStore,e);xI(n,r,null),RI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ur(n,i)}catch(i){yield Fi(i)}})}function kq(t,e,n){return x(this,null,function*(){let r=B(t);try{let i=yield function(o,a){let c=B(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Y(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);xI(r,e,n),RI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ur(r,i)}catch(i){yield Fi(i)}})}function Oq(t,e){return x(this,null,function*(){let n=B(t);Vi(n.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=B(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){let i=Fa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function RI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xI(t,e,n){let r=B(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Sa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zN(t,r)})}function zN(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(ba(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),MI(t))}function BE(t,e,n){for(let r of n)r instanceof yp?(t.La.addReference(r.key,e),Fq(t,r)):r instanceof vp?(k("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zN(t,r.key)):W()}function Fq(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(k("SyncEngine","New document in limbo: "+n),t.xa.add(r),MI(t))}function MI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new $(me.fromString(e)),r=t.qa.next();t.Na.set(r,new jE(n)),t.Oa=t.Oa.insert(n,r),Np(t.remoteStore,new Ea(Ut(Na(n.path)),r,"TargetPurposeLimboResolution",rn.oe))}}function Ur(t,e,n){return x(this,null,function*(){let r=B(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=_E.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return x(this,null,function*(){let d=B(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>R.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Li(f))throw f;k("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.os.get(g),_=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(g,S)}}})}(r.localStore,s))})}function Lq(t,e){return x(this,null,function*(){let n=B(t);if(!n.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield AN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new O(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ur(n,r.hs)}})}function Vq(t,e){let n=B(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function jq(t,e){return x(this,null,function*(){let n=B(t),r=yield ap(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&BE(n,e.targetId,i.wa),i})}function Uq(t,e){return x(this,null,function*(){let n=B(t);return NN(n.localStore,e).then(r=>Ur(n,r))})}function Bq(t,e,n,r){return x(this,null,function*(){let i=B(t),s=yield function(a,c){let l=B(a),d=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield ka(i.remoteStore):n==="acknowledged"||n==="rejected"?(xI(i,e,r||null),RI(i,e),function(a,c){B(B(a).mutationQueue).On(c)}(i.localStore,e)):W(),yield Ur(i,s)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function $q(t,e){return x(this,null,function*(){let n=B(t);if(Pp(n),NI(n),e===!0&&n.Qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield yM(n,r.toArray());n.Qa=!0,yield ME(n.remoteStore,!0);for(let s of i)Np(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){let r=[],i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Sa(n,o),Ta(n.localStore,o,!0))),ba(n.remoteStore,o)}),yield i,yield yM(n,r),function(o){let a=B(o);a.Na.forEach((c,l)=>{ba(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ke($.comparator)}(n),n.Qa=!1,yield ME(n.remoteStore,!1)}})}function yM(t,e,n){return x(this,null,function*(){let r=B(t),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield Da(r.localStore,Ut(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield jq(r,d);f.snapshot&&s.push(f.snapshot)}}else{let l=yield MN(r.localStore,o);a=yield Da(r.localStore,l),yield AI(r,HN(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function HN(t){return HM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function zq(t){return function(n){return B(B(n).persistence).Qi()}(B(t).localStore)}function Hq(t,e,n,r){return x(this,null,function*(){let i=B(t);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield NN(i.localStore,GM(s[0])),a=zu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xe.EMPTY_BYTE_STRING);yield Ur(i,o,a);break}case"rejected":yield Ta(i.localStore,e,!0),Sa(i,e,r);break;default:W()}})}function qq(t,e,n){return x(this,null,function*(){let r=Pp(t);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let s=yield MN(r.localStore,i),o=yield Da(r.localStore,s);yield AI(r,HN(s),o.targetId,!1,o.resumeToken),Np(r.remoteStore,o)}for(let i of n)r.Ma.has(i)&&(yield Ta(r.localStore,i,!1).then(()=>{ba(r.remoteStore,i),Sa(r,i)}).catch(Fi))}})}function Pp(t){let e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nq.bind(null,e),e.Ca.d_=bq.bind(null,e.eventManager),e.Ca.$a=Cq.bind(null,e.eventManager),e}function NI(t){let e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kq.bind(null,e),e}function Gq(t,e,n){let r=B(t);(function(s,o,a){return x(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,_){let S=B(m),D=Ye(_.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",P=>S.Gr.getBundleMetadata(P,_.id)).then(P=>!!P&&P.createTime.compareTo(D)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(UN(c));let l=new LE(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield o.Ua()}let f=yield l.complete();return yield Ur(s,f.Ia,void 0),yield function(m,_){let S=B(m);return S.persistence.runTransaction("Save bundle","readwrite",D=>S.Gr.saveBundleMetadata(D,_))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return tr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Xu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){this.serializer=cl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SN(this.persistence,new op,e.initialUser,this.serializer)}createPersistence(e){return new ip(sp.Zr,this.serializer)}createSharedClientState(e){return new lp}terminate(){return x(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var wp=class t extends Xu{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield dg(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield NI(this.Wa.syncEngine),yield ka(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return SN(this.persistence,new op,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new rE(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new ww(n,this.persistence);return new _w(e.asyncQueue,r)}createPersistence(e){let n=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new vE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,kN(),Nf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lp}},$E=class t extends wp{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield dg(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof Pu&&(this.sharedClientState.syncEngine={no:Bq.bind(null,n),ro:Hq.bind(null,n),io:qq.bind(null,n),Qi:zq.bind(null,n),eo:Uq.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>x(this,null,function*(){yield $q(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=kN();if(!Pu.D(n))throw new O(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Ju=class{initialize(e,n){return x(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lq.bind(null,this.syncEngine),yield ME(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new kE}()}createDatastore(e){let n=cl(e.databaseInfo.databaseId),r=function(s){return new bE(s)}(e.databaseInfo);return function(s,o,a,c){return new AE(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new xE(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>mM(this.syncEngine,n,0),function(){return dp.D()?new dp:new DE}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,d){let f=new UE(i,s,o,a,c,l);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return x(this,null,function*(){var e,n;yield function(i){return x(this,null,function*(){let s=B(i);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Pa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function vM(t,e=10240){let n=0;return{read(){return x(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Aa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ke("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var zE=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new nt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ua(){return x(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return x(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);let i=yield this.Xa(r);return new FE(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return x(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return x(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var HE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return x(this,null,function*(){let o=B(i),a={documents:s.map(f=>qu(o.serializer,f))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,me.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{let g=ZH(o.serializer,f);l.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=l.get(f.toString());Y(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=$.fromPath(r);this.mutations.push(new Uu(i,this.precondition(i)))}),yield function(r,i){return x(this,null,function*(){let s=B(r),o={writes:i.map(a=>Gu(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,me.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw W();n=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new O(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?He.exists(!1):He.updateTime(n):He.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new O(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(n)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var qE=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new Yu(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>x(this,null,function*(){let e=new HE(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let n=this.updateFunction(e);return!il(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sN(n)}return!1}};var GE=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>x(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Fa(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pf(t,e){return x(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>x(this,null,function*(){r.isEqual(i)||(yield AN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function WE(t,e){return x(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield PI(t);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fM(e.remoteStore,i)),t._onlineComponents=e})}function qN(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function PI(t){return x(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!qN(n))throw n;tr("Error using user provided cache. Falling back to memory cache: "+n),yield Pf(t,new Xu)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Pf(t,new Xu);return t._offlineComponents})}function kp(t){return x(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield WE(t,t._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield WE(t,new Ju))),t._onlineComponents})}function GN(t){return PI(t).then(e=>e.persistence)}function kI(t){return PI(t).then(e=>e.localStore)}function WN(t){return kp(t).then(e=>e.remoteStore)}function OI(t){return kp(t).then(e=>e.syncEngine)}function Wq(t){return kp(t).then(e=>e.datastore)}function Ra(t){return x(this,null,function*(){let e=yield kp(t),n=e.eventManager;return n.onListen=Sq.bind(null,e.syncEngine),n.onUnlisten=Rq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Aq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xq.bind(null,e.syncEngine),n})}function Kq(t){return t.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield GN(t),n=yield WN(t);return e.setNetworkEnabled(!0),function(i){let s=B(i);return s.L_.delete(0),ul(s)}(n)}))}function Qq(t){return t.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield GN(t),n=yield WN(t);return e.setNetworkEnabled(!1),function(i){return x(this,null,function*(){let s=B(i);s.L_.add(0),yield Pa(s),s.q_.set("Offline")})}(n)}))}function Yq(t,e){let n=new nt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,s,o){return x(this,null,function*(){try{let a=yield function(l,d){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new O(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Fa(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield kI(t),e,n)})),n.promise}function KN(t,e,n={}){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,c,l){let d=new Aa({next:g=>{o.enqueueAndForget(()=>CI(s,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new O(M.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Zu(Na(a.path),d,{includeMetadataChanges:!0,_a:!0});return bI(s,f)}(yield Ra(t),t.asyncQueue,e,n,r)})),r.promise}function Zq(t,e){let n=new nt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,s,o){return x(this,null,function*(){try{let a=yield ap(i,s,!0),c=new _p(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=Fa(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield kI(t),e,n)})),n.promise}function QN(t,e,n={}){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,c,l){let d=new Aa({next:g=>{o.enqueueAndForget(()=>CI(s,f)),g.fromCache&&c.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Zu(a,d,{includeMetadataChanges:!0,_a:!0});return bI(s,f)}(yield Ra(t),t.asyncQueue,e,n,r)})),r.promise}function Xq(t,e){let n=new Aa(e);return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,s){B(i).Y_.add(s),s.next()}(yield Ra(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,s){B(i).Y_.delete(s)}(yield Ra(t),n)}))}}function Jq(t,e,n,r){let i=function(o,a){let c;return c=typeof o=="string"?aN().encode(o):o,function(d,f){return new zE(d,f)}(function(d,f){if(d instanceof Uint8Array)return vM(d,f);if(d instanceof ArrayBuffer)return vM(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,cl(e));t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){Gq(yield OI(t),i,r)}))}function e9(t,e){return t.asyncQueue.enqueue(()=>x(this,null,function*(){return function(r,i){let s=B(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield kI(t),e)}))}function YN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var _M=new Map;function FI(t,e,n){if(!n)throw new O(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function t9(t,e,n,r){if(e===!0&&r===!0)throw new O(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wM(t){if(!$.isDocumentKey(t))throw new O(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EM(t){if($.isDocumentKey(t))throw new O(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function _e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Op(t);throw new O(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZN(t,e){if(e<=0)throw new O(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Ep=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ps=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ep({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ep(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uw;switch(r.type){case"firstParty":return new fw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=_M.get(n);r&&(k("ComponentProvider","Removing Datastore"),_M.delete(n),r.terminate())}(this),Promise.resolve()}};function n9(t,e,n,r={}){var i;let s=(t=_e(t,Ps))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=tt.MOCK_USER;else{a=Rl(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new tt(l)}t._authCredentials=new lw(new kf(a,c))}}var gt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ze=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},er=class t extends gt{constructor(e,n,r){super(e,n,Na(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function GX(t,e,...n){if(t=we(t),FI("collection","path",e),t instanceof Ps){let r=me.fromString(e,...n);return EM(r),new er(t,null,r)}{if(!(t instanceof Ze||t instanceof er))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return EM(r),new er(t.firestore,null,r)}}function WX(t,e){if(t=_e(t,Ps),FI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gt(t,null,function(r){return new Mn(me.emptyPath(),r)}(e))}function r9(t,e,...n){if(t=we(t),arguments.length===1&&(e=Of.newId()),FI("doc","path",e),t instanceof Ps){let r=me.fromString(e,...n);return wM(r),new Ze(t,null,new $(r))}{if(!(t instanceof Ze||t instanceof er))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return wM(r),new Ze(t.firestore,t instanceof er?t.converter:null,new $(r))}}function KX(t,e){return t=we(t),e=we(e),(t instanceof Ze||t instanceof er)&&(e instanceof Ze||e instanceof er)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function i9(t,e){return t=we(t),e=we(e),t instanceof gt&&e instanceof gt&&t.firestore===e.firestore&&ol(t._query,e._query)&&t.converter===e.converter}var KE=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Yu(this,"async_queue_retry"),this.Eu=()=>{let n=Nf();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Nf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new nt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return x(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Li(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ke("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=NE.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&W()}verifyOperationInProgress(){}mu(){return x(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function QE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var YE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var QX=-1,Le=class extends Ps{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new KE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XN(this),this._firestoreClient.terminate()}};function YX(t,e){let n=typeof t=="object"?t:zs(),r=typeof t=="string"?t:e||"(default)",i=rc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Al("firestore");s&&n9(i,...s)}return i}function mt(t){return t._firestoreClient||XN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function XN(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new Ew(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,YN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new GE(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ZX(t,e){eP(t=_e(t,Le));let n=mt(t);if(n._uninitializedComponentsProvider)throw new O(M.FAILED_PRECONDITION,"SDK cache is already specified.");tr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Ju;return JN(n,i,new wp(i,r.cacheSizeBytes,e?.forceOwnership))}function XX(t){eP(t=_e(t,Le));let e=mt(t);if(e._uninitializedComponentsProvider)throw new O(M.FAILED_PRECONDITION,"SDK cache is already specified.");tr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Ju;return JN(e,r,new $E(r,n.cacheSizeBytes))}function JN(t,e,n){let r=new nt;return t.asyncQueue.enqueue(()=>x(this,null,function*(){try{yield Pf(t,n),yield WE(t,e),r.resolve()}catch(i){let s=i;if(!qN(s))throw s;tr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function JX(t){if(t._initialized&&!t._terminated)throw new O(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new nt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(r){return x(this,null,function*(){if(!bi.D())return Promise.resolve();let i=r+"main";yield bi.delete(i)})}(EI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function eJ(t){return function(n){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Oq(yield OI(n),r)})),r.promise}(mt(t=_e(t,Le)))}function tJ(t){return Kq(mt(t=_e(t,Le)))}function nJ(t){return Qq(mt(t=_e(t,Le)))}function rJ(t,e){let n=mt(t=_e(t,Le)),r=new YE;return Jq(n,t._databaseId,e,r),r}function iJ(t,e){return e9(mt(t=_e(t,Le)),e).then(n=>n?new gt(t,null,n.query):null)}function eP(t){if(t._initialized||t._terminated)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Xe.fromBase64String(e))}catch(n){throw new O(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Pi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Vr=class{constructor(e){this._methodName=e}};var el=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var tl=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var s9=/^__.*__$/,ZE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nn(e,this.data,this.fieldMask,n,this.fieldTransforms):new xi(e,this.data,n,this.fieldTransforms)}},Ip=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function tP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var Dp=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Tp(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(tP(this.wu)&&s9.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},XE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cl(e)}Nu(e,n,r,i=!1){return new Dp({wu:e,methodName:n,Ou:r,path:st.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ls(t){let e=t._freezeSettings(),n=cl(t._databaseId);return new XE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fp(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);jI("Data must be an object, but it was:",o,r);let a=iP(r,o),c,l;if(s.merge)c=new sn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=rI(e,f,n);if(!o.contains(g))throw new O(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);oP(d,g)||d.push(g)}c=new sn(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new ZE(new St(a),c,l)}var nl=class t extends Vr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function nP(t,e,n){return new Dp({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var JE=class t extends Vr{_toFieldTransform(e){return new xs(e.path,new Ai)}isEqual(e){return e instanceof t}},eI=class t extends Vr{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=nP(this,e,!0),r=this.Lu.map(s=>Vs(s,n)),i=new Fr(r);return new xs(e.path,i)}isEqual(e){return e instanceof t&&pg(this.Lu,e.Lu)}},tI=class t extends Vr{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=nP(this,e,!0),r=this.Lu.map(s=>Vs(s,n)),i=new Lr(r);return new xs(e.path,i)}isEqual(e){return e instanceof t&&pg(this.Lu,e.Lu)}},nI=class t extends Vr{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new Ri(e.serializer,XM(e.serializer,this.Bu));return new xs(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function LI(t,e,n,r){let i=t.Nu(1,e,n);jI("Data must be an object, but it was:",i,r);let s=[],o=St.empty();Fs(r,(c,l)=>{let d=UI(e,c,n);l=we(l);let f=i.Cu(d);if(l instanceof nl)s.push(d);else{let g=Vs(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new sn(s);return new Ip(o,a,i.fieldTransforms)}function VI(t,e,n,r,i,s){let o=t.Nu(1,e,n),a=[rI(e,r,n)],c=[i];if(s.length%2!=0)throw new O(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(rI(e,s[g])),c.push(s[g+1]);let l=[],d=St.empty();for(let g=a.length-1;g>=0;--g)if(!oP(l,a[g])){let m=a[g],_=c[g];_=we(_);let S=o.Cu(m);if(_ instanceof nl)l.push(m);else{let D=Vs(_,S);D!=null&&(l.push(m),d.set(m,D))}}let f=new sn(l);return new Ip(d,f,o.fieldTransforms)}function rP(t,e,n,r=!1){return Vs(n,t.Nu(r?4:3,e))}function Vs(t,e){if(sP(t=we(t)))return jI("Unsupported field value:",e,t),iP(t,e);if(t instanceof Vr)return function(r,i){if(!tP(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Vs(a,i.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=we(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Qe.fromDate(r);return{timestampValue:wa(i.serializer,s)}}if(r instanceof Qe){let s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wa(i.serializer,s)}}if(r instanceof el)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xa)return{bytesValue:cN(i.serializer,r._byteString)};if(r instanceof Ze){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof tl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return yI(a.serializer,c)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Op(r)}`)}(t,e)}function iP(t,e){let n={};return OM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,i)=>{let s=Vs(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof el||t instanceof xa||t instanceof Ze||t instanceof Vr||t instanceof tl)}function jI(t,e,n){if(!sP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Op(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function rI(t,e,n){if((e=we(e))instanceof Pi)return e._internalPath;if(typeof e=="string")return UI(t,e);throw Tp("Field path arguments must be of type string or ",t,!1,void 0,n)}var o9=new RegExp("[~\\*/\\[\\]]");function UI(t,e,n){if(e.search(o9)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pi(...e.split("."))._internalPath}catch{throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tp(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new O(M.INVALID_ARGUMENT,a+t+c)}function oP(t,e){return t.some(n=>n.isEqual(e))}var ks=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Lp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iI=class extends ks{data(){return super.data()}};function Lp(t,e){return typeof e=="string"?UI(t,e):e instanceof Pi?e._internalPath:e._delegate._internalPath}function aP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rl=class{},Os=class extends rl{};function sJ(t,e,...n){let r=[];e instanceof rl&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof sI).length,a=s.filter(c=>c instanceof bp).length;if(o>1||o>0&&a>0)throw new O(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var bp=class t extends Os{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return uP(e._query,n),new gt(e.firestore,e.converter,kw(e._query,n))}_parse(e){let n=Ls(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new O(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DM(f,d);let m=[];for(let _ of f)m.push(IM(c,s,_));g={arrayValue:{values:m}}}else g=IM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DM(f,d),g=rP(a,o,f,d==="in"||d==="not-in");return pe.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function oJ(t,e,n){let r=e,i=Lp("where",t);return bp._create(i,r,n)}var sI=class t extends rl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:be.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)uP(o,c),o=kw(o,c)}(e._query,n),new gt(e.firestore,e.converter,kw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var oI=class t extends Os{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new As(s,o)}(e._query,this._field,this._direction);return new gt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Mn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function aJ(t,e="asc"){let n=e,r=Lp("orderBy",t);return oI._create(r,n)}var Cp=class t extends Os{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new gt(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}};function cJ(t){return ZN("limit",t),Cp._create("limit",t,"F")}function uJ(t){return ZN("limitToLast",t),Cp._create("limitToLast",t,"L")}var Sp=class t extends Os{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=cP(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,s){return new Mn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function lJ(...t){return Sp._create("startAt",t,!0)}function dJ(...t){return Sp._create("startAfter",t,!1)}var Ap=class t extends Os{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=cP(e,this.type,this._docOrFields,this._inclusive);return new gt(e.firestore,e.converter,function(i,s){return new Mn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function hJ(...t){return Ap._create("endBefore",t,!1)}function fJ(...t){return Ap._create("endAt",t,!0)}function cP(t,e,n,r){if(n[0]=we(n[0]),n[0]instanceof ks)return function(s,o,a,c,l){if(!c)throw new O(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of la(s))if(f.field.isKeyField())d.push(Ss(o,c.key));else{let g=c.data.field(f.field);if(xp(g))throw new O(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new O(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new rr(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Ls(t.firestore);return function(o,a,c,l,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new O(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let _=0;_<d.length;_++){let S=d[_];if(g[_].field.isKeyField()){if(typeof S!="string")throw new O(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!gI(o)&&S.indexOf("/")!==-1)throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let D=o.path.child(me.fromString(S));if(!$.isDocumentKey(D))throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);let P=new $(D);m.push(Ss(a,P))}else{let D=rP(c,l,S);m.push(D)}}return new rr(m,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function IM(t,e,n){if(typeof(n=we(n))=="string"){if(n==="")throw new O(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gI(e)&&n.indexOf("/")!==-1)throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!$.isDocumentKey(r))throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ss(t,new $(r))}if(n instanceof Ze)return Ss(t,n._key);throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Op(n)}.`)}function DM(t,e){if(!Array.isArray(t)||t.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uP(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Rp=class{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new tl(s)}convertGeoPoint(e){return new el(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=fI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){let n=Or(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);Y(_N(r));let i=new ga(r.get(1),r.get(3)),s=new $(r.popFirst(5));return i.isEqual(n)||Ke(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Vp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var aI=class extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}};var kr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ki=class extends ks{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Lp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ha=class extends ki{data(e={}){return super.data(e)}},Oi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new kr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ha(this._firestore,this._userDataWriter,r.key,r,new kr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:a9(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function a9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function pJ(t,e){return t instanceof ki&&e instanceof ki?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Oi&&e instanceof Oi&&t._firestore===e._firestore&&i9(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function gJ(t){t=_e(t,Ze);let e=_e(t.firestore,Le);return KN(mt(e),t._key).then(n=>BI(e,t,n))}var jr=class extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}};function mJ(t){t=_e(t,Ze);let e=_e(t.firestore,Le),n=mt(e),r=new jr(e);return Yq(n,t._key).then(i=>new ki(e,r,t._key,i,new kr(i!==null&&i.hasLocalMutations,!0),t.converter))}function yJ(t){t=_e(t,Ze);let e=_e(t.firestore,Le);return KN(mt(e),t._key,{source:"server"}).then(n=>BI(e,t,n))}function vJ(t){t=_e(t,gt);let e=_e(t.firestore,Le),n=mt(e),r=new jr(e);return aP(t._query),QN(n,t._query).then(i=>new Oi(e,r,t,i))}function _J(t){t=_e(t,gt);let e=_e(t.firestore,Le),n=mt(e),r=new jr(e);return Zq(n,t._query).then(i=>new Oi(e,r,t,i))}function wJ(t){t=_e(t,gt);let e=_e(t.firestore,Le),n=mt(e),r=new jr(e);return QN(n,t._query,{source:"server"}).then(i=>new Oi(e,r,t,i))}function EJ(t,e,n){t=_e(t,Ze);let r=_e(t.firestore,Le),i=Vp(t.converter,e,n);return jp(r,[Fp(Ls(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,He.none())])}function IJ(t,e,n,...r){t=_e(t,Ze);let i=_e(t.firestore,Le),s=Ls(i),o;return o=typeof(e=we(e))=="string"||e instanceof Pi?VI(s,"updateDoc",t._key,e,n,r):LI(s,"updateDoc",t._key,e),jp(i,[o.toMutation(t._key,He.exists(!0))])}function DJ(t){return jp(_e(t.firestore,Le),[new Mi(t._key,He.none())])}function TJ(t,e){let n=_e(t.firestore,Le),r=r9(t),i=Vp(t.converter,e);return jp(n,[Fp(Ls(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function bJ(t,...e){var n,r,i;t=we(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||QE(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(QE(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof Ze)l=_e(t.firestore,Le),d=Na(t._key.path),c={next:f=>{e[o]&&e[o](BI(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=_e(t,gt);l=_e(f.firestore,Le),d=f._query;let g=new jr(l);c={next:m=>{e[o]&&e[o](new Oi(l,g,f,m))},error:e[o+1],complete:e[o+2]},aP(t._query)}return function(g,m,_,S){let D=new Aa(S),P=new Zu(m,D,_);return g.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return bI(yield Ra(g),P)})),()=>{D.za(),g.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return CI(yield Ra(g),P)}))}}(mt(l),d,a,c)}function CJ(t,e){return Xq(mt(t=_e(t,Le)),QE(e)?e:{next:e})}function jp(t,e){return function(r,i){let s=new nt;return r.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Mq(yield OI(r),i,s)})),s.promise}(mt(t),e)}function BI(t,e,n){let r=n.docs.get(e._key),i=new jr(t);return new ki(t,i,e._key,r,new kr(n.hasPendingWrites,n.fromCache),e.converter)}var c9={maxAttempts:5};var TM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ls(e)}set(e,n,r){this._verifyNotCommitted();let i=Ii(e,this._firestore),s=Vp(i.converter,n,r),o=Fp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,He.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Ii(e,this._firestore),o;return o=typeof(n=we(n))=="string"||n instanceof Pi?VI(this._dataReader,"WriteBatch.update",s._key,n,r,i):LI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ii(e,this._firestore);return this._mutations=this._mutations.concat(new Mi(n._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ii(t,e){if((t=we(t)).firestore!==e)throw new O(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cI=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ls(n)}get(n){let r=Ii(n,this._firestore),i=new aI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return W();let o=s[0];if(o.isFoundDocument())return new ks(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ks(this._firestore,i,r._key,null,r.converter);throw W()})}set(n,r,i){let s=Ii(n,this._firestore),o=Vp(s.converter,r,i),a=Fp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Ii(n,this._firestore),a;return a=typeof(r=we(r))=="string"||r instanceof Pi?VI(this._dataReader,"Transaction.update",o._key,r,i,s):LI(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Ii(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ii(e,this._firestore),r=new jr(this._firestore);return super.get(e).then(i=>new ki(this._firestore,r,n._key,i._document,new kr(!1,!1),n.converter))}};function AJ(t,e,n){t=_e(t,Le);let r=Object.assign(Object.assign({},c9),n);return function(s){if(s.maxAttempts<1)throw new O(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new nt;return s.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let l=yield Wq(s);new qE(s.asyncQueue,l,a,o,c).ru()})),c.promise}(mt(t),i=>e(new cI(t,i)),r)}function RJ(){return new nl("deleteField")}function xJ(){return new JE("serverTimestamp")}function MJ(...t){return new eI("arrayUnion",t)}function NJ(...t){return new tI("arrayRemove",t)}function PJ(t){return new nI("increment",t)}(function(e,n=!0){(function(i){Ma=i})(Pl),zi(new cr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Le(new dw(r.getProvider("auth-internal")),new gw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Bt(Ix,"4.7.1",e),Bt(Ix,"4.7.1","esm2017")})();export{Be as a,ae as b,Ys as c,qe as d,dt as e,uc as f,qr as g,lr as h,Gr as i,Ee as j,J as k,to as l,Pg as m,ce as n,dc as o,ro as p,dd as q,yk as r,kg as s,Tk as t,Et as u,bk as v,hr as w,Og as x,pr as y,Ck as z,Wi as A,yn as B,Rk as C,Vg as D,Ug as E,xk as F,Mk as G,Bg as H,Ge as I,Nk as J,$g as K,Pk as L,We as M,Q as N,S0 as O,G as P,En as Q,K as R,z as S,F as T,Hn as U,nh as V,bc as W,In as X,ni as Y,ri as Z,kt as _,Cc as $,fb as aa,pb as ba,B7 as ca,$7 as da,Oy as ea,kb as fa,Ht as ga,ze as ha,ye as ia,Bn as ja,z7 as ka,Ir as la,Im as ma,Vy as na,Jt as oa,H7 as pa,Uy as qa,Gn as ra,Co as sa,q7 as ta,Gt as ua,Me as va,_C as wa,zn as xa,wo as ya,Eo as za,Nc as Aa,Tr as Ba,Tn as Ca,HL as Da,qL as Ea,Q7 as Fa,JL as Ga,Y7 as Ha,XC as Ia,br as Ja,dV as Ka,iv as La,iS as Ma,Ve as Na,aS as Oa,ov as Pa,cS as Qa,Z7 as Ra,X7 as Sa,J7 as Ta,eK as Ua,tK as Va,ln as Wa,dn as Xa,Wn as Ya,mS as Za,yS as _a,Pc as $a,vS as ab,VV as bb,jV as cb,kc as db,zV as eb,Wt as fb,nK as gb,rK as hb,WV as ib,KV as jb,iK as kb,QV as lb,YV as mb,sK as nb,oK as ob,Ch as pb,aK as qb,JV as rb,wS as sb,e2 as tb,cK as ub,t2 as vb,uK as wb,IS as xb,lK as yb,DS as zb,dK as Ab,hK as Bb,fK as Cb,Sh as Db,Ao as Eb,Oc as Fb,ci as Gb,pK as Hb,uv as Ib,bn as Jb,dv as Kb,hv as Lb,kS as Mb,A2 as Nb,gK as Ob,fv as Pb,M2 as Qb,mK as Rb,Ro as Sb,ct as Tb,Mo as Ub,bv as Vb,GS as Wb,WS as Xb,KS as Yb,QS as Zb,VK as _b,Cv as $b,B2 as ac,Ph as bc,Z2 as cc,YK as dc,cA as ec,mQ as fc,jv as gc,lU as hc,pi as ic,OQ as jc,FQ as kc,af as lc,uR as mc,D_ as nc,ps as oc,cf as pc,uf as qc,lR as rc,lf as sc,df as tc,b_ as uc,qY as vc,GY as wc,UX as xc,tr as yc,BX as zc,O as Ac,Qe as Bc,st as Cc,$ as Dc,zX as Ec,ga as Fc,t9 as Gc,_e as Hc,n9 as Ic,Ze as Jc,GX as Kc,WX as Lc,r9 as Mc,KX as Nc,i9 as Oc,QX as Pc,YX as Qc,mt as Rc,ZX as Sc,XX as Tc,JX as Uc,eJ as Vc,tJ as Wc,nJ as Xc,rJ as Yc,iJ as Zc,xa as _c,Pi as $c,el as ad,sJ as bd,oJ as cd,aJ as dd,cJ as ed,uJ as fd,lJ as gd,dJ as hd,hJ as id,fJ as jd,Rp as kd,ki as ld,ha as md,Oi as nd,pJ as od,gJ as pd,mJ as qd,yJ as rd,vJ as sd,_J as td,wJ as ud,EJ as vd,IJ as wd,DJ as xd,TJ as yd,bJ as zd,CJ as Ad,jp as Bd,TM as Cd,AJ as Dd,RJ as Ed,xJ as Fd,MJ as Gd,NJ as Hd,PJ as Id,Ho as Jd,QY as Kd,YY as Ld,ZY as Md,hR as Nd,Sn as Od,JY as Pd,gR as Qd,Ot as Rd,eZ as Sd,tZ as Td,Te as Ud,Ft as Vd,nZ as Wd,Lt as Xd,rZ as Yd,iZ as Zd,fR as _d,pR as $d,sZ as ae,pu as be,_Z as ce,wZ as de,vR as ee,NZ as fe,wR as ge,ER as he,IR as ie,DR as je,oX as ke,gx as le,Y_ as me,aX as ne,cH as oe,SX as pe};

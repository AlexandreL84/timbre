import{A as ce,B as fe,C as de,D as ge,E as h,a as U,aa as xe,c as Y,d as Z,da as he,e as J,ea as Ce,f as K,g as X,ga as ye,h as ee,ha as _e,ia as Le,j as te,k as ie,l as oe,n as re,o as ne,p as ae,q as me,r as le,v as se,y as pe,z as ue}from"./chunk-QLOIQ3XG.js";import{Ab as v,Bb as j,Ga as f,Gc as Q,Ka as m,N as D,T as E,Ta as n,Tb as z,U as N,Ua as l,V,Va as d,Vb as G,Xc as F,Y as I,Yb as q,Z as u,Za as R,Zb as H,_ as c,_c as ve,ab as O,cb as s,e as _,gc as P,hb as A,ib as T,ic as W,jb as k,mb as M,nb as g,pa as $,qb as b,ra as a,rb as w,sa as L,sb as S,tb as B,zb as x}from"./chunk-W6KRSCOZ.js";import"./chunk-65CH3ZW6.js";import"./chunk-GV7GV3NK.js";var C=class o{format;valueOfRegex;_onChange;validate(t){let e=!1,i="Format inconnu";if(F(t.value)||t.value==""||F(this.format)||this.format=="")return null;switch(this.format){case"date":ve.isTypeDate(t.value)?e=!0:e=/(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/](19|20)\d\d/.test(t.value),i="Le format de cette date est incorrect, format attendu : DD/MM/YYYY";break;case"alfa_numeric":e=/^[a-zA-Z0-9-]*$/.test(t.value),i="Le format est incorrect, format attendu : valeur alphanum\xE9rique";break;case"numeric":e=/^[[0-9]|[-][0-9]*$/.test(t.value),i="Le format est incorrect, format attendu : valeur num\xE9rique";break;case"entier":e=/^[0-9]*$/.test(t.value),i="Le format est incorrect, format attendu : valeur entier";break;case"pourcent":e=/^[0-9]$|^[1-9][0-9]$|^(100)$/.test(t.value),i="Le format est incorrect, format attendu : pourcentage";break;case"phone":e=/^[0]{1}[0-9]{9}$/.test(t.value),i="Le format de ce num\xE9ro de t\xE9l\xE9phone est incorrect";break;case"phoneFixe":e=/^[0]{1}[1-5|8|9]{1}[0-9]{8}$/.test(t.value),i="Le format est incorrect";break;case"phoneMobile":e=/^[0]{1}[6|7]{1}[0-9]{8}$/.test(t.value),i="Le format est incorrect";break;case"mail":e=/^[a-z0-9._%+-]+@[a-z0-9._-]+\.[a-z]{2,}$/.test(t.value),i="Le format du mail est incorrect";break}return e?null:{format:{message:i}}}registerOnValidatorChange(t){this._onChange=t}ngOnChanges(t){"valueOfRegex"in t&&this._onChange&&this._onChange()}static \u0275fac=function(e){return new(e||o)};static \u0275dir=V({type:o,selectors:[["","format","","formControlName",""],["","format","","formControl",""],["","format","","ngModel",""]],inputs:{format:"format",valueOfRegex:"valueOfRegex"},features:[B([{provide:oe,useExisting:o,multi:!0}]),I]})};var Se=["formLogin"];function Fe(o,t){o&1&&d(0,"lib-spinner",5),o&2&&m("textSpec","Redirection en cours ...")("classSpinner","primary")}function De(o,t){if(o&1&&(d(0,"mat-error",15),x(1,"async")),o&2){let e=s(2);m("innerHTML",v(1,1,e.messageError$),$)}}function Ee(o,t){if(o&1){let e=R();n(0,"div",6)(1,"form",7,1),O("ngSubmit",function(){u(e);let r=s();return c(r.onSignIn())}),f(3,De,2,3,"mat-error",8),x(4,"async"),n(5,"div",9)(6,"div",10)(7,"label"),g(8," Email "),l(),n(9,"input",11),S("ngModelChange",function(r){u(e);let p=s();return w(p.email,r)||(p.email=r),c(r)}),l()(),n(10,"div",10)(11,"label"),g(12," Mot de passe "),l(),n(13,"input",12),S("ngModelChange",function(r){u(e);let p=s();return w(p.password,r)||(p.password=r),c(r)}),l()()(),n(14,"div",13)(15,"button",14),g(16," Enregistrer "),l()()()()}if(o&2){let e=M(2),i=s();a(),m("ngClass",e!=null&&e.submitted?"red-color":"blue-color"),a(2),m("ngIf",v(4,4,i.messageError$)),a(6),b("ngModel",i.email),a(4),b("ngModel",i.password)}}var y=class o{constructor(t,e){this.authService=t;this.router=e}formLogin;redirection$=new _(null);messageError$=new _(null);email;password;onSignIn(){this.messageError$.next(null),this.redirection$.next(null),this.formLogin?.valid&&this.authService.signIn(this.email,this.password).then(t=>{console.log("ok"),this.router.navigate(["/pays"]),this.redirection$.next(!0)}).catch(t=>{console.log(t),this.messageError$.next("Email ou mot de pase incorrect")})}static \u0275fac=function(e){return new(e||o)(L(Q),L(P))};static \u0275cmp=E({type:o,selectors:[["app-login"]],viewQuery:function(e,i){if(e&1&&A(Se,5),e&2){let r;T(r=k())&&(i.formLogin=r.first)}},decls:6,vars:5,consts:[["load",""],["formLogin","ngForm"],["fxLayout","column","fxLayoutGap","20px"],[3,"titre"],[3,"ngIf","ngIfElse"],["fxFlexFill","",3,"textSpec","classSpinner"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","center center","fxFlexOffset","40px"],["ngForm","formLogin","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","space-between stretch",1,"formulaire-box-elevation","height100",3,"ngSubmit","ngClass"],[3,"innerHTML",4,"ngIf"],["fxLayout","column","fxLayoutGap","30px"],["fxLayout","column",1,"form-input"],["name","email","type","text","format","mail","required","","zControl","",2,"max-width","400px",3,"ngModelChange","ngModel"],["type","password","name","password","required","","zControl","",2,"max-width","400px",3,"ngModelChange","ngModel"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","center end"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"]],template:function(e,i){if(e&1&&(n(0,"div",2),d(1,"app-header",3),f(2,Fe,1,2,"ng-template",4),x(3,"async"),f(4,Ee,17,6,"ng-template",null,0,j),l()),e&2){let r=M(5);a(),m("titre","Connexion"),a(),m("ngIf",v(3,3,i.redirection$)==!0)("ngIfElse",r)}},dependencies:[z,G,Y,Z,ee,K,X,J,U,le,ie,re,ne,se,me,ae,xe,C,he,h,ge,Ce,q]})};var Ne=[{path:"",component:y}],be=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=N({type:o});static \u0275inj=D({imports:[H,W.forChild(Ne),te,pe,ce,fe,de,ue,ye,h,Le,_e]})};export{be as AuthentificationModule};

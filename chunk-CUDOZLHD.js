import{c as Ve,d as $e,e as v,f as X,g as z}from"./chunk-PAGRTFTF.js";import{a as Xe,b as ze,g as Ge,h as $,i as et,j as We,l as Qe}from"./chunk-U3ZSWC23.js";import{C as Ye}from"./chunk-W3XNXTU3.js";import{e as ke,f as He,g as Ue,h as je}from"./chunk-LMRVNFCC.js";import{A as x,Ab as N,Ac as Ee,Ba as le,Bb as _e,Bc as De,Ca as ae,Cb as Ce,Cc as Le,Dc as Ie,Ec as Re,Fa as me,Fc as Ae,Ga as ce,Gb as ge,Gc as Oe,Hc as Fe,Ia as pe,Ic as ee,J as oe,Jb as he,Jc as Pe,K as m,Kc as qe,L as b,Lc as Ne,Pa as K,Q as f,R as c,Rb as ye,Tb as xe,W as l,Wb as Te,X as a,Y as s,Z as _,_ as C,aa as T,ab as se,ba as d,c as ie,ca as p,ea as Q,fa as Z,fb as E,ga as J,gb as ue,hc as Me,ia as u,ja as ne,ka as B,lc as U,ma as R,na as A,oa as O,pb as F,q as D,qb as P,ra as re,rb as de,rc as Se,tb as fe,u as L,ua as M,uc as j,v as I,va as S,vb as k,wb as q,wc as V,xb as H,xc as ve,yc as we,z as y,zb as be,zc as Be}from"./chunk-EDS3JHJR.js";import"./chunk-65CH3ZW6.js";import{g as Ke,i as w}from"./chunk-GV7GV3NK.js";var Ze=Ke(et());var g=class extends ue{idUser;idBloc;acquis;doublon;constructor(i,e,o,r){super(),this.idUser=i||null,this.idBloc=e||null,this.acquis=o||!1,this.doublon=r||!1}getIdUser(){return this.idUser}setIdUser(i){this.idUser=i}getidBloc(){return this.idBloc}setidBloc(i){this.idBloc=i}isAcquis(){return this.acquis}setAcquis(i){this.acquis=i}isDoublon(){return this.doublon}setDoublon(i){this.doublon=i}};w([E("Identifiant Utilisateur")],g.prototype,"idUser",2),w([E("Identifiant bloc")],g.prototype,"idBloc",2),w([E("Acquis")],g.prototype,"acquis",2),w([E("Doublon")],g.prototype,"doublon",2);var rt=()=>[10,20,50,100];function lt(t,i){if(t&1&&(l(0,"mat-option",7),u(1),a()),t&2){let e=i.$implicit;c("value",e),m(),B(" ",e," ")}}function at(t,i){if(t&1&&(l(0,"th",34),s(1,"lib-libelle-model",35),a()),t&2){let e=p();m(),c("object",e.timbre)("key","image")}}function mt(t,i){if(t&1){let e=T();l(0,"img",38),d("click",function(){y(e);let r=p().$implicit,n=p();return x(n.utilsService.zoom(r==null?null:r.getImageZoom()))}),a()}if(t&2){let e=p().$implicit;c("src",e==null?null:e.getImageTable(),oe)}}function ct(t,i){if(t&1&&(l(0,"td",36),f(1,mt,1,1,"img",37),a()),t&2){let e=i.$implicit;m(),c("ngIf",e==null?null:e.getImageTable())}}function pt(t,i){if(t&1&&(l(0,"th",39),s(1,"lib-libelle-model",40),a()),t&2){let e=p();m(),c("object",e.timbre)("key","id")}}function st(t,i){if(t&1&&(l(0,"td",41),u(1),a()),t&2){let e=i.$implicit;m(),B(" ",e==null?null:e.getId()," ")}}function ut(t,i){if(t&1&&(l(0,"th",39),s(1,"lib-libelle-model",40),a()),t&2){let e=p();m(),c("object",e.timbre)("key","annee")}}function dt(t,i){if(t&1&&(l(0,"td",41),u(1),a()),t&2){let e=i.$implicit;m(),B(" ",e==null?null:e.getAnnee()," ")}}function ft(t,i){if(t&1&&(l(0,"th",42),s(1,"lib-libelle-model",40),a()),t&2){let e=p();m(),c("object",e.timbre)("key","monnaie")}}function bt(t,i){if(t&1&&(l(0,"td",43),u(1),a()),t&2){let e=i.$implicit;m(),B(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function _t(t,i){if(t&1&&(l(0,"th",39),s(1,"lib-libelle-model",40),a()),t&2){let e=p();m(),c("object",e.timbre==null?null:e.timbre.getTimbreBlocAcquisModel())("key","acquis")}}function Ct(t,i){if(t&1){let e=T();l(0,"td",36)(1,"lib-icon",44),d("click",function(){let r=y(e).$implicit,n=p();return x(n.acquis(r))}),a()()}if(t&2){let e,o,r,n=i.$implicit,h=p();m(),c("classIcone",!(n==null||(e=n.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",h.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(n==null||(o=n.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?h.FontAwesomeEnum.CIRCLE_MINUS:h.FontAwesomeEnum.CIRCLE_PLUS)("info",!(n==null||(r=n.getTimbreBlocAcquisModel())==null)&&r.isAcquis()?"pas acquis":"acquis")}}function gt(t,i){if(t&1&&(l(0,"th",39),s(1,"lib-libelle-model",40),a()),t&2){let e=p();m(),c("object",e.timbre==null?null:e.timbre.getTimbreBlocAcquisModel())("key","doublon")}}function ht(t,i){if(t&1){let e=T();l(0,"td",36)(1,"lib-icon",44),d("click",function(){let r=y(e).$implicit,n=p();return x(n.doublon(r))}),a()()}if(t&2){let e,o,r,n=i.$implicit,h=p();m(),c("classIcone",!(n==null||(e=n.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"accent":"primary")("type",h.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(n==null||(o=n.getTimbreBlocAcquisModel())==null)&&o.isDoublon()?h.FontAwesomeEnum.CIRCLE_MINUS:h.FontAwesomeEnum.CIRCLE_PLUS)("info",!(n==null||(r=n.getTimbreBlocAcquisModel())==null)&&r.isDoublon()?"pas en double":"en double")}}function yt(t,i){if(t&1&&(l(0,"th",45),s(1,"lib-icon",46),a()),t&2){let e=p();m(),c("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function xt(t,i){if(t&1){let e=T();l(0,"td",36)(1,"lib-icon",47),d("click",function(){let r=y(e).$implicit,n=p();return x(n.modifier(r))}),a()()}if(t&2){let e=p();m(),c("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Tt(t,i){if(t&1&&(l(0,"th",45),s(1,"lib-icon",46),a()),t&2){let e=p();m(),c("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Modifier")}}function Mt(t,i){if(t&1){let e=T();l(0,"td",36)(1,"lib-icon",47),d("click",function(){let r=y(e).$implicit,n=p();return x(n.supprimer(r))}),a()()}if(t&2){let e=p();m(),c("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function St(t,i){t&1&&s(0,"tr",48)}function vt(t,i){t&1&&s(0,"tr",49)}var G=class t{constructor(i,e,o,r){this.timbreBlocService=i;this.timbreUtilsService=e;this.dialog=o;this.utilsService=r;this.dataSource=new ee([])}paginator;sort;load$=new ie(!1);dataSource=new ee;displayedColumns;timbreCritereModel=new Ve;timbre=new $e;annees$;modif=!0;FontAwesomeEnum=P;FontAwesomeTypeEnum=F;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbre.setTimbreBlocAcquisModel(new g),this.displayedColumns=["image","id","annee","monnaie","acquis","doublon"],this.modif&&this.displayedColumns.push("modifier","supprimer"),this.load$.next(!1),this.timbreBlocService.timbresBlocModel$.subscribe(i=>{this.dataSource.data=i,this.load$.next(!0)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.sort.active="id",this.sort.direction="asc",this.dataSource.sort=this.sort}sortData(i){se(i)&&(this.dataSource.sort=this.sort)}filtreByCritere(){this.timbreCritereModel.getAcquis()=="NON"&&this.timbreCritereModel.setDoublon("TOUS")}applyFilter(i){let e=i.target.value;this.dataSource.filter=e.trim().toLowerCase()}acquis(i){}doublon(i){}modifier(i){let e=this.dialog.open(z,{height:"75vh",maxHeight:"750px",width:"30%"});e.componentInstance.id=i.getId(),e.afterClosed().subscribe(()=>{e.close()})}supprimer(i){let e=this.dialog.open(We,{maxHeight:"95vh",data:{titre:"Confirmation",message:"Souhaitez-vous supprimer le timbre <b>n\xB0 "+i?.getId()+"</b> ?",btnDroite:"Oui",btnGauche:"Non"}});e.afterClosed().subscribe(()=>{e.componentInstance.data.resultat==="valider"&&this.timbreBlocService.supprimer(i)})}exportTable(){let i=$.json_to_sheet(this.dataSource.data),e=$.book_new();$.book_append_sheet(e,i,"Donn\xE9es");let o=Ge(e,{bookType:"xlsx",type:"array"}),r=new Blob([o],{type:"application/octet-stream"});(0,Ze.saveAs)(r,"export_timbres.xlsx")}static \u0275fac=function(e){return new(e||t)(b(v),b(X),b(U),b(ze))};static \u0275cmp=L({type:t,selectors:[["app-timbre-bloc-resultat"]],viewQuery:function(e,o){if(e&1&&(Q(j,5),Q(V,5)),e&2){let r;Z(r=J())&&(o.paginator=r.first),Z(r=J())&&(o.sort=r.first)}},decls:63,vars:36,consts:[["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px"],["fxFlex","",2,"font-size","1.2em"],[1,"bold"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","100px"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","150px"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"primary","click",2,"font-size","1.7em",3,"click","type","icone","info"],["id","pdf-content","mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","monnaie"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",2,"font-size","1.2em",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[2,"font-size","1.2em",3,"type","icone","info"],[1,"primary","click",2,"font-size","1.2em",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,o){e&1&&(s(0,"lib-spinner",0),M(1,"async"),l(2,"section",1),M(3,"async"),l(4,"div",2)(5,"div",3)(6,"span"),u(7,"Nombre de blocs : "),a(),l(8,"span",4),u(9),M(10,"async"),M(11,"async"),a()(),l(12,"div",5)(13,"mat-select",6),O("ngModelChange",function(n){return A(o.timbreCritereModel.acquis,n)||(o.timbreCritereModel.acquis=n),n}),d("ngModelChange",function(){return o.filtreByCritere()}),l(14,"mat-option",7),u(15," Oui"),a(),l(16,"mat-option",7),u(17," Non"),a(),l(18,"mat-option",7),u(19," Tous"),a()()(),l(20,"div",5)(21,"mat-select",8),O("ngModelChange",function(n){return A(o.timbreCritereModel.doublon,n)||(o.timbreCritereModel.doublon=n),n}),d("ngModelChange",function(){return o.filtreByCritere()}),l(22,"mat-option",7),u(23," Oui"),a(),l(24,"mat-option",7),u(25," Non"),a(),l(26,"mat-option",7),u(27," Tous"),a()()(),l(28,"div",9)(29,"mat-select",10),O("ngModelChange",function(n){return A(o.timbreCritereModel.annees,n)||(o.timbreCritereModel.annees=n),n}),d("ngModelChange",function(){return o.filtreByCritere()}),f(30,lt,2,2,"mat-option",11),M(31,"async"),a()(),l(32,"div",12)(33,"input",13),d("input",function(n){return o.applyFilter(n)}),a()(),l(34,"lib-icon",14),d("click",function(){return o.exportTable()}),a()(),l(35,"table",15),d("matSortChange",function(n){return o.sortData(n)}),_(36,16),f(37,at,2,2,"th",17)(38,ct,2,1,"td",18),C(),_(39,19),f(40,pt,2,2,"th",20)(41,st,2,1,"td",21),C(),_(42,22),f(43,ut,2,2,"th",20)(44,dt,2,1,"td",21),C(),_(45,23),f(46,ft,2,2,"th",24)(47,bt,2,1,"td",25),C(),_(48,26),f(49,_t,2,2,"th",20)(50,Ct,2,4,"td",18),C(),_(51,27),f(52,gt,2,2,"th",20)(53,ht,2,4,"td",18),C(),_(54,28),f(55,yt,2,3,"th",29)(56,xt,2,3,"td",18),C(),_(57,30),f(58,Tt,2,3,"th",29)(59,Mt,2,3,"td",18),C(),f(60,St,1,0,"tr",31)(61,vt,1,0,"tr",32),a(),s(62,"mat-paginator",33),a()),e&2&&(c("fxHide",S(1,25,o.load$)==!0)("textSpec","Chargement en cours ..."),m(2),c("fxHide",S(3,27,o.load$)==!1),m(7),ne(S(10,29,o.timbreBlocService.total$)?S(11,31,o.timbreBlocService.total$):o.dataSource==null||o.dataSource.data==null?null:o.dataSource.data.length),m(4),R("ngModel",o.timbreCritereModel.acquis),c("placeholder","Acquis"),m(),c("value","OUI"),m(2),c("value","NON"),m(2),c("value","TOUS"),m(3),R("ngModel",o.timbreCritereModel.doublon),c("placeholder","Doublon"),m(),c("value","OUI"),m(2),c("value","NON"),m(2),c("value","TOUS"),m(3),R("ngModel",o.timbreCritereModel.annees),c("placeholder","Ann\xE9es"),m(),c("ngForOf",S(31,33,o.annees$)),m(4),c("type",o.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",o.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau"),m(),c("dataSource",o.dataSource),m(25),c("matHeaderRowDef",o.displayedColumns),m(),c("matRowDefColumns",o.displayedColumns),m(),c("pageSize",15)("pageSizeOptions",re(35,rt)))},dependencies:[Se,xe,we,Ee,Re,De,Be,Ae,Le,Ie,Oe,Fe,j,V,ve,le,ae,k,q,N,be,H,fe,ge,he,qe,je,ke,me],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}"]})};var W=class t{constructor(i,e,o){this.headerService=i;this.timbreBlocService=e;this.dialog=o}FontAwesomeTypeEnum=F;FontAwesomeEnum=P;ngOnInit(){this.headerService.titre$.next("TIMBRES - BLOC"),this.timbreBlocService.getBlocsAsync()}ajouterBloc(){let i=this.dialog.open(z,{maxHeight:"95vh",width:"30%"});i.afterClosed().subscribe(()=>{i.close()})}static \u0275fac=function(e){return new(e||t)(b(de),b(v),b(U))};static \u0275cmp=L({type:t,selectors:[["app-timbre-bloc-layout"]],decls:8,vars:0,consts:[["fxLayout","row","fxLayoutAlign","space-between stretch"],["fxFlex","5"],["fxFlex","","fxLayout","column","fxLayoutGap","20px"],["fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"]],template:function(e,o){e&1&&(l(0,"div",0),s(1,"div",1),l(2,"div",2)(3,"div",3)(4,"button",4),d("click",function(){return o.ajouterBloc()}),u(5," Ajouter "),a()(),s(6,"app-timbre-bloc-resultat"),a(),s(7,"div",1),a())},dependencies:[Me,k,q,N,H,G],encapsulation:2})};var Bt=[{path:"",component:W}],Y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=D({imports:[K.forChild(Bt),K]})};var Je=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=D({providers:[v,X,Xe,pe()],imports:[Y,Pe,ce,_e,Ce,ye,Ne,Ue,He,Te,Qe,Ye]})};export{Je as TimbreBlocModule};

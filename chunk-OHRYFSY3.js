import{a as oe,c as A,d as Ke,e as re,f as M,g as it,i as nt,j as ot,n as rt,o as pt}from"./chunk-UIFKSKZD.js";import{a as V,c as tt}from"./chunk-KMZVQV3U.js";import{a as Se,b as Be}from"./chunk-QXYOZCS4.js";import{c as ne,d as N,i as et,l as lt,m as le,n as xt,o as mt,p as at}from"./chunk-4QECCGEG.js";import{B as ct}from"./chunk-BFCS4JX5.js";import{d as ee,e as Ze,f as ie,g as Je}from"./chunk-6HHNYKAJ.js";import{o as ge,v as F}from"./chunk-6QQKUJTI.js";import"./chunk-Z2WRGFA4.js";import{a as ke}from"./chunk-55NJJND4.js";import{Ab as W,Ba as C,Bb as Ee,Ca as ve,Cb as Ie,Cc as J,Da as S,Dc as je,Ea as G,Eb as Oe,Ec as qe,Fb as Ae,Fc as Ue,Ga as U,Gb as Re,Gc as He,Ha as H,Hb as Q,Ia as $,Ic as $e,J as P,Jc as ze,La as he,Lb as Pe,Lc as Ye,Mc as Ge,N as B,O as L,Oa as y,Ob as Le,Oc as Xe,Pa as v,Pc as We,Rc as Qe,Sc as xe,T as b,Tc as K,U as _,Uc as k,Vc as te,Wb as De,Ya as Me,Yb as Fe,Za as D,_a as w,ba as Y,bb as E,ca as l,da as T,db as X,ia as u,ja as m,na as c,oa as p,ob as Ce,pa as d,qa as g,qb as z,qc as Ve,ra as x,ta as h,ua as f,va as a,wb as I,wc as Ne,xa as _e,xb as O,y as ye,ya as fe,za as Te,zb as we,zc as Z}from"./chunk-QXCOODFE.js";import{f as gt}from"./chunk-GOLCFQAC.js";function vt(t,n){if(t&1&&(c(0,"mat-option",7),C(1),y(2,"capitalize"),p()),t&2){let e=a().$implicit;m("value",e.value),l(),S(" ",v(2,2,e.value)," ")}}function ht(t,n){if(t&1&&(g(0),u(1,vt,3,4,"mat-option",11),x()),t&2){let e=n.$implicit,o=a(2);l(),m("ngIf",e.value!=o.TypeTimbreEnum.TIMBRE)}}function Mt(t,n){if(t&1&&(c(0,"mat-option",7),C(1),p()),t&2){let e=n.$implicit;m("value",e),l(),S(" ",e," ")}}function St(t,n){if(t&1){let e=h();c(0,"div",1)(1,"div",2)(2,"mat-select",3),$("ngModelChange",function(r){b(e);let i=a();return H(i.preferenceService.timbreCritereBlocModel.type,r)||(i.preferenceService.timbreCritereBlocModel.type=r),_(r)}),f("ngModelChange",function(){b(e);let r=a();return _(r.filtreByCritere())}),u(3,ht,2,1,"ng-container",4),y(4,"enumToArray"),p()(),c(5,"div",5)(6,"mat-select",6),$("ngModelChange",function(r){b(e);let i=a();return H(i.preferenceService.timbreCritereBlocModel.acquis,r)||(i.preferenceService.timbreCritereBlocModel.acquis=r),_(r)}),f("ngModelChange",function(){b(e);let r=a();return _(r.filtreByCritere())}),c(7,"mat-option",7),C(8," Oui"),p(),c(9,"mat-option",7),C(10," Non"),p(),c(11,"mat-option",7),C(12," Tous"),p()()(),c(13,"div",5)(14,"mat-select",8),$("ngModelChange",function(r){b(e);let i=a();return H(i.preferenceService.timbreCritereBlocModel.doublon,r)||(i.preferenceService.timbreCritereBlocModel.doublon=r),_(r)}),f("ngModelChange",function(){b(e);let r=a();return _(r.filtreByCritere())}),c(15,"mat-option",7),C(16," Oui"),p(),c(17,"mat-option",7),C(18," Non"),p(),c(19,"mat-option",7),C(20," Tous"),p()()(),c(21,"div",5)(22,"mat-select",9),$("ngModelChange",function(r){b(e);let i=a();return H(i.preferenceService.timbreCritereBlocModel.annees,r)||(i.preferenceService.timbreCritereBlocModel.annees=r),_(r)}),f("ngModelChange",function(){b(e);let r=a();return _(r.filtreByCritere())}),u(23,Mt,2,2,"mat-option",10),y(24,"async"),p()()()}if(t&2){let e=a();l(2),U("ngModel",e.preferenceService.timbreCritereBlocModel.type),m("placeholder","Type"),l(),m("ngForOf",v(4,16,e.TypeTimbreEnum)),l(3),U("ngModel",e.preferenceService.timbreCritereBlocModel.acquis),m("placeholder","Acquis"),l(),m("value","OUI"),l(2),m("value","NON"),l(2),m("value","TOUS"),l(3),U("ngModel",e.preferenceService.timbreCritereBlocModel.doublon),m("placeholder","Doublon"),l(),m("value","OUI"),l(2),m("value","NON"),l(2),m("value","TOUS"),l(3),U("ngModel",e.preferenceService.timbreCritereBlocModel.annees),m("placeholder","Ann\xE9es"),l(),m("ngForOf",v(24,18,e.annees$))}}var j=class t{constructor(n,e,o,r){this.authService=n;this.timbreBlocService=e;this.timbreUtilsService=o;this.preferenceService=r}modif=!0;annees$;TypeTimbreEnum=V;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc")}filtreByCritere(){this.preferenceService.timbreCritereBlocModel.getAcquis()=="NON"&&this.preferenceService.timbreCritereBlocModel.setDoublon("TOUS"),this.preferenceService.modifier("blocCritere",this.preferenceService.timbreCritereBlocModel),this.recherche()}recherche(){z(this.preferenceService.timbreCritereBlocModel.getAnnees())&&this.preferenceService.timbreCritereBlocModel.getAnnees().length>0&&this.timbreBlocService.getBlocs(this.preferenceService.timbreCritereBlocModel,!1)}static \u0275fac=function(e){return new(e||t)(T(F),T(M),T(A),T(tt))};static \u0275cmp=B({type:t,selectors:[["app-timbre-bloc-recherche"]],inputs:{modif:"modif"},decls:1,vars:1,consts:[["class","menuRecherche",4,"ngIf"],[1,"menuRecherche"],[1,"form-input","select",2,"width","120px"],["name","type","multiple","",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],[4,"ngFor","ngForOf"],[1,"form-input","select",2,"width","100px"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["class","selectMin",3,"value",4,"ngIf"]],template:function(e,o){e&1&&u(0,St,25,20,"div",0),e&2&&m("ngIf",o.modif)},dependencies:[Ne,Fe,D,w,Pe,Le,E,Ke,re],styles:[".menuRecherche[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:0 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}@media screen and (max-width: 800px){.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:5px 10px}}"]})};function Bt(t,n){if(t&1&&(g(0),c(1,"div",3)(2,"span"),C(3),y(4,"capitalize"),p(),c(5,"span",4),C(6),p()(),x()),t&2){let e=n.$implicit,o=n.first;l(3),G("",o?"Nombre de ":" / ","",v(4,3,e==null?null:e.getType())," : "),l(3),ve(e!=null&&e.getTotal()?e==null?null:e.getTotal():0)}}var q=class t{constructor(n,e){this.dialog=n;this.timbreBlocService=e}FontAwesomeEnum=O;FontAwesomeTypeEnum=I;resume(){this.dialog.open(ot,{height:"auto",maxHeight:"95vh",width:"1200px"})}static \u0275fac=function(e){return new(e||t)(T(Ve),T(M))};static \u0275cmp=B({type:t,selectors:[["app-timbre-bloc-total"]],decls:4,vars:6,consts:[[1,"timbreTotal"],[4,"ngFor","ngForOf"],[1,"accent","click",3,"click","icone","type","info"],[1,"nbTimbre"],[1,"bold"]],template:function(e,o){e&1&&(c(0,"div",0),u(1,Bt,7,5,"ng-container",1),y(2,"async"),c(3,"lib-icon",2),f("click",function(){return o.resume()}),p()()),e&2&&(l(),m("ngForOf",v(2,4,o.timbreBlocService.total$)),l(2),m("icone",o.FontAwesomeEnum.CHART_LINE_UP)("type",o.FontAwesomeTypeEnum.TYPE_SOLID)("info","D\xE9tail par ann\xE9e"))},dependencies:[D,k,E,re],styles:[".timbreTotal[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-content:center;gap:10px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1.2em;justify-content:start;align-content:center}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 800px){.timbreTotal[_ngcontent-%COMP%]{height:25px;gap:5px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1em}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}}"]})};function Ot(t,n){if(t&1){let e=h();c(0,"lib-icon",19),f("click",function(){b(e);let r=a().$implicit,i=a();return _(i.timbreBlocService.acquisDoublon(r,!1))}),p()}if(t&2){let e,o,r,i=a().$implicit,s=a();m("classIcone",!(i==null||(e=i.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(i==null||(o=i.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?s.FontAwesomeEnum.CIRCLE_MINUS:s.FontAwesomeEnum.CIRCLE_PLUS)("info",!(i==null||(r=i.getTimbreBlocAcquisModel())==null)&&r.isAcquis()?"pas acquis":"acquis")}}function At(t,n){if(t&1){let e=h();c(0,"lib-icon",19),f("click",function(){b(e);let r=a().$implicit,i=a();return _(i.timbreBlocService.acquisDoublon(r,!0))}),p()}if(t&2){let e,o,r,i=a().$implicit,s=a();m("classIcone",!(i==null||(e=i.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"accent900":"primary")("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(i==null||(o=i.getTimbreBlocAcquisModel())==null)&&o.isDoublon()?s.FontAwesomeEnum.CIRCLE_MINUS:s.FontAwesomeEnum.CIRCLE_PLUS)("info",!(i==null||(r=i.getTimbreBlocAcquisModel())==null)&&r.isDoublon()?"pas en double":"en double")}}function Rt(t,n){if(t&1){let e=h();c(0,"img",20),f("click",function(){b(e);let r=a().$implicit,i=a();return _(i.utilsService.zoom(r==null?null:r.getImageZoom()))}),p()}if(t&2){let e=a().$implicit;m("src",e==null?null:e.getImage(),Y)}}function Pt(t,n){if(t&1&&(g(0),C(1),x()),t&2){let e=a().$implicit;l(),G(" ",e==null?null:e.getNbTimbresAcquis(),"/",e==null?null:e.getNbTimbres()," ")}}function Lt(t,n){if(t&1&&d(0,"lib-icon",21),t&2){let e=a().$implicit,o=a();m("classIcone","primary")("type",o.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",o.FontAwesomeEnum.CIRCLE_INFO)("info",e==null?null:e.getYt())}}function Dt(t,n){if(t&1){let e=h();c(0,"div",6)(1,"div",7)(2,"div",8),u(3,Ot,1,4,"lib-icon",9),y(4,"async"),u(5,At,1,4,"lib-icon",9),y(6,"async"),p(),c(7,"div",10)(8,"lib-icon",11),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.modifierDialog(r))}),p(),c(9,"lib-icon",11),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.supprimerDialog(r))}),p()()(),c(10,"div",12),u(11,Rt,1,1,"img",13),p(),c(12,"div",14),C(13),c(14,"div",15),u(15,Pt,2,2,"ng-container",16),c(16,"lib-icon",17),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.isCarnet(r))}),p(),u(17,Lt,1,4,"lib-icon",18),p()()()}if(t&2){let e,o,r,i=n.$implicit,s=a();m("ngClass",!(i==null||(e=i.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"border-accent900 bg-accentA400":!(i==null||(e=i.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"border-accent bg-accentA200":"border-primary"),l(3),m("ngIf",((o=v(4,16,s.authService.user$))==null?null:o.getDroit())>=s.DroitEnum.PARTIEL),l(2),m("ngIf",((r=v(6,18,s.authService.user$))==null?null:r.getDroit())>=s.DroitEnum.PARTIEL),l(3),m("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",s.FontAwesomeEnum.PENCIL)("info","Modifier"),l(),m("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",s.FontAwesomeEnum.TRASH)("info","Supprimer"),l(2),m("ngIf",i==null?null:i.getImage()),l(2),S(" ",i==null?null:i.getAnnee()," "),l(2),m("ngIf",(i==null?null:i.getType())!=s.TypeTimbreEnum.COLLECTOR),l(),m("classIcone",(i==null?null:i.getType())==s.TypeTimbreEnum.CARNET?"accent":(i==null?null:i.getType())==s.TypeTimbreEnum.COLLECTOR?"accent900":"primary")("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",(i==null?null:i.getType())==s.TypeTimbreEnum.BLOC?s.FontAwesomeEnum.CIRCLE_B:s.FontAwesomeEnum.CIRCLE_C),l(),m("ngIf",i==null?null:i.getYt())}}var pe=class t{constructor(n,e,o,r){this.authService=n;this.timbreBlocService=e;this.timbreUtilsService=o;this.utilsService=r}timbreBlocModel=new ne;annees$;modif=!0;FontAwesomeEnum=O;FontAwesomeTypeEnum=I;TypeTimbreEnum=V;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new oe)}DroitEnum=ge;static \u0275fac=function(e){return new(e||t)(T(F),T(M),T(A),T(N))};static \u0275cmp=B({type:t,selectors:[["app-timbre-bloc-resultat"]],decls:10,vars:11,consts:[[1,"responsiveDirection","responsiveMenu"],[3,"modif"],[1,"spinner",3,"fxHide","textSpec"],[3,"fxHide"],[1,"listeTimbre","primary"],["class","detailTimbre",3,"ngClass",4,"ngFor","ngForOf"],[1,"detailTimbre",3,"ngClass"],[1,"headerTimbre"],[1,"actionTimbre"],["class","click",3,"classIcone","type","icone","info","click",4,"ngIf"],[1,"actionTimbre2"],[1,"primary","click",3,"click","type","icone","info"],[1,"imgTimbre"],["class","image zoomIn",3,"src","click",4,"ngIf"],[1,"footerTimbre"],[1,"infoTimbre"],[4,"ngIf"],[1,"click",3,"click","classIcone","type","icone"],["class","click",3,"classIcone","type","icone","info",4,"ngIf"],[1,"click",3,"click","classIcone","type","icone","info"],[1,"image","zoomIn",3,"click","src"],[1,"click",3,"classIcone","type","icone","info"]],template:function(e,o){e&1&&(c(0,"div",0),d(1,"app-timbre-bloc-total")(2,"app-timbre-bloc-recherche",1),p(),d(3,"lib-spinner",2),y(4,"async"),c(5,"section",3),y(6,"async"),c(7,"div",4),u(8,Dt,18,20,"div",5),y(9,"async"),p()()),e&2&&(l(2),m("modif",o.modif),l(),m("fxHide",v(4,5,o.timbreBlocService.load$)==!0)("textSpec","Chargement en cours ..."),l(2),m("fxHide",v(6,7,o.timbreBlocService.load$)==!1),l(3),m("ngForOf",v(9,9,o.timbreBlocService.timbresBlocModel$)))},dependencies:[Me,D,w,W,we,k,ee,j,q,E],styles:[".spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;flex:100%;height:100%}.listeTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.listeTimbre[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]{margin:10px;width:115px;height:150px;border-radius:10px;border:1px solid;padding:5px 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%;padding-bottom:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:start;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre2[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:end;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]{width:100%;display:flex;flex:auto;justify-content:center;align-items:center}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]   .infoTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;align-items:end;gap:5px}@media screen and (max-width: 800px){.listeTimbre[_ngcontent-%COMP%]{justify-content:space-evenly}}"]})};var Tt=gt(xt());var kt=()=>[10,20,50,100];function Vt(t,n){if(t&1){let e=h();c(0,"div",0),d(1,"app-timbre-bloc-recherche",27),c(2,"div",28)(3,"input",29),f("input",function(r){b(e);let i=a();return _(i.applyFilter(r))}),p()(),c(4,"lib-icon",30),f("click",function(){b(e);let r=a();return _(r.exportTable())}),p()()}if(t&2){let e=a();l(),m("modif",e.modif),l(3),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau")}}function Nt(t,n){if(t&1&&(c(0,"th",31),d(1,"lib-libelle-model",32),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","image")}}function jt(t,n){if(t&1){let e=h();c(0,"img",35),f("click",function(){b(e);let r=a().$implicit,i=a();return _(i.utilsService.zoom(r==null?null:r.getImageZoom()))}),p()}if(t&2){let e=a().$implicit;m("src",e==null?null:e.getImageTable(),Y)}}function qt(t,n){if(t&1&&(c(0,"td",33),u(1,jt,1,1,"img",34),p()),t&2){let e=n.$implicit;l(),m("ngIf",e==null?null:e.getImageTable())}}function Ut(t,n){if(t&1&&(c(0,"th",36),d(1,"lib-libelle-model",37),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","id")}}function Ht(t,n){if(t&1&&(c(0,"td",38),C(1),p()),t&2){let e=n.$implicit;l(),S(" ",e==null?null:e.getId()," ")}}function $t(t,n){if(t&1&&(c(0,"th",36),d(1,"lib-libelle-model",37),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","annee")}}function zt(t,n){if(t&1&&(c(0,"td",38),C(1),p()),t&2){let e=n.$implicit;l(),S(" ",e==null?null:e.getAnnee()," ")}}function Yt(t,n){if(t&1&&(c(0,"th",39),d(1,"lib-libelle-model",40),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","type")("align","center center")}}function Gt(t,n){if(t&1){let e=h();c(0,"td",33)(1,"lib-icon",41),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.isCarnet(r))}),p()()}if(t&2){let e=n.$implicit,o=a();l(),m("classIcone",(e==null?null:e.getType())==o.TypeTimbreEnum.CARNET?"accent":(e==null?null:e.getType())==o.TypeTimbreEnum.COLLECTOR?"accent900":"primary")("type",o.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",(e==null?null:e.getType())==o.TypeTimbreEnum.BLOC?o.FontAwesomeEnum.CIRCLE_B:o.FontAwesomeEnum.CIRCLE_C)}}function Xt(t,n){if(t&1&&(c(0,"th",42),d(1,"lib-libelle-model",37),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","nbTimbres")}}function Wt(t,n){if(t&1&&(c(0,"td",43),C(1),p()),t&2){let e=n.$implicit;l(),S(" ",e==null?null:e.getNbTimbres()," ")}}function Qt(t,n){if(t&1&&(c(0,"th",42),d(1,"lib-libelle-model",37),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","monnaie")}}function Zt(t,n){if(t&1&&(c(0,"td",43),C(1),p()),t&2){let e=n.$implicit;l(),S(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function Jt(t,n){if(t&1&&(c(0,"th",42),d(1,"lib-libelle-model",37),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel)("key","yt")}}function Kt(t,n){if(t&1&&(c(0,"td",43),C(1),p()),t&2){let e=n.$implicit;l(),S(" ",e==null?null:e.getYt()," ")}}function ei(t,n){if(t&1&&(c(0,"th",39),d(1,"lib-libelle-model",40),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","acquis")("align","center center")}}function ti(t,n){if(t&1){let e=h();c(0,"td",33)(1,"lib-icon",44),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.acquisDoublon(r,!1))}),p()()}if(t&2){let e,o,r,i=n.$implicit,s=a();l(),m("classIcone",!(i==null||(e=i.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(i==null||(o=i.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?s.FontAwesomeEnum.CIRCLE_MINUS:s.FontAwesomeEnum.CIRCLE_PLUS)("info",!(i==null||(r=i.getTimbreBlocAcquisModel())==null)&&r.isAcquis()?"pas acquis":"acquis")}}function ii(t,n){if(t&1&&(c(0,"th",39),d(1,"lib-libelle-model",40),p()),t&2){let e=a();l(),m("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","doublon")("align","center center")}}function ni(t,n){if(t&1){let e=h();c(0,"td",33)(1,"lib-icon",44),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.acquisDoublon(r,!0))}),p()()}if(t&2){let e,o,r,i=n.$implicit,s=a();l(),m("classIcone",!(i==null||(e=i.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"accent900":"primary")("type",s.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(i==null||(o=i.getTimbreBlocAcquisModel())==null)&&o.isDoublon()?s.FontAwesomeEnum.CIRCLE_MINUS:s.FontAwesomeEnum.CIRCLE_PLUS)("info",!(i==null||(r=i.getTimbreBlocAcquisModel())==null)&&r.isDoublon()?"pas en double":"en double")}}function oi(t,n){if(t&1&&(c(0,"th",45),d(1,"lib-icon",46),p()),t&2){let e=a();l(),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function ri(t,n){if(t&1){let e=h();c(0,"td",33)(1,"lib-icon",47),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.modifierDialog(r))}),p()()}if(t&2){let e=a();l(),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function li(t,n){if(t&1&&(c(0,"th",45),d(1,"lib-icon",46),p()),t&2){let e=a();l(),m("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Modifier")}}function mi(t,n){if(t&1){let e=h();c(0,"td",33)(1,"lib-icon",47),f("click",function(){let r=b(e).$implicit,i=a();return _(i.timbreBlocService.supprimerDialog(r))}),p()()}if(t&2){let e=a();l(),m("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function ci(t,n){t&1&&d(0,"tr",48)}function ai(t,n){t&1&&d(0,"tr",49)}var se=class t{constructor(n,e,o,r){this.authService=n;this.timbreBlocService=e;this.timbreUtilsService=o;this.utilsService=r;this.dataSource=new xe([])}paginator;sort;dataSource=new xe;displayedColumns;timbreBlocModel=new ne;annees$;modif=!0;FontAwesomeEnum=O;FontAwesomeTypeEnum=I;TypeTimbreEnum=V;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new oe),this.displayedColumns=["image","id","annee","type","monnaie","yt","nbTimbres","acquis"],this.modif&&this.authService.user$.pipe(ye(n=>z(n))).subscribe(n=>{n?.getDroit()>=9&&this.displayedColumns.push("doublon"),n?.getDroit()==10&&this.displayedColumns.push("modifier","supprimer")}),this.timbreBlocService.timbresBlocModel$.subscribe(n=>{this.dataSource.data=n})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(n){z(n)&&(this.dataSource.sort=this.sort)}applyFilter(n){let e=n.target.value;this.dataSource.filter=e.trim().toLowerCase()}exportTable(){let n=le.json_to_sheet(this.dataSource.data),e=le.book_new();le.book_append_sheet(e,n,"Donn\xE9es");let o=lt(e,{bookType:"xlsx",type:"array"}),r=new Blob([o],{type:"application/octet-stream"});(0,Tt.saveAs)(r,"export_timbres.xlsx")}static \u0275fac=function(e){return new(e||t)(T(F),T(M),T(A),T(N))};static \u0275cmp=B({type:t,selectors:[["app-timbre-bloc-resultat-table"]],viewQuery:function(e,o){if(e&1&&(_e(Z,5),_e(J,5)),e&2){let r;fe(r=Te())&&(o.paginator=r.first),fe(r=Te())&&(o.sort=r.first)}},decls:44,vars:14,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px",2,"height","50px"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px","style","height: 50px",4,"ngIf"],["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","type"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nbTimbres"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","monnaie"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[3,"modif"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"exportTable","primary","click",3,"click","type","icone","info"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image zoomIn",3,"src","click",4,"ngIf"],[1,"image","zoomIn",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],["mat-header-cell",""],[3,"object","key","align"],[1,"click",3,"click","classIcone","type","icone"],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[3,"type","icone","info"],[1,"primary","click",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,o){e&1&&(c(0,"div",0),d(1,"app-timbre-bloc-total"),u(2,Vt,5,4,"div",1),p(),d(3,"lib-spinner",2),y(4,"async"),c(5,"section",3),y(6,"async"),c(7,"table",4),f("matSortChange",function(i){return o.sortData(i)}),g(8,5),u(9,Nt,2,2,"th",6)(10,qt,2,1,"td",7),x(),g(11,8),u(12,Ut,2,2,"th",9)(13,Ht,2,1,"td",10),x(),g(14,11),u(15,$t,2,2,"th",9)(16,zt,2,1,"td",10),x(),g(17,12),u(18,Yt,2,3,"th",13)(19,Gt,2,3,"td",7),x(),g(20,14),u(21,Xt,2,2,"th",15)(22,Wt,2,1,"td",16),x(),g(23,17),u(24,Qt,2,2,"th",15)(25,Zt,2,1,"td",16),x(),g(26,18),u(27,Jt,2,2,"th",15)(28,Kt,2,1,"td",16),x(),g(29,19),u(30,ei,2,3,"th",13)(31,ti,2,4,"td",7),x(),g(32,20),u(33,ii,2,3,"th",13)(34,ni,2,4,"td",7),x(),g(35,21),u(36,oi,2,3,"th",22)(37,ri,2,3,"td",7),x(),g(38,23),u(39,li,2,3,"th",22)(40,mi,2,3,"td",7),x(),u(41,ci,1,0,"tr",24)(42,ai,1,0,"tr",25),p(),d(43,"mat-paginator",26),p()),e&2&&(l(2),m("ngIf",o.modif),l(),m("fxHide",v(4,9,o.timbreBlocService.load$)==!0)("textSpec","Chargement en cours ..."),l(2),m("fxHide",v(6,11,o.timbreBlocService.load$)==!1),l(2),m("dataSource",o.dataSource),l(34),m("matHeaderRowDef",o.displayedColumns),l(),m("matRowDefColumns",o.displayedColumns),l(),m("pageSize",15)("pageSizeOptions",he(13,kt)))},dependencies:[qe,He,Ge,$e,Ue,Xe,ze,Ye,We,Qe,Z,J,je,w,Ee,Ie,Ae,Oe,W,k,Je,ee,j,q,E],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}}lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.exportTable[_ngcontent-%COMP%]{font-size:1.7em}"]})};function si(t,n){t&1&&d(0,"app-timbre-bloc-resultat")}function ui(t,n){t&1&&d(0,"app-timbre-bloc-resultat-table")}var ue=class t{constructor(n,e){this.headerService=n;this.timbreBlocService=e}FontAwesomeTypeEnum=I;FontAwesomeEnum=O;ModeEnum=Se;ngOnInit(){}static \u0275fac=function(e){return new(e||t)(T(Be),T(M))};static \u0275cmp=B({type:t,selectors:[["app-timbre-bloc-layout"]],decls:5,vars:2,consts:[[1,"timbreLayout"],[1,"timbreBody"],[4,"ngIf"]],template:function(e,o){e&1&&(c(0,"div",0)(1,"div",1),d(2,"app-menu"),u(3,si,1,0,"app-timbre-bloc-resultat",2)(4,ui,1,0,"app-timbre-bloc-resultat-table",2),p()()),e&2&&(l(3),m("ngIf",o.headerService.mode==o.ModeEnum.GRAPH),l(),m("ngIf",o.headerService.mode==o.ModeEnum.TABLE))},dependencies:[w,rt,pe,se],styles:[".timbreLayout[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:row;justify-content:space-between;align-content:stretch;padding:20px 15px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:column;gap:20px}@media screen and (max-width: 800px){.timbreLayout[_ngcontent-%COMP%]{padding:15px 5px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{gap:10px}}"]})};var di=[{path:"",component:ue}],de=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t});static \u0275inj=P({imports:[Ce.forChild(di),Ce]})};var be=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t});static \u0275inj=P({providers:[N],imports:[X,Q,K,ie,te]})};var Ct=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t});static \u0275inj=P({providers:[it,M,A,nt,et],imports:[de,K,X,Re,Q,De,te,ie,Ze,ke,at,ct,pt,mt,be]})};export{Ct as TimbreBlocModule};

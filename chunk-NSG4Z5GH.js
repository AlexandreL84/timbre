import{a as re}from"./chunk-67O6EI3Z.js";import{a as se,b as ae,c as le,d as pe,e as de,f as ue}from"./chunk-6K26VDAP.js";import{v as W,x as q}from"./chunk-H3POU47K.js";import"./chunk-Z2WRGFA4.js";import{a as ne}from"./chunk-MJBYZQPI.js";import{$ as F,Aa as _,Fa as v,Fb as z,Ga as E,Gb as U,Ha as b,I as P,Jb as Y,Kb as G,Lb as J,M as I,Mb as K,N,Na as h,Nb as X,Oa as w,Pa as A,Rb as Z,S as c,Sc as ce,T as d,Tc as ge,Ub as ee,Vb as te,Xa as O,Xb as ie,Yb as oe,Za as D,ab as R,ba as a,bb as H,c as M,ca as y,ha as g,ia as r,ic as me,jc as x,ma as m,mb as $,na as s,oa as u,sa as V,ta as S,ua as l,vb as k,wa as T,x as L,xa as B,xb as Q,ya as j,za as f}from"./chunk-XHCW746T.js";import"./chunk-GOLCFQAC.js";var he=["formLogin"];function we(i,o){i&1&&u(0,"lib-spinner",5),i&2&&r("textSpec","Redirection en cours ...")("classSpinner","primary")}function xe(i,o){if(i&1&&(u(0,"mat-error",15),h(1,"async")),i&2){let t=l(2);r("innerHTML",w(1,1,t.messageError$),F)}}function Ce(i,o){if(i&1){let t=V();m(0,"form",6,1),S("ngSubmit",function(){c(t);let e=l();return d(e.onSignIn())}),g(2,xe,2,3,"mat-error",7),h(3,"async"),m(4,"div",8)(5,"label"),_(6," Login "),s(),m(7,"input",9),b("ngModelChange",function(e){c(t);let p=l();return E(p.email,e)||(p.email=e),d(e)}),s()(),m(8,"div",8)(9,"label"),_(10," Mot de passe "),s(),m(11,"div")(12,"input",10,2),b("ngModelChange",function(e){c(t);let p=l();return E(p.password,e)||(p.password=e),d(e)}),s(),m(14,"lib-icon",11),S("click",function(){c(t);let e=l();return d(e.showPassword())}),s()(),u(15,"app-control-error",12),s(),m(16,"div",13)(17,"button",14),_(18," Enregistrer "),s()()()}if(i&2){let t=f(1),n=f(13),e=l();r("ngClass",t!=null&&t.submitted?"red-color":"blue-color"),a(2),r("ngIf",w(3,8,e.messageError$)),a(5),v("ngModel",e.email),a(5),r("type",e.showPswd?"text":"password"),v("ngModel",e.password),a(2),r("classIcone","primary")("icone",e.showPswd?e.FontAwesomeEnum.EYE_SLASH:e.FontAwesomeEnum.EYE),a(),r("control",n)}}var C=class i{constructor(o,t){this.headerService=o;this.authService=t}formLogin;redirection$=new M(null);messageError$=new M(null);email;password;showPswd=!1;FontAwesomeEnum=k;onSignIn(){this.messageError$.next(null),this.redirection$.next(null),this.formLogin?.valid&&this.authService.signIn(this.email,this.password).then(o=>{this.authService.user$.next(null),this.authService.userSelect$.next(null),this.authService.getUser().pipe(L()).subscribe(),this.headerService.setRoute("timbre"),this.redirection$.next(!0)}).catch(o=>{console.error(o),this.messageError$.next("Email ou mot de passe incorrect")})}showPassword(){this.showPswd=!this.showPswd}static \u0275fac=function(t){return new(t||i)(y(q),y(W))};static \u0275cmp=I({type:i,selectors:[["app-login"]],viewQuery:function(t,n){if(t&1&&T(he,5),t&2){let e;B(e=j())&&(n.formLogin=e.first)}},decls:5,vars:4,consts:[["load",""],["formLogin","ngForm"],["passwordModel","ngModel"],[1,"formlogin"],[3,"ngIf","ngIfElse"],[3,"textSpec","classSpinner"],["ngForm","formLogin",1,"formulaire-box-elevation",3,"ngSubmit","ngClass"],[3,"innerHTML",4,"ngIf"],[1,"form-input"],["name","email","type","text","required","","zControl","",2,"max-width","400px","width","100%",3,"ngModelChange","ngModel"],["name","password","noEspace","","required","",2,"max-width","400px","width","100%",3,"ngModelChange","type","ngModel"],[1,"eyeMdp","click",3,"click","classIcone","icone"],[3,"control"],[1,"boutonMdp"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"]],template:function(t,n){if(t&1&&(m(0,"section",3),g(1,we,1,2,"ng-template",4),h(2,"async"),g(3,Ce,19,10,"ng-template",null,0,A),s()),t&2){let e=f(4);a(),r("ngIf",w(2,2,n.redirection$)==!0)("ngIfElse",e)}},dependencies:[O,D,Q,X,U,Y,G,Z,K,J,re,le,x,me,pe,ce,ae,R],styles:[".formlogin[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:center;width:100%;height:100%}.formlogin[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{display:flex;flex-direction:column}.formlogin[_ngcontent-%COMP%]   .eyeMdp[_ngcontent-%COMP%]{width:20px!important;margin:0 0 0 -30px!important;z-index:1}.formlogin[_ngcontent-%COMP%]   .boutonMdp[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}@media screen and (max-width: 800px){.formlogin[_ngcontent-%COMP%]{justify-content:center}}@media screen and (min-width: 801px){.formlogin[_ngcontent-%COMP%]{margin-top:50px}}"]})};var Me=[{path:"",component:C}],fe=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=N({type:i});static \u0275inj=P({imports:[H,$.forChild(Me),z,ee,ie,oe,ne,te,x,ue,de,ge,se]})};export{fe as AuthentificationModule};

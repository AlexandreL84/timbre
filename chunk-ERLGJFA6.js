import{a as Ze,b as Z,d as I,e as B,f as et,h as tt,i as it,m as nt,n as ct}from"./chunk-IWMU4KYP.js";import{b as z}from"./chunk-6LZF5SW5.js";import{c as K,d as J,k as Je,m as ot,n as ee,o as ft,p as rt,q as mt}from"./chunk-VW2NLLUS.js";import{A as lt}from"./chunk-WDH6RHXI.js";import{e as Q,f as Xe,g as Qe,h as Ke}from"./chunk-SKMENTVJ.js";import{v as xe,w as ye}from"./chunk-FG7OFSHW.js";import"./chunk-Z2WRGFA4.js";import{a as Re}from"./chunk-XQP67XMC.js";import{Aa as C,Ab as Se,Ac as W,Ba as se,Bc as Fe,Ca as h,Cb as Me,Cc as ke,Db as Be,Dc as Ue,Eb as we,Ec as Ve,Fa as U,Fb as Ee,Ga as V,Gc as Ne,Ha as N,Hc as je,I as j,Jb as Ie,Jc as qe,Ka as Ce,Kc as He,M as E,Mb as Oe,Mc as $e,N as q,Na as g,Nc as Ye,Oa as x,Pc as ze,Qc as ue,Rc as Ge,S as u,Sc as L,T as b,Tc as We,Ub as Ae,Wb as Pe,Xa as Te,Ya as $,Za as O,aa as H,ab as A,ba as r,bb as ge,ca as T,ha as _,ia as m,ma as l,mb as de,na as c,oa as d,ob as Y,oc as Le,pa as S,qa as M,sa as v,ta as f,ua as p,ub as P,uc as De,vb as R,wa as ce,xa as ae,xb as ve,xc as X,ya as pe,yb as G,zb as he}from"./chunk-MY6LMDNH.js";import{f as _t}from"./chunk-GOLCFQAC.js";function Tt(t,o){if(t&1&&(l(0,"mat-option",4),C(1),c()),t&2){let e=o.$implicit;m("value",e),r(),h(" ",e," ")}}function gt(t,o){if(t&1){let e=v();l(0,"div",1)(1,"div",2)(2,"mat-select",3),N("ngModelChange",function(n){u(e);let a=p();return V(a.timbreUtilsService.timbreCritereBlocModel.type,n)||(a.timbreUtilsService.timbreCritereBlocModel.type=n),b(n)}),f("ngModelChange",function(n){u(e);let a=p();return b(a.filtreByCritereEvent(n))}),l(3,"mat-option",4),C(4),c(),l(5,"mat-option",4),C(6),c()()(),l(7,"div",2)(8,"mat-select",5),N("ngModelChange",function(n){u(e);let a=p();return V(a.timbreUtilsService.timbreCritereBlocModel.acquis,n)||(a.timbreUtilsService.timbreCritereBlocModel.acquis=n),b(n)}),f("ngModelChange",function(){u(e);let n=p();return b(n.filtreByCritere())}),l(9,"mat-option",4),C(10," Oui"),c(),l(11,"mat-option",4),C(12," Non"),c(),l(13,"mat-option",4),C(14," Tous"),c()()(),l(15,"div",2)(16,"mat-select",6),N("ngModelChange",function(n){u(e);let a=p();return V(a.timbreUtilsService.timbreCritereBlocModel.doublon,n)||(a.timbreUtilsService.timbreCritereBlocModel.doublon=n),b(n)}),f("ngModelChange",function(){u(e);let n=p();return b(n.filtreByCritere())}),l(17,"mat-option",4),C(18," Oui"),c(),l(19,"mat-option",4),C(20," Non"),c(),l(21,"mat-option",4),C(22," Tous"),c()()(),l(23,"div",7)(24,"mat-select",8),N("ngModelChange",function(n){u(e);let a=p();return V(a.timbreUtilsService.timbreCritereBlocModel.annees,n)||(a.timbreUtilsService.timbreCritereBlocModel.annees=n),b(n)}),f("ngModelChange",function(){u(e);let n=p();return b(n.filtreByCritere())}),_(25,Tt,2,2,"mat-option",9),g(26,"async"),c()()()}if(t&2){let e=p();r(2),U("ngModel",e.timbreUtilsService.timbreCritereBlocModel.type),m("placeholder","Type"),r(),m("value",e.TypeTimbreEnum.BLOC),r(),h(" ",e.TypeTimbreEnum.BLOC,""),r(),m("value",e.TypeTimbreEnum.CARNET),r(),h(" ",e.TypeTimbreEnum.CARNET,""),r(2),U("ngModel",e.timbreUtilsService.timbreCritereBlocModel.acquis),m("placeholder","Acquis"),r(),m("value","OUI"),r(2),m("value","NON"),r(2),m("value","TOUS"),r(3),U("ngModel",e.timbreUtilsService.timbreCritereBlocModel.doublon),m("placeholder","Doublon"),r(),m("value","OUI"),r(2),m("value","NON"),r(2),m("value","TOUS"),r(3),U("ngModel",e.timbreUtilsService.timbreCritereBlocModel.annees),m("placeholder","Ann\xE9es"),r(),m("ngForOf",x(26,19,e.annees$))}}var D=class t{constructor(o,e,i){this.authService=o;this.timbreBlocService=e;this.timbreUtilsService=i}modif=!0;annees$;TypeTimbreEnum=Ze;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc")}filtreByCritereEvent(o){this.timbreUtilsService.timbreCritereBlocModel[o]="OUI",this.recherche()}filtreByCritere(){this.timbreUtilsService.timbreCritereBlocModel.getAcquis()=="NON"&&this.timbreUtilsService.timbreCritereBlocModel.setDoublon("TOUS"),this.recherche()}recherche(){Y(this.timbreUtilsService.timbreCritereBlocModel.getAnnees())&&this.timbreUtilsService.timbreCritereBlocModel.getAnnees().length>0&&this.timbreBlocService.getBlocs(this.timbreUtilsService.timbreCritereBlocModel,!1)}static \u0275fac=function(e){return new(e||t)(T(z),T(B),T(I))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-recherche"]],inputs:{modif:"modif"},decls:1,vars:1,consts:[["class","menuRecherche",4,"ngIf"],[1,"menuRecherche"],[1,"form-input","select",2,"width","100px"],["name","type","multiple","",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],[1,"form-input","select",2,"width","150px"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"]],template:function(e,i){e&1&&_(0,gt,27,21,"div",0),e&2&&m("ngIf",i.modif)},dependencies:[De,Pe,$,O,Ie,Oe,A],styles:[".menuRecherche[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:0 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}@media screen and (max-width: 800px){.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:5px 10px}}"]})};var k=class t{constructor(o,e){this.dialog=o;this.timbreBlocService=e}FontAwesomeEnum=R;FontAwesomeTypeEnum=P;resume(){this.dialog.open(it,{height:"auto",maxHeight:"95vh",width:"1000px"})}static \u0275fac=function(e){return new(e||t)(T(Le),T(B))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-total"]],decls:16,vars:13,consts:[[1,"timbreTotal"],[1,"nbTimbre"],[1,"bold"],[1,"accent","click",3,"click","icone","type","info"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"span"),C(3,"Nombre de blocs : "),c(),l(4,"span",2),C(5),g(6,"async"),g(7,"async"),c()(),l(8,"div",1)(9,"span"),C(10,"Nombre de carnets : "),c(),l(11,"span",2),C(12),g(13,"async"),g(14,"async"),c()(),l(15,"lib-icon",3),f("click",function(){return i.resume()}),c()()),e&2&&(r(5),se(x(6,5,i.timbreBlocService.total$)?x(7,7,i.timbreBlocService.total$):0),r(7),se(x(13,9,i.timbreBlocService.totalCarnet$)?x(14,11,i.timbreBlocService.totalCarnet$):0),r(3),m("icone",i.FontAwesomeEnum.CHART_LINE_UP)("type",i.FontAwesomeTypeEnum.TYPE_SOLID)("info","D\xE9tail par ann\xE9e"))},dependencies:[L,A],styles:[".timbreTotal[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-content:center;gap:10px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1.2em}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 800px){.timbreTotal[_ngcontent-%COMP%]{height:25px;gap:5px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1em}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}}"]})};function ht(t,o){if(t&1){let e=v();l(0,"img",18),f("click",function(){u(e);let n=p().$implicit,a=p();return b(a.utilsService.zoom(n==null?null:n.getImageZoom()))}),c()}if(t&2){let e=p().$implicit;m("src",e==null?null:e.getImage(),H)}}function St(t,o){if(t&1&&d(0,"lib-icon",19),t&2){let e=p().$implicit,i=p();m("classIcone","primary")("type",i.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",i.FontAwesomeEnum.CIRCLE_INFO)("info",e==null?null:e.getYt())}}function Mt(t,o){if(t&1){let e=v();l(0,"div",6)(1,"div",7)(2,"div",8)(3,"lib-icon",9),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.acquisDoublon(n,!1))}),c(),l(4,"lib-icon",9),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.acquisDoublon(n,!0))}),c()(),l(5,"div",10)(6,"lib-icon",11),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.modifierDialog(n))}),c(),l(7,"lib-icon",11),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.supprimerDialog(n))}),c()()(),l(8,"div",12),_(9,ht,1,1,"img",13),c(),l(10,"div",14),C(11),l(12,"div",15),C(13),l(14,"lib-icon",16),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.isCarnet(n))}),c(),_(15,St,1,4,"lib-icon",17),c()()()}if(t&2){let e,i,n,a,w,_e,fe,s=o.$implicit,y=p();m("ngClass",!(s==null||(e=s.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"border-accent bg-accentA200":"border-primary"),r(3),m("classIcone",!(s==null||(i=s.getTimbreBlocAcquisModel())==null)&&i.isAcquis()?"accent":"primary")("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(s==null||(n=s.getTimbreBlocAcquisModel())==null)&&n.isAcquis()?y.FontAwesomeEnum.CIRCLE_MINUS:y.FontAwesomeEnum.CIRCLE_PLUS)("info",!(s==null||(a=s.getTimbreBlocAcquisModel())==null)&&a.isAcquis()?"pas acquis":"acquis"),r(),m("classIcone",!(s==null||(w=s.getTimbreBlocAcquisModel())==null)&&w.isDoublon()?"accent":"primary")("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(s==null||(_e=s.getTimbreBlocAcquisModel())==null)&&_e.isDoublon()?y.FontAwesomeEnum.CIRCLE_MINUS:y.FontAwesomeEnum.CIRCLE_PLUS)("info",!(s==null||(fe=s.getTimbreBlocAcquisModel())==null)&&fe.isDoublon()?"pas en double":"en double"),r(2),m("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",y.FontAwesomeEnum.PENCIL)("info","Modifier"),r(),m("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",y.FontAwesomeEnum.TRASH)("info","Supprimer"),r(2),m("ngIf",s==null?null:s.getImage()),r(2),h(" ",s==null?null:s.getAnnee()," "),r(2),h(" ",s==null?null:s.getNbTimbres()," "),r(),m("classIcone",s!=null&&s.isCarnet()?"accent":"primary")("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",s!=null&&s.isCarnet()?y.FontAwesomeEnum.CIRCLE_C:y.FontAwesomeEnum.CIRCLE_B),r(),m("ngIf",s==null?null:s.getYt())}}var oe=class t{constructor(o,e,i){this.timbreBlocService=o;this.timbreUtilsService=e;this.utilsService=i}timbreBlocModel=new K;annees$;modif=!0;FontAwesomeEnum=R;FontAwesomeTypeEnum=P;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new Z)}static \u0275fac=function(e){return new(e||t)(T(B),T(I),T(J))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-resultat"]],decls:10,vars:11,consts:[[1,"responsiveDirection","responsiveMenu"],[3,"modif"],[1,"spinner",3,"fxHide","textSpec"],[3,"fxHide"],[1,"listeTimbre","primary"],["class","detailTimbre",3,"ngClass",4,"ngFor","ngForOf"],[1,"detailTimbre",3,"ngClass"],[1,"headerTimbre"],[1,"actionTimbre"],[1,"click",3,"click","classIcone","type","icone","info"],[1,"actionTimbre2"],[1,"primary","click",3,"click","type","icone","info"],[1,"imgTimbre"],["class","image click",3,"src","click",4,"ngIf"],[1,"footerTimbre"],[1,"infoTimbre"],[1,"click",3,"click","classIcone","type","icone"],["class","click",3,"classIcone","type","icone","info",4,"ngIf"],[1,"image","click",3,"click","src"],[1,"click",3,"classIcone","type","icone","info"]],template:function(e,i){e&1&&(l(0,"div",0),d(1,"app-timbre-bloc-total")(2,"app-timbre-bloc-recherche",1),c(),d(3,"lib-spinner",2),g(4,"async"),l(5,"section",3),g(6,"async"),l(7,"div",4),_(8,Mt,16,22,"div",5),g(9,"async"),c()()),e&2&&(r(2),m("modif",i.modif),r(),m("fxHide",x(4,5,i.timbreBlocService.load$)==!0)("textSpec","Chargement en cours ..."),r(2),m("fxHide",x(6,7,i.timbreBlocService.load$)==!1),r(3),m("ngForOf",x(9,9,i.timbreBlocService.timbresBlocModel$)))},dependencies:[Te,$,O,G,ve,L,Q,D,k,A],styles:[".spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;flex:100%;height:100%}.listeTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.listeTimbre[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]{margin:10px;width:115px;height:150px;border-radius:10px;border:1px solid;padding:5px 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%;padding-bottom:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:start;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre2[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:end;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]{width:100%;display:flex;flex:auto;justify-content:center;align-items:center}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]   .infoTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;align-items:end;gap:5px}@media screen and (max-width: 800px){.listeTimbre[_ngcontent-%COMP%]{justify-content:space-evenly}}"]})};var ut=_t(ft());var wt=()=>[10,20,50,100];function Et(t,o){if(t&1){let e=v();l(0,"div",0),d(1,"app-timbre-bloc-recherche",27),l(2,"div",28)(3,"input",29),f("input",function(n){u(e);let a=p();return b(a.applyFilter(n))}),c()(),l(4,"lib-icon",30),f("click",function(){u(e);let n=p();return b(n.exportTable())}),c()()}if(t&2){let e=p();r(),m("modif",e.modif),r(3),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau")}}function It(t,o){if(t&1&&(l(0,"th",31),d(1,"lib-libelle-model",32),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","image")}}function Ot(t,o){if(t&1){let e=v();l(0,"img",35),f("click",function(){u(e);let n=p().$implicit,a=p();return b(a.utilsService.zoom(n==null?null:n.getImageZoom()))}),c()}if(t&2){let e=p().$implicit;m("src",e==null?null:e.getImageTable(),H)}}function At(t,o){if(t&1&&(l(0,"td",33),_(1,Ot,1,1,"img",34),c()),t&2){let e=o.$implicit;r(),m("ngIf",e==null?null:e.getImageTable())}}function Pt(t,o){if(t&1&&(l(0,"th",36),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","id")}}function Rt(t,o){if(t&1&&(l(0,"td",38),C(1),c()),t&2){let e=o.$implicit;r(),h(" ",e==null?null:e.getId()," ")}}function Lt(t,o){if(t&1&&(l(0,"th",36),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","annee")}}function Dt(t,o){if(t&1&&(l(0,"td",38),C(1),c()),t&2){let e=o.$implicit;r(),h(" ",e==null?null:e.getAnnee()," ")}}function Ft(t,o){if(t&1&&(l(0,"th",39),d(1,"lib-libelle-model",40),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","carnet")("align","center center")}}function kt(t,o){if(t&1){let e=v();l(0,"td",33)(1,"lib-icon",41),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.isCarnet(n))}),c()()}if(t&2){let e=o.$implicit,i=p();r(),m("type",i.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e!=null&&e.isCarnet()?i.FontAwesomeEnum.CHECK:i.FontAwesomeEnum.XMARK)}}function Ut(t,o){if(t&1&&(l(0,"th",42),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","nbTimbres")}}function Vt(t,o){if(t&1&&(l(0,"td",43),C(1),c()),t&2){let e=o.$implicit;r(),h(" ",e==null?null:e.getNbTimbres()," ")}}function Nt(t,o){if(t&1&&(l(0,"th",42),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","monnaie")}}function jt(t,o){if(t&1&&(l(0,"td",43),C(1),c()),t&2){let e=o.$implicit;r(),h(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function qt(t,o){if(t&1&&(l(0,"th",42),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel)("key","yt")}}function Ht(t,o){if(t&1&&(l(0,"td",43),C(1),c()),t&2){let e=o.$implicit;r(),h(" ",e==null?null:e.getYt()," ")}}function $t(t,o){if(t&1&&(l(0,"th",39),d(1,"lib-libelle-model",40),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","acquis")("align","center center")}}function Yt(t,o){if(t&1){let e=v();l(0,"td",33)(1,"lib-icon",44),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.acquisDoublon(n,!1))}),c()()}if(t&2){let e,i,n,a=o.$implicit,w=p();r(),m("classIcone",!(a==null||(e=a.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",w.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(a==null||(i=a.getTimbreBlocAcquisModel())==null)&&i.isAcquis()?w.FontAwesomeEnum.CIRCLE_MINUS:w.FontAwesomeEnum.CIRCLE_PLUS)("info",!(a==null||(n=a.getTimbreBlocAcquisModel())==null)&&n.isAcquis()?"pas acquis":"acquis")}}function zt(t,o){if(t&1&&(l(0,"th",39),d(1,"lib-libelle-model",40),c()),t&2){let e=p();r(),m("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","doublon")("align","center center")}}function Gt(t,o){if(t&1){let e=v();l(0,"td",33)(1,"lib-icon",44),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.acquisDoublon(n,!0))}),c()()}if(t&2){let e,i,n,a=o.$implicit,w=p();r(),m("classIcone",!(a==null||(e=a.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"accent":"primary")("type",w.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(a==null||(i=a.getTimbreBlocAcquisModel())==null)&&i.isDoublon()?w.FontAwesomeEnum.CIRCLE_MINUS:w.FontAwesomeEnum.CIRCLE_PLUS)("info",!(a==null||(n=a.getTimbreBlocAcquisModel())==null)&&n.isDoublon()?"pas en double":"en double")}}function Xt(t,o){if(t&1&&(l(0,"th",45),d(1,"lib-icon",46),c()),t&2){let e=p();r(),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Wt(t,o){if(t&1){let e=v();l(0,"td",33)(1,"lib-icon",47),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.modifierDialog(n))}),c()()}if(t&2){let e=p();r(),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Qt(t,o){if(t&1&&(l(0,"th",45),d(1,"lib-icon",46),c()),t&2){let e=p();r(),m("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Modifier")}}function Kt(t,o){if(t&1){let e=v();l(0,"td",33)(1,"lib-icon",47),f("click",function(){let n=u(e).$implicit,a=p();return b(a.timbreBlocService.supprimerDialog(n))}),c()()}if(t&2){let e=p();r(),m("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Zt(t,o){t&1&&d(0,"tr",48)}function Jt(t,o){t&1&&d(0,"tr",49)}var re=class t{constructor(o,e,i){this.timbreBlocService=o;this.timbreUtilsService=e;this.utilsService=i;this.dataSource=new ue([])}paginator;sort;dataSource=new ue;displayedColumns;timbreBlocModel=new K;annees$;modif=!0;FontAwesomeEnum=R;FontAwesomeTypeEnum=P;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new Z),this.displayedColumns=["image","id","annee","carnet","monnaie","yt","nbTimbres","acquis","doublon"],this.modif&&this.displayedColumns.push("modifier","supprimer"),this.timbreBlocService.timbresBlocModel$.subscribe(o=>{this.dataSource.data=o})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(o){Y(o)&&(this.dataSource.sort=this.sort)}applyFilter(o){let e=o.target.value;this.dataSource.filter=e.trim().toLowerCase()}exportTable(){let o=ee.json_to_sheet(this.dataSource.data),e=ee.book_new();ee.book_append_sheet(e,o,"Donn\xE9es");let i=ot(e,{bookType:"xlsx",type:"array"}),n=new Blob([i],{type:"application/octet-stream"});(0,ut.saveAs)(n,"export_timbres.xlsx")}static \u0275fac=function(e){return new(e||t)(T(B),T(I),T(J))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-resultat-table"]],viewQuery:function(e,i){if(e&1&&(ce(X,5),ce(W,5)),e&2){let n;ae(n=pe())&&(i.paginator=n.first),ae(n=pe())&&(i.sort=n.first)}},decls:44,vars:14,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px",2,"height","50px"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px","style","height: 50px",4,"ngIf"],["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","carnet"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nbTimbres"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","monnaie"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[3,"modif"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"exportTable","primary","click",3,"click","type","icone","info"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],["mat-header-cell",""],[3,"object","key","align"],[1,"click",3,"click","type","icone"],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[3,"type","icone","info"],[1,"primary","click",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,i){e&1&&(l(0,"div",0),d(1,"app-timbre-bloc-total"),_(2,Et,5,4,"div",1),c(),d(3,"lib-spinner",2),g(4,"async"),l(5,"section",3),g(6,"async"),l(7,"table",4),f("matSortChange",function(a){return i.sortData(a)}),S(8,5),_(9,It,2,2,"th",6)(10,At,2,1,"td",7),M(),S(11,8),_(12,Pt,2,2,"th",9)(13,Rt,2,1,"td",10),M(),S(14,11),_(15,Lt,2,2,"th",9)(16,Dt,2,1,"td",10),M(),S(17,12),_(18,Ft,2,3,"th",13)(19,kt,2,2,"td",7),M(),S(20,14),_(21,Ut,2,2,"th",15)(22,Vt,2,1,"td",16),M(),S(23,17),_(24,Nt,2,2,"th",15)(25,jt,2,1,"td",16),M(),S(26,18),_(27,qt,2,2,"th",15)(28,Ht,2,1,"td",16),M(),S(29,19),_(30,$t,2,3,"th",13)(31,Yt,2,4,"td",7),M(),S(32,20),_(33,zt,2,3,"th",13)(34,Gt,2,4,"td",7),M(),S(35,21),_(36,Xt,2,3,"th",22)(37,Wt,2,3,"td",7),M(),S(38,23),_(39,Qt,2,3,"th",22)(40,Kt,2,3,"td",7),M(),_(41,Zt,1,0,"tr",24)(42,Jt,1,0,"tr",25),c(),d(43,"mat-paginator",26),c()),e&2&&(r(2),m("ngIf",i.modif),r(),m("fxHide",x(4,9,i.timbreBlocService.load$)==!0)("textSpec","Chargement en cours ..."),r(2),m("fxHide",x(6,11,i.timbreBlocService.load$)==!1),r(2),m("dataSource",i.dataSource),r(34),m("matHeaderRowDef",i.displayedColumns),r(),m("matRowDefColumns",i.displayedColumns),r(),m("pageSize",15)("pageSizeOptions",Ce(13,wt)))},dependencies:[ke,Ve,He,Ne,Ue,$e,je,qe,Ye,ze,X,W,Fe,O,he,Se,Be,Me,G,L,Ke,Q,D,k,A],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.exportTable[_ngcontent-%COMP%]{font-size:1.7em}"]})};function ti(t,o){t&1&&d(0,"app-timbre-bloc-resultat")}function ii(t,o){t&1&&d(0,"app-timbre-bloc-resultat-table")}var le=class t{constructor(o,e,i,n){this.authService=o;this.timbreUtilsService=e;this.headerService=i;this.timbreBlocService=n}FontAwesomeTypeEnum=P;FontAwesomeEnum=R;ModeEnum=xe;ngOnInit(){this.headerService.titre$.next("TIMBRES - BLOC")}static \u0275fac=function(e){return new(e||t)(T(z),T(I),T(ye),T(B))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-layout"]],decls:5,vars:2,consts:[[1,"timbreLayout"],[1,"timbreBody"],[4,"ngIf"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1),d(2,"app-menu"),_(3,ti,1,0,"app-timbre-bloc-resultat",2)(4,ii,1,0,"app-timbre-bloc-resultat-table",2),c()()),e&2&&(r(3),m("ngIf",i.headerService.mode==i.ModeEnum.GRAPH),r(),m("ngIf",i.headerService.mode==i.ModeEnum.TABLE))},dependencies:[O,nt,oe,re],styles:[".timbreLayout[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:row;justify-content:space-between;align-content:stretch;padding:20px 15px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:column;gap:20px}@media screen and (max-width: 800px){.timbreLayout[_ngcontent-%COMP%]{padding:15px 5px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{gap:10px}}"]})};var ni=[{path:"",component:le}],me=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=q({type:t});static \u0275inj=j({imports:[de.forChild(ni),de]})};var bt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=q({type:t});static \u0275inj=j({providers:[et,B,I,tt,Je],imports:[me,Ge,ge,we,Ee,Ae,We,Qe,Xe,Re,mt,lt,ct,rt]})};export{bt as TimbreBlocModule};

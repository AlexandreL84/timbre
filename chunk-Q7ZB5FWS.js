import{b as $e,c as O,f as Oe,g as S,h as Fe,i as ke,j as Be,k as je,l as He,m as Ve,n as qe,o as Qe}from"./chunk-YA5XAZEI.js";import"./chunk-TKPOVYQD.js";import{a as te,b as ie}from"./chunk-O4K5XKVZ.js";import{a as ze,b as Ge}from"./chunk-ORWOFCUB.js";import{a as Ae,d as P,i as Pe,l as Ue,m as F,n as Ke,o as Ne,p as Ye}from"./chunk-6NVUERJ4.js";import{B as Xe}from"./chunk-I7IONR3M.js";import{a as Me,d as we,e as Re,f as Le,g as De}from"./chunk-6K26VDAP.js";import{v as ee}from"./chunk-WOTJWQDQ.js";import"./chunk-Z2WRGFA4.js";import{a as ue}from"./chunk-MJBYZQPI.js";import{Aa as x,Ab as le,Ac as $,Bc as de,Ca as h,Cb as me,Cc as be,Db as re,Dc as _e,Eb as ae,Ec as fe,Fb as ce,Gc as Te,Hc as Ce,I as v,Jc as xe,Ka as Z,Kc as ge,M,Mc as ye,N as w,Na as N,Nc as he,Oa as X,Pa as R,Pc as Se,Qc as Y,Rc as ve,S as T,Sc as Ee,T as C,Tc as Ie,Ub as pe,Vb as se,Za as I,aa as H,ab as J,ba as m,bb as K,ca as g,ha as u,ia as o,ma as r,mb as z,na as c,oa as s,ob as G,pa as d,qa as b,sa as y,ta as _,ua as l,ub as L,vb as D,wa as V,x as W,xa as q,xc as A,ya as U,yb as ne,za as E,zb as oe}from"./chunk-XHCW746T.js";import{f as Je}from"./chunk-GOLCFQAC.js";var We=Je(Ke());var nt=()=>[10,20,50,100];function ot(t,i){if(t&1){let e=y();r(0,"div",1),s(1,"app-timbre-recherche",29),r(2,"div",30)(3,"input",31),_("input",function(a){T(e);let p=l();return C(p.applyFilter(a))}),c()(),r(4,"lib-icon",32),_("click",function(){T(e);let a=l();return C(a.exportTable())}),c()()}if(t&2){let e=l();m(),o("modif",e.modif),m(3),o("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau")}}function lt(t,i){if(t&1&&(r(0,"th",33),s(1,"lib-libelle-model",34),c()),t&2){let e=l();m(),o("object",e.timbre)("key","image")}}function mt(t,i){if(t&1){let e=y();r(0,"img",37),_("click",function(){T(e);let a=l().$implicit,p=l();return C(p.utilsService.zoom(a==null?null:a.getImageZoom()))}),c()}if(t&2){let e=l().$implicit;o("src",e==null?null:e.getImageTable(),H)}}function rt(t,i){if(t&1&&(r(0,"td",35),u(1,mt,1,1,"img",36),c()),t&2){let e=i.$implicit;m(),o("ngIf",e==null?null:e.getImageTable())}}function at(t,i){if(t&1&&(r(0,"th",38),s(1,"lib-libelle-model",39),c()),t&2){let e=l();m(),o("object",e.timbre)("key","id")}}function ct(t,i){if(t&1&&(r(0,"td",40),x(1),c()),t&2){let e=i.$implicit;m(),h(" ",e==null?null:e.getId()," ")}}function pt(t,i){if(t&1&&(r(0,"th",38),s(1,"lib-libelle-model",39),c()),t&2){let e=l();m(),o("object",e.timbre)("key","annee")}}function st(t,i){if(t&1&&x(0),t&2){let e,n=l().$implicit;h(" ",n==null||(e=n.getTimbreBlocModel())==null?null:e.getAnnee()," ")}}function ut(t,i){if(t&1&&x(0),t&2){let e=l().$implicit;h(" ",e==null?null:e.getAnnee()," ")}}function dt(t,i){if(t&1&&(r(0,"td",40),u(1,st,1,1,"ng-template",41)(2,ut,1,1,"ng-template",null,0,R),c()),t&2){let e=i.$implicit,n=E(3);m(),o("ngIf",e==null?null:e.getIdBloc())("ngIfElse",n)}}function bt(t,i){if(t&1&&(r(0,"th",42),s(1,"lib-libelle-model",39),c()),t&2){let e=l();m(),o("object",e.timbre)("key","idBloc")}}function _t(t,i){if(t&1){let e=y();r(0,"img",37),_("click",function(){let a;T(e);let p=l(2).$implicit,f=l();return C(f.utilsService.zoom(p==null||(a=p.getTimbreBlocModel())==null?null:a.getImageZoom()))}),c()}if(t&2){let e,n=l(2).$implicit;o("src",n==null||(e=n.getTimbreBlocModel())==null?null:e.getImageTable(),H)}}function ft(t,i){if(t&1&&u(0,_t,1,1,"img",36),t&2){let e,n=l().$implicit;o("ngIf",n==null||(e=n.getTimbreBlocModel())==null?null:e.getImageTable())}}function Tt(t,i){t&1&&x(0," Non ")}function Ct(t,i){if(t&1&&(r(0,"td",40),u(1,ft,1,1,"ng-template",41)(2,Tt,1,0,"ng-template",null,0,R),c()),t&2){let e=i.$implicit,n=E(3);m(),o("ngIf",e==null?null:e.getIdBloc())("ngIfElse",n)}}function xt(t,i){if(t&1&&(r(0,"th",43),s(1,"lib-libelle-model",39),c()),t&2){let e=l();m(),o("object",e.timbre)("key","monnaie")}}function gt(t,i){if(t&1&&x(0),t&2){let e,n=l().$implicit;h(" ",(n==null||(e=n.getTimbreBlocModel())==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function yt(t,i){if(t&1&&x(0),t&2){let e=l().$implicit;h(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function ht(t,i){if(t&1&&(r(0,"td",44),u(1,gt,1,1,"ng-template",41)(2,yt,1,1,"ng-template",null,0,R),c()),t&2){let e=i.$implicit,n=E(3);m(),o("ngIf",e==null?null:e.getIdBloc())("ngIfElse",n)}}function St(t,i){if(t&1&&(r(0,"th",43),s(1,"lib-libelle-model",39),c()),t&2){let e=l();m(),o("object",e.timbre)("key","type")}}function vt(t,i){if(t&1&&(r(0,"td",44),x(1),c()),t&2){let e=i.$implicit;m(),h(" ",e==null?null:e.getType()," ")}}function Mt(t,i){if(t&1&&(r(0,"th",43),s(1,"lib-libelle-model",39),c()),t&2){let e=l();m(),o("object",e.timbre)("key","yt")}}function wt(t,i){if(t&1&&(r(0,"td",44),x(1),c()),t&2){let e=i.$implicit;m(),h(" ",e==null?null:e.getYt()," ")}}function Et(t,i){if(t&1&&(r(0,"th",42),s(1,"lib-libelle-model",45),c()),t&2){let e=l();m(),o("object",e.timbre==null?null:e.timbre.getTimbreAcquisModel())("key","acquis")("align","center center")}}function Rt(t,i){if(t&1){let e=y();r(0,"td",35)(1,"lib-icon",46),_("click",function(){let a=T(e).$implicit,p=l();return C(p.timbreService.acquisDoublon(a,!1))}),c()()}if(t&2){let e,n,a,p=i.$implicit,f=l();m(),o("classIcone",!(p==null||(e=p.getTimbreAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",f.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(p==null||(n=p.getTimbreAcquisModel())==null)&&n.isAcquis()?f.FontAwesomeEnum.CIRCLE_MINUS:f.FontAwesomeEnum.CIRCLE_PLUS)("info",!(p==null||(a=p.getTimbreAcquisModel())==null)&&a.isAcquis()?"pas acquis":"acquis")}}function It(t,i){if(t&1&&(r(0,"th",42),s(1,"lib-libelle-model",45),c()),t&2){let e=l();m(),o("object",e.timbre==null?null:e.timbre.getTimbreAcquisModel())("key","doublon")("align","center center")}}function Lt(t,i){if(t&1){let e=y();r(0,"td",35)(1,"lib-icon",46),_("click",function(){let a=T(e).$implicit,p=l();return C(p.timbreService.acquisDoublon(a,!0))}),c()()}if(t&2){let e,n,a,p=i.$implicit,f=l();m(),o("classIcone",!(p==null||(e=p.getTimbreAcquisModel())==null)&&e.isDoublon()?"accent":"primary")("type",f.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(p==null||(n=p.getTimbreAcquisModel())==null)&&n.isDoublon()?f.FontAwesomeEnum.CIRCLE_MINUS:f.FontAwesomeEnum.CIRCLE_PLUS)("info",!(p==null||(a=p.getTimbreAcquisModel())==null)&&a.isDoublon()?"pas en double":"en double")}}function Dt(t,i){if(t&1&&(r(0,"th",47),s(1,"lib-icon",48),c()),t&2){let e=l();m(),o("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function At(t,i){if(t&1){let e=y();r(0,"td",35)(1,"lib-icon",49),_("click",function(){let a=T(e).$implicit,p=l();return C(p.timbreService.modifierDialog(a))}),c()()}if(t&2){let e=l();m(),o("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function $t(t,i){if(t&1&&(r(0,"th",47),s(1,"lib-icon",48),c()),t&2){let e=l();m(),o("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Pt(t,i){if(t&1){let e=y();r(0,"td",35)(1,"lib-icon",49),_("click",function(){let a=T(e).$implicit,p=l();return C(p.timbreService.supprimerDialog(a))}),c()()}if(t&2){let e=l();m(),o("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Ot(t,i){t&1&&s(0,"tr",50)}function Ft(t,i){t&1&&s(0,"tr",51)}var k=class t{constructor(i,e,n,a){this.authService=i;this.timbreService=e;this.timbreUtilsService=n;this.utilsService=a;this.dataSource=new Y([])}paginator;sort;timbres$;load$;total$;modif=!0;dataSource=new Y;displayedColumns;timbre=new Ae;annees$;FontAwesomeEnum=D;FontAwesomeTypeEnum=L;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres2"),this.timbre.setTimbreAcquisModel(new $e),this.displayedColumns=["image","id","annee","idBloc","monnaie","type","yt","acquis","doublon"],this.modif&&this.authService.user$.pipe(W(i=>G(i)&&i?.getDroit()==10)).subscribe(i=>{this.displayedColumns.push("modifier","supprimer")}),this.timbres$.subscribe(i=>{this.dataSource.data=i})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(i){G(i)&&(this.dataSource.sort=this.sort)}applyFilter(i){let e=i.target.value;this.dataSource.filter=e.trim().toLowerCase()}exportTable(){let i=F.json_to_sheet(this.dataSource.data),e=F.book_new();F.book_append_sheet(e,i,"Donn\xE9es");let n=Ue(e,{bookType:"xlsx",type:"array"}),a=new Blob([n],{type:"application/octet-stream"});(0,We.saveAs)(a,"export_timbres.xlsx")}static \u0275fac=function(e){return new(e||t)(g(ee),g(S),g(O),g(P))};static \u0275cmp=M({type:t,selectors:[["app-timbre-resultat-table"]],viewQuery:function(e,n){if(e&1&&(V(A,5),V($,5)),e&2){let a;q(a=U())&&(n.paginator=a.first),q(a=U())&&(n.sort=a.first)}},inputs:{timbres$:"timbres$",load$:"load$",total$:"total$",modif:"modif"},decls:44,vars:15,consts:[["noBloc",""],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px",2,"height","50px"],[3,"total$"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px","style","height: 50px",4,"ngIf"],["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","idBloc"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","monnaie"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[3,"modif"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"primary","click",2,"font-size","1.7em",3,"click","type","icone","info"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],[3,"ngIf","ngIfElse"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[3,"object","key","align"],[1,"click",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[3,"type","icone","info"],[1,"primary","click",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,n){e&1&&(r(0,"div",1),s(1,"app-timbre-total",2),u(2,ot,5,4,"div",3),c(),s(3,"lib-spinner",4),N(4,"async"),r(5,"section",5),N(6,"async"),r(7,"table",6),_("matSortChange",function(p){return n.sortData(p)}),d(8,7),u(9,lt,2,2,"th",8)(10,rt,2,1,"td",9),b(),d(11,10),u(12,at,2,2,"th",11)(13,ct,2,1,"td",12),b(),d(14,13),u(15,pt,2,2,"th",11)(16,dt,4,2,"td",12),b(),d(17,14),u(18,bt,2,2,"th",15)(19,Ct,4,2,"td",12),b(),d(20,16),u(21,xt,2,2,"th",17)(22,ht,4,2,"td",18),b(),d(23,19),u(24,St,2,2,"th",17)(25,vt,2,1,"td",18),b(),d(26,20),u(27,Mt,2,2,"th",17)(28,wt,2,1,"td",18),b(),d(29,21),u(30,Et,2,3,"th",15)(31,Rt,2,4,"td",9),b(),d(32,22),u(33,It,2,3,"th",15)(34,Lt,2,4,"td",9),b(),d(35,23),u(36,Dt,2,3,"th",24)(37,At,2,3,"td",9),b(),d(38,25),u(39,$t,2,3,"th",24)(40,Pt,2,3,"td",9),b(),u(41,Ot,1,0,"tr",26)(42,Ft,1,0,"tr",27),c(),s(43,"mat-paginator",28),c()),e&2&&(m(),o("total$",n.total$),m(),o("ngIf",n.modif),m(),o("fxHide",X(4,10,n.load$)==!0)("textSpec","Chargement en cours ..."),m(2),o("fxHide",X(6,12,n.load$)==!1),m(2),o("dataSource",n.dataSource),m(34),o("matHeaderRowDef",n.displayedColumns),m(),o("matRowDefColumns",n.displayedColumns),m(),o("pageSize",15)("pageSizeOptions",Z(14,nt)))},dependencies:[be,fe,ge,Te,_e,ye,Ce,xe,he,Se,A,$,de,I,oe,le,re,me,ne,we,Ee,De,Fe,je,J],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.exportTable[_ngcontent-%COMP%]{font-size:1.7em}"]})};function Bt(t,i){if(t&1&&s(0,"app-timbre-resultat",3),t&2){let e=l();o("load$",e.timbreService.load$)("timbres$",e.timbreService.timbres$)("total$",e.timbreService.total$)}}function jt(t,i){if(t&1&&s(0,"app-timbre-resultat-table",3),t&2){let e=l();o("load$",e.timbreService.load$)("timbres$",e.timbreService.timbres$)("total$",e.timbreService.total$)}}var B=class t{constructor(i,e){this.headerService=i;this.timbreService=e}FontAwesomeTypeEnum=L;FontAwesomeEnum=D;ModeEnum=te;ngOnInit(){}static \u0275fac=function(e){return new(e||t)(g(ie),g(S))};static \u0275cmp=M({type:t,selectors:[["app-timbre-layout"]],decls:5,vars:2,consts:[[1,"timbreLayout"],[1,"timbreBody"],[3,"load$","timbres$","total$",4,"ngIf"],[3,"load$","timbres$","total$"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1),s(2,"app-menu"),u(3,Bt,1,3,"app-timbre-resultat",2)(4,jt,1,3,"app-timbre-resultat-table",2),c()()),e&2&&(m(3),o("ngIf",n.headerService.mode==n.ModeEnum.GRAPH),m(),o("ngIf",n.headerService.mode==n.ModeEnum.TABLE))},dependencies:[I,qe,k,He],styles:[".timbreLayout[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:row;justify-content:space-between;align-content:stretch;padding:20px 15px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:column;gap:20px}@media screen and (max-width: 800px){.timbreLayout[_ngcontent-%COMP%]{padding:15px 5px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{gap:10px}}"]})};var Ht=[{path:"",component:B},{path:"importer",component:Ve},{path:"resume",component:Be}],j=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=v({imports:[z.forChild(Ht),z]})};var Ze=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=v({providers:[S,P,O,Oe,ke,Pe],imports:[ve,j,K,ae,ce,pe,Re,Ie,ze,Le,ue,Me,Ne,Ge,Ye,Xe,Qe,se]})};export{Ze as TimbreModule};

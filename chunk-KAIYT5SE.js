import{c as ie,d as I,e as M,f as tt,i as it,m as nt,n as mt}from"./chunk-2DRP6VJP.js";import{b as te,c as ne,j as et,l as ot,m as oe,n as _t,o as lt}from"./chunk-MBI5FNEF.js";import{A as rt}from"./chunk-KSSLKP3F.js";import{e as ee,f as Qe,g as Ze,h as Je}from"./chunk-CAW42PKT.js";import{b as W}from"./chunk-ONC4EHIR.js";import{$ as h,A as u,Ab as Ee,Ac as Ve,Ba as X,Bb as F,Bc as Ne,Ca as O,Cb as Ie,Cc as je,Db as Oe,Ec as He,Fa as A,Fc as qe,Ga as ye,Hb as Ae,Hc as $e,Ia as Se,Ic as Ge,J as z,K as r,Kb as Re,Kc as Ye,L as T,Lc as ze,Nc as Xe,Oc as Te,Pa as Ce,Pc as We,Q as b,Qc as k,R as m,Rc as Ke,Sb as Pe,Ub as De,V as l,W as c,X as p,Xb as Le,Y as y,Z as S,aa as _,ab as D,ba as s,c as $,da as ue,ea as be,fa as _e,ha as f,ia as fe,ja as E,l as de,ma as j,mc as Fe,na as H,oa as q,pb as R,q as G,qb as P,ra as he,sb as Me,sc as ke,tb as Be,u as w,ua as g,v as Y,va as x,vb as Q,vc as Z,wb as L,xb as K,yb as we,yc as J,z as d,zc as Ue}from"./chunk-VVOEJAKA.js";import"./chunk-65CH3ZW6.js";import{g as bt}from"./chunk-GV7GV3NK.js";function Ct(t,n){if(t&1&&(l(0,"mat-option",4),f(1),c()),t&2){let e=n.$implicit;m("value",e),r(),E(" ",e," ")}}function Tt(t,n){if(t&1){let e=h();l(0,"div",1)(1,"div",2)(2,"mat-select",3),q("ngModelChange",function(o){d(e);let a=s();return H(a.timbreUtilsService.timbreCritereBlocModel.acquis,o)||(a.timbreUtilsService.timbreCritereBlocModel.acquis=o),u(o)}),_("ngModelChange",function(){d(e);let o=s();return u(o.filtreByCritere())}),l(3,"mat-option",4),f(4," Oui"),c(),l(5,"mat-option",4),f(6," Non"),c(),l(7,"mat-option",4),f(8," Tous"),c()()(),l(9,"div",2)(10,"mat-select",5),q("ngModelChange",function(o){d(e);let a=s();return H(a.timbreUtilsService.timbreCritereBlocModel.doublon,o)||(a.timbreUtilsService.timbreCritereBlocModel.doublon=o),u(o)}),_("ngModelChange",function(){d(e);let o=s();return u(o.filtreByCritere())}),l(11,"mat-option",4),f(12," Oui"),c(),l(13,"mat-option",4),f(14," Non"),c(),l(15,"mat-option",4),f(16," Tous"),c()()(),l(17,"div",6)(18,"mat-select",7),q("ngModelChange",function(o){d(e);let a=s();return H(a.timbreUtilsService.timbreCritereBlocModel.carnet,o)||(a.timbreUtilsService.timbreCritereBlocModel.carnet=o),u(o)}),_("ngModelChange",function(){d(e);let o=s();return u(o.filtreByCritere())}),l(19,"mat-option",4),f(20," Oui"),c(),l(21,"mat-option",4),f(22," Non"),c(),l(23,"mat-option",4),f(24," Tous"),c()()(),l(25,"div",8)(26,"mat-select",9),q("ngModelChange",function(o){d(e);let a=s();return H(a.timbreUtilsService.timbreCritereBlocModel.annees,o)||(a.timbreUtilsService.timbreCritereBlocModel.annees=o),u(o)}),_("ngModelChange",function(){d(e);let o=s();return u(o.filtreByCritere())}),b(27,Ct,2,2,"mat-option",10),g(28,"async"),c()()()}if(t&2){let e=s();r(2),j("ngModel",e.timbreUtilsService.timbreCritereBlocModel.acquis),m("placeholder","Acquis"),r(),m("value","OUI"),r(2),m("value","NON"),r(2),m("value","TOUS"),r(3),j("ngModel",e.timbreUtilsService.timbreCritereBlocModel.doublon),m("placeholder","Doublon"),r(),m("value","OUI"),r(2),m("value","NON"),r(2),m("value","TOUS"),r(3),j("ngModel",e.timbreUtilsService.timbreCritereBlocModel.carnet),m("placeholder","Carnet"),r(),m("value","OUI"),r(2),m("value","NON"),r(2),m("value","TOUS"),r(3),j("ngModel",e.timbreUtilsService.timbreCritereBlocModel.annees),m("placeholder","Ann\xE9es"),r(),m("ngForOf",x(28,18,e.annees$))}}var U=class t{constructor(n,e,i){this.authService=n;this.timbreBlocService=e;this.timbreUtilsService=i}modif=!0;annees$;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres")}filtreByCritere(){this.timbreUtilsService.timbreCritereBlocModel.getAcquis()=="NON"&&this.timbreUtilsService.timbreCritereBlocModel.setDoublon("TOUS"),D(this.timbreUtilsService.timbreCritereBlocModel.getAnnees())&&this.timbreUtilsService.timbreCritereBlocModel.getAnnees().length>0&&this.timbreBlocService.getBlocs(this.timbreUtilsService.timbreCritereBlocModel)}static \u0275fac=function(e){return new(e||t)(T(W),T(M),T(I))};static \u0275cmp=w({type:t,selectors:[["app-timbre-bloc-recherche"]],inputs:{modif:"modif"},decls:1,vars:1,consts:[["class","menuRecherche",4,"ngIf"],[1,"menuRecherche"],[1,"form-input","select",2,"width","100px"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","100px"],["name","carnet",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],[1,"form-input","select",2,"width","150px"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"]],template:function(e,i){e&1&&b(0,Tt,29,20,"div",0),e&2&&m("ngIf",i.modif)},dependencies:[ke,De,X,O,L,F,Ae,Re,A],styles:[".menuRecherche[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:0 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}@media screen and (max-width: 800px){.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:5px 10px}}"]})};var N=class t{constructor(n,e){this.dialog=n;this.timbreBlocService=e}FontAwesomeEnum=P;FontAwesomeTypeEnum=R;resume(){this.dialog.open(it,{height:"auto",maxHeight:"95vh",width:"1000px"})}static \u0275fac=function(e){return new(e||t)(T(Fe),T(M))};static \u0275cmp=w({type:t,selectors:[["app-timbre-bloc-total"]],decls:16,vars:13,consts:[[1,"timbreTotal"],[1,"nbTimbre"],[1,"bold"],[1,"accent","click",3,"click","icone","type","info"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"span"),f(3,"Nombre de blocs : "),c(),l(4,"span",2),f(5),g(6,"async"),g(7,"async"),c()(),l(8,"div",1)(9,"span"),f(10,"Nombre de carnets : "),c(),l(11,"span",2),f(12),g(13,"async"),g(14,"async"),c()(),l(15,"lib-icon",3),_("click",function(){return i.resume()}),c()()),e&2&&(r(5),fe(x(6,5,i.timbreBlocService.total$)?x(7,7,i.timbreBlocService.total$):0),r(7),fe(x(13,9,i.timbreBlocService.totalCarnet$)?x(14,11,i.timbreBlocService.totalCarnet$):0),r(3),m("icone",i.FontAwesomeEnum.CHART_LINE_UP)("type",i.FontAwesomeTypeEnum.TYPE_SOLID)("info","D\xE9tail par ann\xE9e"))},dependencies:[k,A],styles:[".timbreTotal[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-content:center;gap:10px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1.2em}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 800px){.timbreTotal[_ngcontent-%COMP%]{height:25px;gap:5px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1em}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}}"]})};function ht(t,n){if(t&1){let e=h();l(0,"img",18),_("click",function(){d(e);let o=s().$implicit,a=s();return u(a.utilsService.zoom(o==null?null:o.getImageZoom()))}),c()}if(t&2){let e=s().$implicit;m("src",e==null?null:e.getImage(),z)}}function yt(t,n){if(t&1&&(l(0,"div",15),p(1,"lib-icon",19),c()),t&2){let e=s().$implicit,i=s();r(),m("classIcone","primary")("type",i.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",i.FontAwesomeEnum.CIRCLE_INFO)("info",e==null?null:e.getYt())}}function St(t,n){if(t&1){let e=h();l(0,"div",6)(1,"div",7)(2,"div",8)(3,"lib-icon",9),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.acquisDoublon(o,!1))}),c(),l(4,"lib-icon",9),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.acquisDoublon(o,!0))}),c()(),l(5,"div",10)(6,"lib-icon",11),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.modifierDialog(o))}),c(),l(7,"lib-icon",11),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.supprimerDialog(o))}),c()()(),l(8,"div",12),b(9,ht,1,1,"img",13),c(),l(10,"div",14),f(11),l(12,"div",15)(13,"lib-icon",16),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.isCarnet(o))}),c()(),b(14,yt,2,4,"div",17),c()()}if(t&2){let e,i,o,a,B,ve,C=n.$implicit,v=s();r(3),m("classIcone",!(C==null||(e=C.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",v.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(C==null||(i=C.getTimbreBlocAcquisModel())==null)&&i.isAcquis()?v.FontAwesomeEnum.CIRCLE_MINUS:v.FontAwesomeEnum.CIRCLE_PLUS)("info",!(C==null||(o=C.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?"pas acquis":"acquis"),r(),m("classIcone",!(C==null||(a=C.getTimbreBlocAcquisModel())==null)&&a.isDoublon()?"accent":"primary")("type",v.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(C==null||(B=C.getTimbreBlocAcquisModel())==null)&&B.isDoublon()?v.FontAwesomeEnum.CIRCLE_MINUS:v.FontAwesomeEnum.CIRCLE_PLUS)("info",!(C==null||(ve=C.getTimbreBlocAcquisModel())==null)&&ve.isDoublon()?"pas en double":"en double"),r(2),m("type",v.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",v.FontAwesomeEnum.PENCIL)("info","Modifier"),r(),m("type",v.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",v.FontAwesomeEnum.TRASH)("info","Supprimer"),r(2),m("ngIf",C==null?null:C.getImage()),r(2),E(" ",C==null?null:C.getAnnee()," "),r(2),m("classIcone",C!=null&&C.isCarnet()?"accent":"primary")("type",v.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",C!=null&&C.isCarnet()?v.FontAwesomeEnum.CIRCLE_C:v.FontAwesomeEnum.CIRCLE_B),r(),m("ngIf",C==null?null:C.getYt())}}var ce=class t{constructor(n,e,i){this.timbreBlocService=n;this.timbreUtilsService=e;this.utilsService=i}load$=new $(!1);timbreBlocModel=new te;annees$;modif=!0;FontAwesomeEnum=P;FontAwesomeTypeEnum=R;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new ie),this.load$.next(!1),this.timbreBlocService.timbresBlocModel$.subscribe(n=>{this.load$.next(!0)})}static \u0275fac=function(e){return new(e||t)(T(M),T(I),T(ne))};static \u0275cmp=w({type:t,selectors:[["app-timbre-bloc-resultat"]],decls:10,vars:11,consts:[[1,"spinner",3,"fxHide","textSpec"],[3,"fxHide"],[1,"responsiveDirection","responsiveMenu"],[3,"modif"],[1,"listeTimbre","primary"],["class","detailTimbre border-primary",4,"ngFor","ngForOf"],[1,"detailTimbre","border-primary"],[1,"headerTimbre"],[1,"actionTimbre"],[1,"click",3,"click","classIcone","type","icone","info"],[1,"actionTimbre2"],[1,"primary","click",3,"click","type","icone","info"],[1,"imgTimbre"],["class","image click",3,"src","click",4,"ngIf"],[1,"footerTimbre"],[1,"infoTimbre"],[1,"click",3,"click","classIcone","type","icone"],["class","infoTimbre",4,"ngIf"],[1,"image","click",3,"click","src"],[1,"click",3,"classIcone","type","icone","info"]],template:function(e,i){e&1&&(p(0,"lib-spinner",0),g(1,"async"),l(2,"section",1),g(3,"async"),l(4,"div",2),p(5,"app-timbre-bloc-total")(6,"app-timbre-bloc-recherche",3),c(),l(7,"div",4),b(8,St,15,20,"div",5),g(9,"async"),c()()),e&2&&(m("fxHide",x(1,5,i.load$)==!0)("textSpec","Chargement en cours ..."),r(2),m("fxHide",x(3,7,i.load$)==!1),r(4),m("modif",i.modif),r(2),m("ngForOf",x(9,9,i.timbreBlocService.timbresBlocModel$)))},dependencies:[X,O,Q,k,ee,U,N,A],styles:[".spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;flex:100%;height:100%}.listeTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.listeTimbre[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]{margin:10px;width:115px;height:150px;border-radius:10px;border:1px solid;padding:5px 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%;padding-bottom:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:start;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre2[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:end;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]{width:100%;display:flex;flex:auto;justify-content:center;align-items:center}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]   .infoTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;align-items:end;gap:5px}@media screen and (max-width: 800px){.listeTimbre[_ngcontent-%COMP%]{justify-content:space-evenly}}"]})};var dt=bt(_t());var Bt=()=>[10,20,50,100];function wt(t,n){if(t&1){let e=h();l(0,"div",2),p(1,"app-timbre-bloc-recherche",27),l(2,"div",28)(3,"input",29),_("input",function(o){d(e);let a=s();return u(a.applyFilter(o))}),c()(),l(4,"lib-icon",30),_("click",function(){d(e);let o=s();return u(o.exportTable())}),c()()}if(t&2){let e=s();r(),m("modif",e.modif),r(3),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau")}}function Et(t,n){if(t&1&&(l(0,"th",31),p(1,"lib-libelle-model",32),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","image")}}function It(t,n){if(t&1){let e=h();l(0,"img",35),_("click",function(){d(e);let o=s().$implicit,a=s();return u(a.utilsService.zoom(o==null?null:o.getImageZoom()))}),c()}if(t&2){let e=s().$implicit;m("src",e==null?null:e.getImageTable(),z)}}function Ot(t,n){if(t&1&&(l(0,"td",33),b(1,It,1,1,"img",34),c()),t&2){let e=n.$implicit;r(),m("ngIf",e==null?null:e.getImageTable())}}function At(t,n){if(t&1&&(l(0,"th",36),p(1,"lib-libelle-model",37),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","id")}}function Rt(t,n){if(t&1&&(l(0,"td",38),f(1),c()),t&2){let e=n.$implicit;r(),E(" ",e==null?null:e.getId()," ")}}function Pt(t,n){if(t&1&&(l(0,"th",36),p(1,"lib-libelle-model",37),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","annee")}}function Dt(t,n){if(t&1&&(l(0,"td",38),f(1),c()),t&2){let e=n.$implicit;r(),E(" ",e==null?null:e.getAnnee()," ")}}function Lt(t,n){if(t&1&&(l(0,"th",39),p(1,"lib-libelle-model",40),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","carnet")("align","center center")}}function Ft(t,n){if(t&1){let e=h();l(0,"td",33)(1,"lib-icon",41),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.isCarnet(o))}),c()()}if(t&2){let e=n.$implicit,i=s();r(),m("type",i.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e!=null&&e.isCarnet()?i.FontAwesomeEnum.CHECK:i.FontAwesomeEnum.XMARK)}}function kt(t,n){if(t&1&&(l(0,"th",42),p(1,"lib-libelle-model",37),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","nbTimbres")}}function Ut(t,n){if(t&1&&(l(0,"td",43),f(1),c()),t&2){let e=n.$implicit;r(),E(" ",e==null?null:e.getNbTimbres()," ")}}function Vt(t,n){if(t&1&&(l(0,"th",42),p(1,"lib-libelle-model",37),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","monnaie")}}function Nt(t,n){if(t&1&&(l(0,"td",43),f(1),c()),t&2){let e=n.$implicit;r(),E(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function jt(t,n){if(t&1&&(l(0,"th",42),p(1,"lib-libelle-model",37),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel)("key","yt")}}function Ht(t,n){if(t&1&&(l(0,"td",43),f(1),c()),t&2){let e=n.$implicit;r(),E(" ",e==null?null:e.getYt()," ")}}function qt(t,n){if(t&1&&(l(0,"th",39),p(1,"lib-libelle-model",40),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","acquis")("align","center center")}}function $t(t,n){if(t&1){let e=h();l(0,"td",33)(1,"lib-icon",44),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.acquisDoublon(o,!1))}),c()()}if(t&2){let e,i,o,a=n.$implicit,B=s();r(),m("classIcone",!(a==null||(e=a.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",B.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(a==null||(i=a.getTimbreBlocAcquisModel())==null)&&i.isAcquis()?B.FontAwesomeEnum.CIRCLE_MINUS:B.FontAwesomeEnum.CIRCLE_PLUS)("info",!(a==null||(o=a.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?"pas acquis":"acquis")}}function Gt(t,n){if(t&1&&(l(0,"th",39),p(1,"lib-libelle-model",40),c()),t&2){let e=s();r(),m("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","doublon")("align","center center")}}function Yt(t,n){if(t&1){let e=h();l(0,"td",33)(1,"lib-icon",44),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.acquisDoublon(o,!0))}),c()()}if(t&2){let e,i,o,a=n.$implicit,B=s();r(),m("classIcone",!(a==null||(e=a.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"accent":"primary")("type",B.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(a==null||(i=a.getTimbreBlocAcquisModel())==null)&&i.isDoublon()?B.FontAwesomeEnum.CIRCLE_MINUS:B.FontAwesomeEnum.CIRCLE_PLUS)("info",!(a==null||(o=a.getTimbreBlocAcquisModel())==null)&&o.isDoublon()?"pas en double":"en double")}}function zt(t,n){if(t&1&&(l(0,"th",45),p(1,"lib-icon",46),c()),t&2){let e=s();r(),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Xt(t,n){if(t&1){let e=h();l(0,"td",33)(1,"lib-icon",47),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.modifierDialog(o))}),c()()}if(t&2){let e=s();r(),m("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Wt(t,n){if(t&1&&(l(0,"th",45),p(1,"lib-icon",46),c()),t&2){let e=s();r(),m("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Modifier")}}function Qt(t,n){if(t&1){let e=h();l(0,"td",33)(1,"lib-icon",47),_("click",function(){let o=d(e).$implicit,a=s();return u(a.timbreBlocService.supprimerDialog(o))}),c()()}if(t&2){let e=s();r(),m("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Kt(t,n){t&1&&p(0,"tr",48)}function Zt(t,n){t&1&&p(0,"tr",49)}var ae=class t{constructor(n,e,i){this.timbreBlocService=n;this.timbreUtilsService=e;this.utilsService=i;this.dataSource=new Te([])}paginator;sort;load$=new $(!1);dataSource=new Te;displayedColumns;timbreBlocModel=new te;annees$;modif=!0;FontAwesomeEnum=P;FontAwesomeTypeEnum=R;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new ie),this.displayedColumns=["image","id","annee","carnet","monnaie","yt","nbTimbres","acquis","doublon"],this.modif&&this.displayedColumns.push("modifier","supprimer"),this.load$.next(!1),this.timbreBlocService.timbresBlocModel$.subscribe(n=>{this.dataSource.data=n,this.load$.next(!0)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(n){D(n)&&(this.dataSource.sort=this.sort)}applyFilter(n){let e=n.target.value;this.dataSource.filter=e.trim().toLowerCase()}exportTable(){let n=oe.json_to_sheet(this.dataSource.data),e=oe.book_new();oe.book_append_sheet(e,n,"Donn\xE9es");let i=ot(e,{bookType:"xlsx",type:"array"}),o=new Blob([i],{type:"application/octet-stream"});(0,dt.saveAs)(o,"export_timbres.xlsx")}static \u0275fac=function(e){return new(e||t)(T(M),T(I),T(ne))};static \u0275cmp=w({type:t,selectors:[["app-timbre-bloc-resultat-table"]],viewQuery:function(e,i){if(e&1&&(ue(Z,5),ue(J,5)),e&2){let o;be(o=_e())&&(i.paginator=o.first),be(o=_e())&&(i.sort=o.first)}},decls:44,vars:14,consts:[["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px",2,"height","50px"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px","style","height: 50px",4,"ngIf"],["id","pdf-content","mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","carnet"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nbTimbres"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","monnaie"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[3,"modif"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"exportTable","primary","click",3,"click","type","icone","info"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],["mat-header-cell",""],[3,"object","key","align"],[1,"click",3,"click","type","icone"],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[3,"type","icone","info"],[1,"primary","click",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,i){e&1&&(p(0,"lib-spinner",0),g(1,"async"),l(2,"section",1),g(3,"async"),l(4,"div",2),p(5,"app-timbre-bloc-total"),b(6,wt,5,4,"div",3),c(),l(7,"table",4),_("matSortChange",function(a){return i.sortData(a)}),y(8,5),b(9,Et,2,2,"th",6)(10,Ot,2,1,"td",7),S(),y(11,8),b(12,At,2,2,"th",9)(13,Rt,2,1,"td",10),S(),y(14,11),b(15,Pt,2,2,"th",9)(16,Dt,2,1,"td",10),S(),y(17,12),b(18,Lt,2,3,"th",13)(19,Ft,2,2,"td",7),S(),y(20,14),b(21,kt,2,2,"th",15)(22,Ut,2,1,"td",16),S(),y(23,17),b(24,Vt,2,2,"th",15)(25,Nt,2,1,"td",16),S(),y(26,18),b(27,jt,2,2,"th",15)(28,Ht,2,1,"td",16),S(),y(29,19),b(30,qt,2,3,"th",13)(31,$t,2,4,"td",7),S(),y(32,20),b(33,Gt,2,3,"th",13)(34,Yt,2,4,"td",7),S(),y(35,21),b(36,zt,2,3,"th",22)(37,Xt,2,3,"td",7),S(),y(38,23),b(39,Wt,2,3,"th",22)(40,Qt,2,3,"td",7),S(),b(41,Kt,1,0,"tr",24)(42,Zt,1,0,"tr",25),c(),p(43,"mat-paginator",26),c()),e&2&&(m("fxHide",x(1,9,i.load$)==!0)("textSpec","Chargement en cours ..."),r(2),m("fxHide",x(3,11,i.load$)==!1),r(4),m("ngIf",i.modif),r(),m("dataSource",i.dataSource),r(34),m("matHeaderRowDef",i.displayedColumns),r(),m("matRowDefColumns",i.displayedColumns),r(),m("pageSize",15)("pageSizeOptions",he(13,Bt)))},dependencies:[Ve,je,Ge,He,Ne,Ye,qe,$e,ze,Xe,Z,J,Ue,O,L,K,F,Ee,Q,k,Je,ee,U,N,A],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.exportTable[_ngcontent-%COMP%]{font-size:1.7em}"]})};function ei(t,n){t&1&&p(0,"app-timbre-bloc-resultat")}function ti(t,n){t&1&&p(0,"app-timbre-bloc-resultat-table")}var se=class t{constructor(n,e,i,o){this.authService=n;this.timbreUtilsService=e;this.headerService=i;this.timbreBlocService=o}FontAwesomeTypeEnum=R;FontAwesomeEnum=P;ngOnInit(){this.headerService.titre$.next("TIMBRES - BLOC"),this.authService.userSelect$.pipe(de(n=>D(n))).subscribe(n=>{this.timbreUtilsService.getAnneesAsync("/timbres_bloc").pipe(de(e=>D(e)&&e?.length>0)).subscribe(e=>{this.timbreUtilsService.timbreCritereModel.setAnnees([e[0]]),this.timbreBlocService.getBlocs(this.timbreUtilsService.timbreCritereModel)})})}ModeEnum=Me;static \u0275fac=function(e){return new(e||t)(T(W),T(I),T(Be),T(M))};static \u0275cmp=w({type:t,selectors:[["app-timbre-bloc-layout"]],decls:7,vars:2,consts:[["fxLayout","row","fxLayoutAlign","space-between stretch"],["fxFlex","5"],["fxFlex","","fxLayout","column","fxLayoutGap","20px"],[4,"ngIf"]],template:function(e,i){e&1&&(l(0,"div",0),p(1,"div",1),l(2,"div",2),p(3,"app-menu"),b(4,ei,1,0,"app-timbre-bloc-resultat",3)(5,ti,1,0,"app-timbre-bloc-resultat-table",3),c(),p(6,"div",1),c()),e&2&&(r(4),m("ngIf",i.headerService.mode==i.ModeEnum.GRAPH),r(),m("ngIf",i.headerService.mode==i.ModeEnum.TABLE))},dependencies:[O,L,K,F,we,nt,ce,ae],encapsulation:2})};var ii=[{path:"",component:se}],pe=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Y({type:t});static \u0275inj=G({imports:[Ce.forChild(ii),Ce]})};var ut=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=Y({type:t});static \u0275inj=G({providers:[tt,M,I,et,Se()],imports:[pe,We,ye,Ie,Oe,Pe,Ke,Ze,Qe,Le,lt,rt,mt]})};export{ut as TimbreBlocModule};

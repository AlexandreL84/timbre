import{b as k}from"./chunk-6K7P47QP.js";import{a as pe,b as ce,c as de,d as fe,e as ge,f as xe,g as he,h as ye}from"./chunk-7UQDETOP.js";import{$c as we,Bb as G,C as D,Ca as _,D as I,Da as h,Ea as B,Eb as q,Fb as O,H as c,Hb as Q,I as u,Ib as z,Jb as U,Ka as R,Kb as Y,Lb as J,Ma as H,Mb as K,Ob as X,Pa as j,Pb as Z,Q as N,Qa as $,S as l,Sb as ee,T as v,Tb as te,Ub as ie,Vb as oe,Wb as re,Y as d,Z as n,_a as W,_b as ne,_c as _e,ba as a,bc as ae,c as L,ca as m,cc as me,da as f,ec as le,fc as se,ha as A,ia as C,ja as s,la as P,ma as V,na as T,oa as g,pa as x,rc as ue,s as b,sc as w,ua as M,va as S,wa as E,y as F}from"./chunk-KNUPFN7F.js";import"./chunk-KBHVVLYT.js";var Ce=["formLogin"];function Me(i,o){i&1&&f(0,"lib-spinner",4),i&2&&n("textSpec","Redirection en cours ...")("classSpinner","primary")}function Se(i,o){if(i&1&&(f(0,"mat-error",17),_(1,"async")),i&2){let t=s(2);n("innerHTML",h(1,1,t.messageError$),N)}}function Ee(i,o){if(i&1){let t=A();a(0,"div",5)(1,"form",6,1),C("ngSubmit",function(){c(t);let e=s();return u(e.onSignIn())}),d(3,Se,2,3,"mat-error",7),_(4,"async"),a(5,"div",8)(6,"div",9)(7,"label"),x(8," Login "),m(),a(9,"input",10),E("ngModelChange",function(e){c(t);let p=s();return S(p.email,e)||(p.email=e),u(e)}),m()(),a(10,"div",9)(11,"label"),x(12," Mot de passe "),m(),a(13,"div",11)(14,"input",12,2),E("ngModelChange",function(e){c(t);let p=s();return S(p.password,e)||(p.password=e),u(e)}),m(),a(16,"lib-icon",13),C("click",function(){c(t);let e=s();return u(e.showPassword())}),m()(),f(17,"app-control-error",14),m()(),a(18,"div",15)(19,"button",16),x(20," Enregistrer "),m()()()()}if(i&2){let t=g(2),r=g(15),e=s();l(),n("ngClass",t!=null&&t.submitted?"red-color":"blue-color"),l(2),n("ngIf",h(4,8,e.messageError$)),l(6),M("ngModel",e.email),l(5),n("type",e.showPswd?"text":"password"),M("ngModel",e.password),l(2),n("classIcone","primary")("icone",e.showPswd?e.FontAwesomeEnum.EYE_SLASH:e.FontAwesomeEnum.EYE),l(),n("control",r)}}var y=class i{constructor(o,t){this.headerService=o;this.authService=t}formLogin;redirection$=new L(null);messageError$=new L(null);email;password;showPswd=!1;FontAwesomeEnum=G;onSignIn(){this.messageError$.next(null),this.redirection$.next(null),this.formLogin?.valid&&this.authService.signIn(this.email,this.password).then(o=>{this.authService.user$.next(null),this.authService.userSelect$.next(null),this.authService.getUser().pipe(b()).subscribe(),this.headerService.setRoute("timbre"),this.redirection$.next(!0)}).catch(o=>{console.error(o),this.messageError$.next("Email ou mot de passe incorrect")})}showPassword(){this.showPswd=!this.showPswd}static \u0275fac=function(t){return new(t||i)(v(q),v(k))};static \u0275cmp=D({type:i,selectors:[["app-login"]],viewQuery:function(t,r){if(t&1&&P(Ce,5),t&2){let e;V(e=T())&&(r.formLogin=e.first)}},decls:4,vars:4,consts:[["load",""],["formLogin","ngForm"],["passwordModel","ngModel"],[3,"ngIf","ngIfElse"],["fxFlexFill","",3,"textSpec","classSpinner"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","center center","fxFlexOffset","40px"],["ngForm","formLogin","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","space-between stretch",1,"formulaire-box-elevation","height100",3,"ngSubmit","ngClass"],[3,"innerHTML",4,"ngIf"],["fxLayout","column","fxLayoutGap","30px"],["fxLayout","column",1,"form-input"],["name","email","type","text","required","","zControl","",2,"max-width","400px","width","100%",3,"ngModelChange","ngModel"],["fxLayout","row","fxLayoutAlign","start center"],["name","password","required","",2,"max-width","400px","width","100%",3,"ngModelChange","type","ngModel"],["noEspace","",1,"eyeMdp","click",3,"click","classIcone","icone"],[3,"control"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","center end"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"]],template:function(t,r){if(t&1&&(d(0,Me,1,2,"ng-template",3),_(1,"async"),d(2,Ee,21,10,"ng-template",null,0,B)),t&2){let e=g(3);n("ngIf",h(1,2,r.redirection$)==!0)("ngIfElse",e)}},dependencies:[R,H,Q,z,K,Y,J,U,O,re,Z,ee,te,ne,oe,ie,ce,ge,w,ue,xe,_e,fe,j],styles:[".eyeMdp[_ngcontent-%COMP%]{width:20px!important;margin:0 0 0 -30px!important;z-index:1}"]})};var be=[{path:"",component:y}],Le=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=I({type:i});static \u0275inj=F({imports:[$,W.forChild(be),X,ae,le,se,pe,me,w,ye,he,we,de]})};export{Le as AuthentificationModule};

import{a as ce,b as de,c as fe,d as ge,e as xe,f as he,g as ye}from"./chunk-OMDVQU6O.js";import{b as k}from"./chunk-MSHDLTHR.js";import{$ as A,A as u,Aa as R,Ab as K,Ca as H,Cb as X,Db as Z,Fa as j,Ga as $,Gb as ee,Hb as te,I as N,Ib as ie,Jb as oe,K as l,Kb as re,L as v,Ob as ne,Pa as W,Pc as _e,Q as d,Qc as we,R as n,Rb as ae,Sb as me,Ub as le,V as a,Vb as se,W as m,Wb as pe,X as f,aa as C,ba as s,c as L,da as P,ea as V,fa as T,ga as g,gc as ue,ha as x,hc as w,l as b,ma as M,na as S,oa as E,q as F,qb as G,sb as q,tb as O,u as D,ua as _,v as I,va as h,vb as Q,wa as B,wb as z,xb as U,yb as Y,z as c,zb as J}from"./chunk-TRBS5FYF.js";import"./chunk-65CH3ZW6.js";import"./chunk-GV7GV3NK.js";var Ce=["formLogin"];function Me(i,o){i&1&&f(0,"lib-spinner",4),i&2&&n("textSpec","Redirection en cours ...")("classSpinner","primary")}function Se(i,o){if(i&1&&(f(0,"mat-error",17),_(1,"async")),i&2){let t=s(2);n("innerHTML",h(1,1,t.messageError$),N)}}function Ee(i,o){if(i&1){let t=A();a(0,"div",5)(1,"form",6,1),C("ngSubmit",function(){c(t);let e=s();return u(e.onSignIn())}),d(3,Se,2,3,"mat-error",7),_(4,"async"),a(5,"div",8)(6,"div",9)(7,"label"),x(8," Login "),m(),a(9,"input",10),E("ngModelChange",function(e){c(t);let p=s();return S(p.email,e)||(p.email=e),u(e)}),m()(),a(10,"div",9)(11,"label"),x(12," Mot de passe "),m(),a(13,"div",11)(14,"input",12,2),E("ngModelChange",function(e){c(t);let p=s();return S(p.password,e)||(p.password=e),u(e)}),m(),a(16,"lib-icon",13),C("click",function(){c(t);let e=s();return u(e.showPassword())}),m()(),f(17,"app-control-error",14),m()(),a(18,"div",15)(19,"button",16),x(20," Enregistrer "),m()()()()}if(i&2){let t=g(2),r=g(15),e=s();l(),n("ngClass",t!=null&&t.submitted?"red-color":"blue-color"),l(2),n("ngIf",h(4,8,e.messageError$)),l(6),M("ngModel",e.email),l(5),n("type",e.showPswd?"text":"password"),M("ngModel",e.password),l(2),n("classIcone","primary")("icone",e.showPswd?e.FontAwesomeEnum.EYE_SLASH:e.FontAwesomeEnum.EYE),l(),n("control",r)}}var y=class i{constructor(o,t){this.headerService=o;this.authService=t}formLogin;redirection$=new L(null);messageError$=new L(null);email;password;showPswd=!1;FontAwesomeEnum=G;onSignIn(){this.messageError$.next(null),this.redirection$.next(null),this.formLogin?.valid&&this.authService.signIn(this.email,this.password).then(o=>{this.authService.user$.next(null),this.authService.userSelect$.next(null),this.authService.getUser().pipe(b()).subscribe(),this.headerService.setRoute("timbre"),this.redirection$.next(!0)}).catch(o=>{console.error(o),this.messageError$.next("Email ou mot de passe incorrect")})}showPassword(){this.showPswd=!this.showPswd}static \u0275fac=function(t){return new(t||i)(v(q),v(k))};static \u0275cmp=D({type:i,selectors:[["app-login"]],viewQuery:function(t,r){if(t&1&&P(Ce,5),t&2){let e;V(e=T())&&(r.formLogin=e.first)}},decls:4,vars:4,consts:[["load",""],["formLogin","ngForm"],["passwordModel","ngModel"],[3,"ngIf","ngIfElse"],["fxFlexFill","",3,"textSpec","classSpinner"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","center center","fxFlexOffset","40px"],["ngForm","formLogin","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","space-between stretch",1,"formulaire-box-elevation","height100",3,"ngSubmit","ngClass"],[3,"innerHTML",4,"ngIf"],["fxLayout","column","fxLayoutGap","30px"],["fxLayout","column",1,"form-input"],["name","email","type","text","required","","zControl","",2,"max-width","400px","width","100%",3,"ngModelChange","ngModel"],["fxLayout","row","fxLayoutAlign","start center"],["name","password","required","",2,"max-width","400px","width","100%",3,"ngModelChange","type","ngModel"],["noEspace","",1,"eyeMdp","click",3,"click","classIcone","icone"],[3,"control"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","center end"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"]],template:function(t,r){if(t&1&&(d(0,Me,1,2,"ng-template",3),_(1,"async"),d(2,Ee,21,10,"ng-template",null,0,B)),t&2){let e=g(3);n("ngIf",h(1,2,r.redirection$)==!0)("ngIfElse",e)}},dependencies:[R,H,Q,z,K,Y,J,U,O,re,Z,ee,te,ne,oe,ie,ce,ge,w,ue,xe,_e,fe,j],styles:[".eyeMdp[_ngcontent-%COMP%]{width:20px!important;margin:0 0 0 -30px!important;z-index:1}"]})};var be=[{path:"",component:y}],Le=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=I({type:i});static \u0275inj=F({imports:[$,W.forChild(be),X,ae,le,se,pe,me,w,ye,he,we,de]})};export{Le as AuthentificationModule};

import{a as Jt,b as Nt,c as Ut,d as kt}from"./chunk-6CYXLZPC.js";import{a as k,b as It,c as Ne,d as Ie,e as Ee,h as X,i as Q,j as Ft}from"./chunk-EXMDPYSZ.js";import{a as Y,b as $,c as Lt,d as Dt,e as At,f as Bt,g as Rt,h as Le,i as ei,j as Ot,l as $t}from"./chunk-U3ZSWC23.js";import{C as jt,g as Et}from"./chunk-W3XNXTU3.js";import{b as Ct,d as Mt,e as G,f as yt,g as wt,h as we}from"./chunk-LMRVNFCC.js";import{a as Qe}from"./chunk-YKK6WNC6.js";import{A as _,Aa as ae,Ab as U,Ac as dt,Ba as se,Bb as Ke,Bc as ut,Ca as H,Cb as Je,Cc as bt,Db as et,Dc as ft,Ec as gt,Fa as q,Fc as _t,Ga as Ge,Gb as be,Gc as ht,Hb as fe,Hc as Tt,I as me,Ia as Ye,Ib as ge,Ic as Fe,J as te,Jb as _e,Jc as xt,K as s,Kb as he,Kc as vt,L as T,Lb as tt,Lc as St,Mb as it,Nb as nt,Ob as ot,Pa as Oe,Pb as rt,Q as b,Qb as lt,R as a,Rb as mt,Tb as Te,W as m,Wb as at,X as l,Y as d,Z as y,_ as S,aa as w,ab as u,ba as f,c as v,ca as c,da as He,ea as ie,f as Re,fa as ne,g as P,ga as oe,gc as xe,ha as I,hc as W,ia as p,ja as qe,jc as Ce,ka as E,l as M,la as ze,lc as Me,m as Pe,ma as D,na as A,oa as B,ob as Xe,p as Ve,pb as ce,q as re,qb as pe,ra as We,rb as Ze,rc as ve,s as V,sb as de,tb as ue,u as R,ua as x,uc as ye,v as le,va as C,vb as F,wa as O,wb as N,wc as Se,xb as j,xc as st,yc as ct,z as g,zb as z,zc as pt}from"./chunk-EDS3JHJR.js";import"./chunk-65CH3ZW6.js";import{g as $e}from"./chunk-GV7GV3NK.js";var L=class n{constructor(t,e,i,o,r,h){this.firestore=t;this.authService=e;this.timbreBlocService=i;this.uploadService=o;this.utilsService=r;this.timbreUtilsService=h}heigthTable=50;widthTimbre=100;heightTimbre=100;widthTimbreZoom=500;heightTimbreZoom=500;total$=new v(0);timbres$=new v(null);getTimbre(t){return this.firestore.collection("/timbres",e=>e.where("id","==",t)).valueChanges()}getTimbreByIdAsync(t){return P([this.getTimbre(t),this.timbreBlocService.getBlocsAsync()]).pipe(Re(([e,i])=>this.timbreUtilsService.constructTimbre(e[0],null,i)))}getTotal(t){this.total$.next(null),this.timbreUtilsService.getAllTimbres(t).pipe(M()).subscribe(e=>{this.total$.next(e?.length)})}getTimbres(t){this.getTotal(),this.timbres$.next(null),P([this.timbreUtilsService.getAllTimbres(t),this.getTimbreAcquis(),this.timbreBlocService.getBlocsAsync(t)]).pipe(M()).subscribe(([e,i,o])=>{this.timbres$.next(this.timbreUtilsService.constructTimbres(e,i,o,t))})}getTimbreAcquis(){return this.authService.getUser().pipe(M(),Pe(t=>u(t)?this.getTimbreAcquisByUser(t.getId()).pipe(M(),Re(e=>e)):null))}getTimbreAcquisByUser(t){return this.firestore.collection("/timbres_acquis",e=>e.where("idUser","==",t)).valueChanges()}acquis(t,e){return this.authService.getUser().pipe(M(i=>u(i))).subscribe(i=>{if(u(t?.getTimbreAcquisModel()?.getIdUser()))this.firestore.collection("/timbres_acquis").ref.where("idTimbre","==",t.getId()).where("idUser","==",i.getId()).get().then(o=>{o.forEach(r=>{let h=t.getTimbreAcquisModel();e?(h.setAcquis(!0),h.setDoublon(!h.isDoublon())):(h.setAcquis(!h.isAcquis()),h.isAcquis()||h.setDoublon(!1)),r.ref.update(Object.assign(new Object,h))})}).catch(o=>{console.error("Erreur de mise \xE0 jour:",o)});else{let o=new Ee;o.setIdUser(i.getId()),o.setIdTimbre(t.getId()),o.setAcquis(!0),o.setDoublon(e),t.setTimbreAcquisModel(o),this.firestore.collection("/timbres_acquis").add(Object.assign(new Object,o))}})}ajouterSansId(t){this.utilsService.getMaxIdentAsync("/timbres").pipe(M()).subscribe(e=>{t.setId(e),u(t.getIdBloc())&&(t.setAnnee(null),t.setMonnaie(null)),this.ajouter(t)})}ajouter(t){t.setTimbreAcquisModel(null),t.setTimbreBlocModel(null),this.firestore.collection("/timbres").add(Object.assign(new Object,t)),this.getTimbres()}modifier(t){t.setTimbreBlocModel(null),t.setTimbreAcquisModel(null),this.firestore.collection("/timbres").ref.where("id","==",t.getId()).get().then(e=>{e.forEach(i=>{i.ref.update(Object.assign(new Object,t)),this.getTimbres()})}).catch(e=>{console.error("Erreur de mise \xE0 jour:",e)})}supprimerTimbre(t){this.firestore.collection("/timbres").ref.where("id","==",t.getId()).get().then(e=>{e.forEach(i=>{i.ref.delete(),this.getTimbres()})}).catch(e=>{console.error("Erreur de suppression :",e)})}supprimer(t){this.authService.getUser().pipe(M(e=>u(e))).subscribe(e=>{this.timbreUtilsService.supprimerTimbreAcquis(t,e.getId()),this.supprimerTimbre(t)})}getBouchon(){let t=new k;return t.setAnnee(new Date().getFullYear()),t.setMonnaie("E"),t.setType(""),t.setYt(""),t}upload(t,e){let i=this.widthTimbre,o=this.heightTimbre;return e=="table"?(i=i*(this.heigthTable/o),o=this.heigthTable):e=="zoom"&&(i=i*(this.heightTimbreZoom/o),o=this.heightTimbreZoom),this.uploadService.processAndUploadImage(t?.getImage(),i,o,t?.getId(),this.getDossier(t,e))}getDossier(t,e){let i="timbre//";return u(t.getIdBloc())?i=i+t.getTimbreBlocModel().getAnnee():i=i+t.getAnnee(),u(e)&&(i=i+"/"+e),u(t.getIdBloc())&&(i=i+"/bloc/"+t.getIdBloc()),i}static \u0275fac=function(e){return new(e||n)(V(Xe),V(Qe),V(Q),V(Y),V($),V(X))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})};var ai=["canvas"];function si(n,t){if(n&1&&(m(0,"span",6)(1,"b"),p(2),l()()),n&2){let e=c();s(2),E("N\xB0",e.timbreModel==null?null:e.timbreModel.getId(),"")}}function ci(n,t){n&1&&d(0,"lib-spinner",7),n&2&&a("textSpec","Chargement en cours ...")}function pi(n,t){if(n&1&&(d(0,"mat-error",29),x(1,"async")),n&2){let e=c(2);a("innerHTML",C(1,1,e.messageError$),me)}}function di(n,t){if(n&1&&(m(0,"mat-option",18),p(1),l()),n&2){let e=t.$implicit;a("value",e),s(),ze(" ",e.getAnnee()," - ",e.getId()," ")}}function ui(n,t){if(n&1){let e=w();m(0,"img",30),f("click",function(){let o;g(e);let r=c(2);return _(r.utilsService.zoom(r.timbreModel==null||(o=r.timbreModel.getTimbreBlocModel())==null?null:o.getImageZoom()))}),l()}if(n&2){let e,i=c(2);a("src",i.timbreModel==null||(e=i.timbreModel.getTimbreBlocModel())==null?null:e.getImage(),te)}}function bi(n,t){if(n&1){let e=w();m(0,"form",8,1),f("ngSubmit",function(){g(e);let o=I(1),r=c();return _(r.valider(o))}),m(2,"div",9),b(3,pi,2,3,"mat-error",10),x(4,"async"),m(5,"div",11)(6,"div",12)(7,"label"),d(8,"lib-libelle-model",13),l(),m(9,"input",14),B("ngModelChange",function(o){g(e);let r=c();return A(r.timbreModel.annee,o)||(r.timbreModel.annee=o),_(o)}),f("ngModelChange",function(o){g(e);let r=c();return _(r.changeAnnee(o))}),l()(),m(10,"div",15)(11,"label"),d(12,"lib-libelle-model",13),l(),m(13,"div",16)(14,"mat-select",17),x(15,"async"),f("ngModelChange",function(o){g(e);let r=c();return _(r.changeBloc(o))}),d(16,"mat-option",18),b(17,di,2,3,"mat-option",19),x(18,"async"),l(),b(19,ui,1,1,"img",20),l()()(),m(20,"div",11)(21,"div",12)(22,"label"),d(23,"lib-libelle-model",13),l(),m(24,"input",21),B("ngModelChange",function(o){g(e);let r=c();return A(r.timbreModel.type,o)||(r.timbreModel.type=o),_(o)}),l()(),m(25,"div",12)(26,"label"),d(27,"lib-libelle-model",13),l(),m(28,"input",22),B("ngModelChange",function(o){g(e);let r=c();return A(r.timbreModel.monnaie,o)||(r.timbreModel.monnaie=o),_(o)}),l()()(),m(29,"div",11)(30,"div",12)(31,"label"),d(32,"lib-libelle-model",13),l(),m(33,"input",23),B("ngModelChange",function(o){g(e);let r=c();return A(r.timbreModel.yt,o)||(r.timbreModel.yt=o),_(o)}),l()(),d(34,"div",24),l(),m(35,"lib-upload",25),f("outPutObject",function(o){g(e);let r=c();return _(r.timbreModel=o)}),l()(),m(36,"div",26)(37,"button",27),f("click",function(){g(e);let o=c();return _(o.close())}),p(38," Annuler "),l(),m(39,"button",28),p(40," Enregistrer "),l()()()}if(n&2){let e,i,o=I(1),r=c();a("ngClass",o!=null&&o.submitted?"red-color":"blue-color"),s(3),a("ngIf",C(4,31,r.messageError$)),s(5),a("object",r.timbreModel)("key","annee"),s(),D("ngModel",r.timbreModel.annee),a("max",r.maxAnnee)("zMax",r.maxAnnee)("disabled",!!(r.timbreModel!=null&&r.timbreModel.getId())),s(3),a("object",r.timbreModel)("key","timbreBlocModel"),s(2),a("ngModel",r.timbreModel.getTimbreBlocModel())("placeholder","Choix bloc")("disabled",!!(r.timbreModel!=null&&r.timbreModel.getId())||((e=C(15,33,r.timbreBlocService.timbresBlocModel$))==null?null:e.length)<=0),s(2),a("value",null),s(),a("ngForOf",C(18,35,r.timbreBlocService.timbresBlocModel$)),s(2),a("ngIf",r.timbreModel==null||(i=r.timbreModel.getTimbreBlocModel())==null?null:i.getImage()),s(4),a("object",r.timbreModel)("key","type"),s(),D("ngModel",r.timbreModel.type),s(3),a("object",r.timbreModel)("key","monnaie"),s(),D("ngModel",r.timbreModel.monnaie),a("disabled",!!r.timbreModel.getTimbreBlocModel()),s(4),a("object",r.timbreModel)("key","yt"),s(),D("ngModel",r.timbreModel.yt),s(2),a("object",r.timbreModel)("key","image")("zoom",r.timbreModel.getImageZoom())("maxWidth",r.timbreService.widthTimbre)("maxHeight",r.timbreService.heightTimbre)}}var K=class n{constructor(t,e,i,o,r){this.httpResponseHandlerService=t;this.dialogRef=e;this.timbreService=i;this.timbreBlocService=o;this.utilsService=r}canvas;messageError$=new v(null);load$=new v(null);id;maxAnnee=new Date().getFullYear();timbreModel=new k;fileUploadModel=new It;ngOnInit(){this.initUpload(),this.load$.next(!1),u(this.id)?this.timbreService.getTimbreByIdAsync(this.id).subscribe(t=>{this.timbreModel=t,u(t.getTimbreBlocModel())&&(this.timbreModel.setAnnee(t.getTimbreBlocModel().getAnnee()),this.timbreModel.setMonnaie(t.getTimbreBlocModel().getMonnaie())),this.load$.next(!0)}):(this.timbreModel.setAnnee(new Date().getFullYear()),this.timbreModel.setMonnaie("E"),this.load$.next(!0)),this.changeAnnee(this.timbreModel.getAnnee())}initUpload(){this.fileUploadModel.setDossier("test"),this.fileUploadModel.setNom(new Date().getTime()?.toString());let t=new Ne;t.setMaxWidth(this.timbreService.widthTimbre),t.setMaxHeight(this.timbreService.heightTimbre),t.setDossier("autre");let e=new Ne;e.setMaxWidth(this.timbreService.widthTimbreZoom),e.setMaxHeight(this.timbreService.heightTimbreZoom),e.setDossier("zoom"),this.fileUploadModel.setDetail([t,e])}valider(t){if(this.messageError$.next(null),t?.valid)if(u(this.timbreModel.getImage()))this.saveData();else{this.messageError$.next("Veuillez s\xE9lectionner une image");return}}saveData(){this.load$.next(!1),u(this.timbreModel.getId())?this.save():this.ajouter()}ajouter(){this.utilsService.getMaxIdentAsync("/timbres").pipe(M()).subscribe(t=>{this.timbreModel.setId(t),this.save(!0)})}save(t){try{P([this.timbreService.upload(this.timbreModel,"autre"),this.timbreService.upload(this.timbreModel,"table"),this.timbreService.upload(this.timbreModel,"zoom")]).pipe(M(([e,i,o])=>u(e)&&u(o)&&u(i))).subscribe(([e,i,o])=>{u(i)&&i!="nok"&&this.timbreModel.setImage(i),u(e)&&e!="nok"&&this.timbreModel.setImageTable(e),u(o)&&o!="nok"&&this.timbreModel.setImageZoom(o),t?this.timbreService.ajouter(this.timbreModel):this.timbreService.modifier(this.timbreModel),this.httpResponseHandlerService.showNotificationSuccess("Transaction termin\xE9e","Votre timbre a bien \xE9t\xE9 modifi\xE9e."),this.load$.next(!0),this.dialogRef.close()})}catch{this.httpResponseHandlerService.showNotificationError("Transaction non aboutie","Votre timbre n'a pas pu \xEAtre modifi\xE9."),this.load$.next(!0)}}close(){this.dialogRef.close()}changeAnnee(t){if(this.timbreModel.setTimbreBlocModel(null),u(t)){let e=new Ie;e.setAnnees([t]),this.timbreBlocService.getBlocs(e)}}changeBloc(t){u(t)?(this.timbreModel.setIdBloc(t.getId()),this.timbreModel.setTimbreBlocModel(t),this.timbreModel.setMonnaie(t.getMonnaie())):(this.timbreModel.setIdBloc(null),this.timbreModel.setTimbreBlocModel(null),this.timbreModel.setMonnaie("E"))}static \u0275fac=function(e){return new(e||n)(T(Et),T(Ce),T(L),T(Q),T($))};static \u0275cmp=R({type:n,selectors:[["app-timbre-modifier"]],viewQuery:function(e,i){if(e&1&&ie(ai,5),e&2){let o;ne(o=oe())&&(i.canvas=o.first)}},decls:9,vars:6,consts:[["load",""],["formModif","ngForm"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","space-between stretch",1,"dialog-modal"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","start center",1,"titre-modal","bg-primary","color-white"],["class","accent",4,"ngIf"],[3,"ngIf","ngIfElse"],[1,"accent"],["fxFlexFill","",3,"textSpec"],["ngForm","formModif","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","space-between stretch",1,"formulaire-box-elevation",3,"ngSubmit","ngClass"],["fxLayout","column","fxLayoutGap","20px",1,"bloc-modal"],[3,"innerHTML",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayoutGap","30px","fxLayoutGap.lt-lg","5px"],["fxLayout","column",1,"form-input"],[3,"object","key"],["name","page","type","number","minlength","4","maxlength","4","min","1900","zMin","1900","required","","zControl","",1,"annee",2,"width","60px !important",3,"ngModelChange","ngModel","max","zMax","disabled"],["fxLayout","column",1,"form-input","select"],["fxLayout","row","fxLayoutGap","15px"],["name","bloc",2,"width","120px !important",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"selectMin",3,"value"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["style","max-height: 40px","class","click",3,"src","click",4,"ngIf"],["name","type","type","text","trim","","zControl","",3,"ngModelChange","ngModel"],["name","monnaie","type","text","trim","","minlength","1","maxlength","2","required","","zControl","",2,"width","25px !important",3,"ngModelChange","ngModel","disabled"],["name","yt","type","text","trim","","zControl","",3,"ngModelChange","ngModel"],["fxHide.lt-lg","","fxLayout","column",1,"form-input"],[3,"outPutObject","object","key","zoom","maxWidth","maxHeight"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","end end",1,"bloc-bouton-modal"],["type","button","mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"],[1,"click",2,"max-height","40px",3,"click","src"]],template:function(e,i){if(e&1&&(m(0,"div",2)(1,"div",3)(2,"span"),p(3),l(),b(4,si,3,1,"span",4),l(),b(5,ci,1,1,"ng-template",5),x(6,"async"),b(7,bi,41,37,"ng-template",null,0,O),l()),e&2){let o=I(8);s(3),E("",i.timbreModel!=null&&i.timbreModel.getId()?"MODIFICATION":"AJOUT"," "),s(),a("ngIf",i.timbreModel==null?null:i.timbreModel.getId()),s(),a("ngIf",C(6,4,i.load$)==!1)("ngIfElse",o)}},dependencies:[W,xe,ve,Te,ae,se,H,F,N,U,z,j,ue,de,he,et,tt,be,fe,ot,rt,lt,nt,it,_e,ge,G,we,Mt,Lt,Dt,At,Bt,q],encapsulation:2})};var Zt=$e(Jt());var Xt=$e(ei());var fi=()=>[10,20,50,100];function gi(n,t){if(n&1&&(m(0,"mat-option",8),p(1),l()),n&2){let e=t.$implicit;a("value",e),s(),E(" ",e," ")}}function _i(n,t){if(n&1&&(m(0,"th",40),d(1,"lib-libelle-model",41),l()),n&2){let e=c();s(),a("object",e.timbre)("key","image")}}function hi(n,t){if(n&1){let e=w();m(0,"img",44),f("click",function(){g(e);let o=c().$implicit,r=c();return _(r.utilsService.zoom(o==null?null:o.getImageZoom()))}),l()}if(n&2){let e=c().$implicit;a("src",e==null?null:e.getImageTable(),te)}}function Ti(n,t){if(n&1&&(m(0,"td",42),b(1,hi,1,1,"img",43),l()),n&2){let e=t.$implicit;s(),a("ngIf",e==null?null:e.getImageTable())}}function xi(n,t){if(n&1&&(m(0,"th",45),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre)("key","id")}}function Ci(n,t){if(n&1&&(m(0,"td",47),p(1),l()),n&2){let e=t.$implicit;s(),E(" ",e==null?null:e.getId()," ")}}function Mi(n,t){if(n&1&&(m(0,"th",45),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre)("key","annee")}}function vi(n,t){if(n&1&&p(0),n&2){let e,i=c().$implicit;E(" ",i==null||(e=i.getTimbreBlocModel())==null?null:e.getAnnee()," ")}}function yi(n,t){if(n&1&&p(0),n&2){let e=c().$implicit;E(" ",e==null?null:e.getAnnee()," ")}}function Si(n,t){if(n&1&&(m(0,"td",47),b(1,vi,1,1,"ng-template",48)(2,yi,1,1,"ng-template",null,0,O),l()),n&2){let e=t.$implicit,i=I(3);s(),a("ngIf",e==null?null:e.getIdBloc())("ngIfElse",i)}}function wi(n,t){if(n&1&&(m(0,"th",49),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre)("key","idBloc")}}function Ii(n,t){if(n&1){let e=w();m(0,"img",44),f("click",function(){let o;g(e);let r=c(2).$implicit,h=c();return _(h.utilsService.zoom(r==null||(o=r.getTimbreBlocModel())==null?null:o.getImageZoom()))}),l()}if(n&2){let e,i=c(2).$implicit;a("src",i==null||(e=i.getTimbreBlocModel())==null?null:e.getImageTable(),te)}}function Ei(n,t){if(n&1&&b(0,Ii,1,1,"img",43),n&2){let e,i=c().$implicit;a("ngIf",i==null||(e=i.getTimbreBlocModel())==null?null:e.getImage())}}function Li(n,t){n&1&&p(0," Non ")}function Di(n,t){if(n&1&&(m(0,"td",47),b(1,Ei,1,1,"ng-template",48)(2,Li,1,0,"ng-template",null,0,O),l()),n&2){let e=t.$implicit,i=I(3);s(),a("ngIf",e==null?null:e.getIdBloc())("ngIfElse",i)}}function Ai(n,t){if(n&1&&(m(0,"th",50),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre)("key","monnaie")}}function Bi(n,t){if(n&1&&p(0),n&2){let e,i=c().$implicit;E(" ",(i==null||(e=i.getTimbreBlocModel())==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function Ri(n,t){if(n&1&&p(0),n&2){let e=c().$implicit;E(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function Oi(n,t){if(n&1&&(m(0,"td",51),b(1,Bi,1,1,"ng-template",48)(2,Ri,1,1,"ng-template",null,0,O),l()),n&2){let e=t.$implicit,i=I(3);s(),a("ngIf",e==null?null:e.getIdBloc())("ngIfElse",i)}}function Fi(n,t){if(n&1&&(m(0,"th",50),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre)("key","type")}}function Ni(n,t){if(n&1&&(m(0,"td",51),p(1),l()),n&2){let e=t.$implicit;s(),E(" ",e==null?null:e.getType()," ")}}function ji(n,t){if(n&1&&(m(0,"th",50),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre)("key","yt")}}function Ui(n,t){if(n&1&&(m(0,"td",51),p(1),l()),n&2){let e=t.$implicit;s(),E(" ",e==null?null:e.getYt()," ")}}function ki(n,t){if(n&1&&(m(0,"th",45),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre==null?null:e.timbre.getTimbreAcquisModel())("key","acquis")}}function $i(n,t){if(n&1){let e=w();m(0,"td",42)(1,"lib-icon",52),f("click",function(){let o=g(e).$implicit,r=c();return _(r.acquis(o))}),l()()}if(n&2){let e,i,o,r=t.$implicit,h=c();s(),a("classIcone",!(r==null||(e=r.getTimbreAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",h.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(r==null||(i=r.getTimbreAcquisModel())==null)&&i.isAcquis()?h.FontAwesomeEnum.CIRCLE_MINUS:h.FontAwesomeEnum.CIRCLE_PLUS)("info",!(r==null||(o=r.getTimbreAcquisModel())==null)&&o.isAcquis()?"pas acquis":"acquis")}}function Pi(n,t){if(n&1&&(m(0,"th",45),d(1,"lib-libelle-model",46),l()),n&2){let e=c();s(),a("object",e.timbre==null?null:e.timbre.getTimbreAcquisModel())("key","doublon")}}function Vi(n,t){if(n&1){let e=w();m(0,"td",42)(1,"lib-icon",52),f("click",function(){let o=g(e).$implicit,r=c();return _(r.doublon(o))}),l()()}if(n&2){let e,i,o,r=t.$implicit,h=c();s(),a("classIcone",!(r==null||(e=r.getTimbreAcquisModel())==null)&&e.isDoublon()?"accent":"primary")("type",h.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(r==null||(i=r.getTimbreAcquisModel())==null)&&i.isDoublon()?h.FontAwesomeEnum.CIRCLE_MINUS:h.FontAwesomeEnum.CIRCLE_PLUS)("info",!(r==null||(o=r.getTimbreAcquisModel())==null)&&o.isDoublon()?"pas en double":"en double")}}function Hi(n,t){if(n&1&&(m(0,"th",53),d(1,"lib-icon",54),l()),n&2){let e=c();s(),a("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function qi(n,t){if(n&1){let e=w();m(0,"td",42)(1,"lib-icon",55),f("click",function(){let o=g(e).$implicit,r=c();return _(r.modifier(o))}),l()()}if(n&2){let e=c();s(),a("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function zi(n,t){if(n&1&&(m(0,"th",53),d(1,"lib-icon",54),l()),n&2){let e=c();s(),a("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Modifier")}}function Wi(n,t){if(n&1){let e=w();m(0,"td",42)(1,"lib-icon",55),f("click",function(){let o=g(e).$implicit,r=c();return _(r.supprimer(o))}),l()()}if(n&2){let e=c();s(),a("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Gi(n,t){n&1&&d(0,"tr",56)}function Yi(n,t){n&1&&d(0,"tr",57)}var J=class n{constructor(t,e,i,o){this.timbreService=t;this.timbreUtilsService=e;this.dialog=i;this.utilsService=o;this.dataSource=new Fe([])}paginator;sort;timbres$;total$;modif=!0;load$=new v(!1);dataSource=new Fe;displayedColumns;timbreCritereModel=new Ie;timbre=new k;annees$;FontAwesomeEnum=pe;FontAwesomeTypeEnum=ce;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres"),this.timbre.setTimbreAcquisModel(new Ee),this.displayedColumns=["image","id","annee","idBloc","monnaie","type","yt","acquis","doublon"],this.modif&&this.displayedColumns.push("modifier","supprimer"),this.load$.next(!1),this.timbres$.subscribe(t=>{this.dataSource.data=t,this.load$.next(!0)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.sort.active="idBloc",this.sort.direction="asc",this.dataSource.sort=this.sort}sortData(t){u(t)&&(this.dataSource.sort=this.sort)}filtreByCritere(){this.timbreCritereModel.getAcquis()=="NON"&&this.timbreCritereModel.setDoublon("TOUS"),this.timbreService.getTimbres(this.timbreCritereModel)}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase()}acquis(t){this.timbreService.acquis(t,!1)}doublon(t){this.timbreService.acquis(t,!0)}modifier(t){let e=this.dialog.open(K,{height:"75vh",maxHeight:"750px",width:"30%"});e.componentInstance.id=t.getId(),e.afterClosed().subscribe(()=>{e.close()})}supprimer(t){let e=this.dialog.open(Ot,{maxHeight:"95vh",data:{titre:"Confirmation",message:"Souhaitez-vous supprimer le timbre <b>n\xB0 "+t?.getId()+"</b> ?",btnDroite:"Oui",btnGauche:"Non"}});e.afterClosed().subscribe(()=>{e.componentInstance.data.resultat==="valider"&&this.timbreService.supprimer(t)})}exportTable(){let t=Le.json_to_sheet(this.dataSource.data),e=Le.book_new();Le.book_append_sheet(e,t,"Donn\xE9es");let i=Rt(e,{bookType:"xlsx",type:"array"}),o=new Blob([i],{type:"application/octet-stream"});(0,Xt.saveAs)(o,"export_timbres.xlsx")}generatePDFByImage(){let t="https://firebasestorage.googleapis.com/v0/b/book-f941b.appspot.com/o/AF.png?alt=media&token=a1039f78-3cff-41ab-8569-ea1b2cefe2c1";this.generatePDF(null)}generatePDF(t){}static \u0275fac=function(e){return new(e||n)(T(L),T(X),T(Me),T($))};static \u0275cmp=R({type:n,selectors:[["app-timbre-resultat"]],viewQuery:function(e,i){if(e&1&&(ie(ye,5),ie(Se,5)),e&2){let o;ne(o=oe())&&(i.paginator=o.first),ne(o=oe())&&(i.sort=o.first)}},inputs:{timbres$:"timbres$",total$:"total$",modif:"modif"},decls:80,vars:41,consts:[["noBloc",""],["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px"],["fxFlex","",2,"font-size","1.2em"],[1,"bold"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","100px"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["name","bloc",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","150px"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"primary","click",2,"font-size","1.7em",3,"click","type","icone","info"],["id","pdf-content","mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","matSort","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","idBloc"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","monnaie"],["mat-header-cell","","matSort","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","matSort","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],[3,"ngIf","ngIfElse"],["mat-header-cell",""],["mat-header-cell","","matSort","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",2,"font-size","1.2em",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[2,"font-size","1.2em",3,"type","icone","info"],[1,"primary","click",2,"font-size","1.2em",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,i){e&1&&(d(0,"lib-spinner",1),x(1,"async"),m(2,"section",2),x(3,"async"),m(4,"div",3)(5,"div",4)(6,"span"),p(7,"Nombre de timbres : "),l(),m(8,"span",5),p(9),x(10,"async"),x(11,"async"),l()(),m(12,"div",6)(13,"mat-select",7),B("ngModelChange",function(r){return A(i.timbreCritereModel.acquis,r)||(i.timbreCritereModel.acquis=r),r}),f("ngModelChange",function(){return i.filtreByCritere()}),m(14,"mat-option",8),p(15," Oui"),l(),m(16,"mat-option",8),p(17," Non"),l(),m(18,"mat-option",8),p(19," Tous"),l()()(),m(20,"div",6)(21,"mat-select",9),B("ngModelChange",function(r){return A(i.timbreCritereModel.doublon,r)||(i.timbreCritereModel.doublon=r),r}),f("ngModelChange",function(){return i.filtreByCritere()}),m(22,"mat-option",8),p(23," Oui"),l(),m(24,"mat-option",8),p(25," Non"),l(),m(26,"mat-option",8),p(27," Tous"),l()()(),m(28,"div",6)(29,"mat-select",10),B("ngModelChange",function(r){return A(i.timbreCritereModel.bloc,r)||(i.timbreCritereModel.bloc=r),r}),f("ngModelChange",function(){return i.filtreByCritere()}),m(30,"mat-option",8),p(31," Oui"),l(),m(32,"mat-option",8),p(33," Non"),l(),m(34,"mat-option",8),p(35," Tous"),l()()(),m(36,"div",11)(37,"mat-select",12),B("ngModelChange",function(r){return A(i.timbreCritereModel.annees,r)||(i.timbreCritereModel.annees=r),r}),f("ngModelChange",function(){return i.filtreByCritere()}),b(38,gi,2,2,"mat-option",13),x(39,"async"),l()(),m(40,"div",14)(41,"input",15),f("input",function(r){return i.applyFilter(r)}),l()(),m(42,"lib-icon",16),f("click",function(){return i.exportTable()}),l()(),m(43,"table",17),f("matSortChange",function(r){return i.sortData(r)}),y(44,18),b(45,_i,2,2,"th",19)(46,Ti,2,1,"td",20),S(),y(47,21),b(48,xi,2,2,"th",22)(49,Ci,2,1,"td",23),S(),y(50,24),b(51,Mi,2,2,"th",22)(52,Si,4,2,"td",23),S(),y(53,25),b(54,wi,2,2,"th",26)(55,Di,4,2,"td",23),S(),y(56,27),b(57,Ai,2,2,"th",28)(58,Oi,4,2,"td",29),S(),y(59,30),b(60,Fi,2,2,"th",28)(61,Ni,2,1,"td",29),S(),y(62,31),b(63,ji,2,2,"th",28)(64,Ui,2,1,"td",29),S(),y(65,32),b(66,ki,2,2,"th",22)(67,$i,2,4,"td",20),S(),y(68,33),b(69,Pi,2,2,"th",22)(70,Vi,2,4,"td",20),S(),y(71,34),b(72,Hi,2,3,"th",35)(73,qi,2,3,"td",20),S(),y(74,36),b(75,zi,2,3,"th",35)(76,Wi,2,3,"td",20),S(),b(77,Gi,1,0,"tr",37)(78,Yi,1,0,"tr",38),l(),d(79,"mat-paginator",39),l()),e&2&&(a("fxHide",C(1,30,i.load$)==!0)("textSpec","Chargement en cours ..."),s(2),a("fxHide",C(3,32,i.load$)==!1),s(7),qe(C(10,34,i.total$)?C(11,36,i.total$):i.dataSource==null||i.dataSource.data==null?null:i.dataSource.data.length),s(4),D("ngModel",i.timbreCritereModel.acquis),a("placeholder","Acquis"),s(),a("value","OUI"),s(2),a("value","NON"),s(2),a("value","TOUS"),s(3),D("ngModel",i.timbreCritereModel.doublon),a("placeholder","Doublon"),s(),a("value","OUI"),s(2),a("value","NON"),s(2),a("value","TOUS"),s(3),D("ngModel",i.timbreCritereModel.bloc),a("placeholder","Bloc"),s(),a("value","OUI"),s(2),a("value","NON"),s(2),a("value","TOUS"),s(3),D("ngModel",i.timbreCritereModel.annees),a("placeholder","Ann\xE9es"),s(),a("ngForOf",C(39,38,i.annees$)),s(4),a("type",i.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",i.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau"),s(),a("dataSource",i.dataSource),s(34),a("matHeaderRowDef",i.displayedColumns),s(),a("matRowDefColumns",i.displayedColumns),s(),a("pageSize",15)("pageSizeOptions",We(40,fi)))},dependencies:[ve,Te,ct,dt,gt,ut,pt,_t,bt,ft,ht,Tt,ye,Se,st,se,H,F,N,U,z,j,ue,be,_e,G,vt,we,q],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}"]})};function Xi(n,t){if(n&1&&(d(0,"lib-spinner",5),x(1,"async")),n&2){let e=c();a("textSpec",C(1,1,e.messageLoad$))}}function Qi(n,t){if(n&1&&(d(0,"mat-error",15),x(1,"async")),n&2){let e=c(2);a("innerHTML",C(1,1,e.messageError$),me)}}function Zi(n,t){if(n&1&&d(0,"app-timbre-resultat",16),n&2){let e=c(2);a("timbres$",e.timbres$)("modif",!1)}}function Ki(n,t){n&1&&(m(0,"button",17),p(1," Enregistrer "),l())}function Ji(n,t){if(n&1){let e=w();m(0,"form",6,1),f("ngSubmit",function(){g(e);let o=I(1),r=c();return _(r.valider(o))}),m(2,"div",7),b(3,Qi,2,3,"mat-error",8),x(4,"async"),b(5,Zi,1,2,"app-timbre-resultat",9),x(6,"async"),l(),m(7,"div",10)(8,"button",11),f("click",function(){g(e);let o=c();return _(o.close())}),p(9," Annuler "),l(),m(10,"input",12),f("change",function(o){g(e);let r=c();return _(r.onFileChange(o))}),l(),m(11,"button",13),f("click",function(){g(e);let o=c();return _(o.triggerFileInput())}),p(12," Choisir un fichier "),l(),b(13,Ki,2,0,"button",14),x(14,"async"),l()()}if(n&2){let e,i,o=I(1),r=c();a("ngClass",o!=null&&o.submitted?"red-color":"blue-color"),s(3),a("ngIf",C(4,5,r.messageError$)),s(2),a("ngIf",((e=C(6,7,r.timbres$))==null?null:e.length)>0),s(5),He("id",r.idFile),s(3),a("ngIf",((i=C(14,9,r.timbres$))==null?null:i.length)>0)}}var ee=class n{constructor(t,e,i){this.timbreService=t;this.uploadService=e;this.dialogRef=i}timbres$=new v(null);messageError$=new v(null);messageLoad$=new v("Chargement en cours ...");load$=new v(null);idFile="fileImport";ngOnInit(){}triggerFileInput(){document.getElementById(this.idFile).click()}onFileChange(t){let e=t.target.files[0];if(e){this.load$.next(!1),this.messageLoad$.next("Chargement en cours ...");let i=new FileReader;this.saveCsv(e,i)}}saveCsv(t,e){e.onload=()=>{let i=e.result;this.parseCsv(i)},e.readAsText(t)}parseCsv(t){let e=[];this.timbres$.next(null),Zt.parse(t,{header:!0,skipEmptyLines:!0,complete:i=>{u(i.data)&&i.data?.length>0&&i.data.forEach(o=>{e.push(this.setTimbre(o))}),this.timbres$.next(e),this.load$.next(!0)},error:i=>{console.error("Erreur lors du parsing du CSV :",i)}})}setTimbre(t){let e=new k;e.setId(t.CODE!="NULL"&&t.CODE!=""?Number(t.CODE):null),e.setIdBloc(t.IDENT_BLOC!="NULL"&&t.IDENT_BLOC!=""?Number(t.IDENT_BLOC):null),e.setAnnee(t.ANNEE!="NULL"&&t.ANNEE!=""?Number(t.ANNEE):null),e.setMonnaie(t.MONNAIE!="NULL"&&t.MONNAIE!=""?t.MONNAIE:null),e.setType(t.TYPE!="NULL"&&t.TYPE!=""?t.TYPE:null),e.setYt(t.YT!="NULL"&&t.YT!=""?t.YT:null);let i="/assets/images/timbres/"+e.getAnnee()+"/";return u(e.getIdBloc())&&(i+="bloc/"+e.getIdBloc()+"-"),i+=e.getId()+".png",this.uploadService.checkIfImageExists(i).pipe(M()).subscribe(o=>{o&&e.setImage(i)}),e}valider(t){this.messageError$.next(null),t?.valid&&(this.load$.next(!1),this.messageLoad$.next("Import en cours ..."),this.timbres$.pipe(M()).subscribe(e=>{if(u(e)&&e?.length>0)e.forEach((i,o)=>{this.saveTimbre(i,o==e.length-1)});else{this.messageError$.next("Donn\xE9es incorrectes");return}}))}saveTimbre(t,e){P([this.timbreService.upload(t,"autre"),this.timbreService.upload(t,"table"),this.timbreService.upload(t,"zoom")]).pipe(M(([i,o,r])=>u(i)&&u(r)&&u(o))).subscribe(([i,o,r])=>{u(o)&&o!="nok"&&t.setImage(o),u(i)&&i!="nok"&&t.setImageTable(i),u(r)&&r!="nok"&&t.setImageZoom(r),this.timbreService.ajouterSansId(t),e&&(this.load$.next(!0),this.close())})}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||n)(T(L),T(Y),T(Ce))};static \u0275cmp=R({type:n,selectors:[["app-timbre-importer"]],decls:8,vars:4,consts:[["load",""],["formModif","ngForm"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","space-between stretch",1,"dialog-modal"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","start center",1,"titre-modal","bg-primary","color-white"],[3,"ngIf","ngIfElse"],["fxFlexFill","",3,"textSpec"],["ngForm","formModif","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","start stretch",1,"formulaire-box-elevation",3,"ngSubmit","ngClass"],["fxLayout","column","fxLayoutGap","20px",1,"bloc-modal"],[3,"innerHTML",4,"ngIf"],[3,"timbres$","modif",4,"ngIf"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","end end",1,"bloc-bouton-modal"],["type","button","mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["type","file","accept",".xls, .xlsx, .csv","hidden","","required","",3,"change","id"],["type","button","mat-raised-button","","color","accent",1,"rounded","large","color-white",3,"click"],["type","submit","class","rounded large color-white","mat-raised-button","","color","accent",4,"ngIf"],[3,"innerHTML"],[3,"timbres$","modif"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"]],template:function(e,i){if(e&1&&(m(0,"div",2)(1,"div",3)(2,"span"),p(3,"TIMBRE IMPORTER"),l()(),b(4,Xi,2,3,"ng-template",4),x(5,"async"),b(6,Ji,15,11,"ng-template",null,0,O),l()),e&2){let o=I(7);s(4),a("ngIf",C(5,2,i.load$)==!1)("ngIfElse",o)}},dependencies:[W,xe,ae,H,F,N,U,z,j,de,he,fe,ge,G,J,q]})};var Ae=class n{constructor(t,e,i){this.headerService=t;this.timbreService=e;this.dialog=i}FontAwesomeTypeEnum=ce;FontAwesomeEnum=pe;ngOnInit(){this.headerService.titre$.next("TIMBRES"),this.timbreService.getTimbres()}ajouter(){let t=this.dialog.open(K,{maxHeight:"95vh",width:"30%"});t.afterClosed().subscribe(()=>{t.close()})}ajouterBloc(){let t=this.dialog.open(Ft,{maxHeight:"95vh",width:"30%"});t.afterClosed().subscribe(()=>{t.close()})}ajouterBouchon(){this.timbreService.ajouterSansId(this.timbreService.getBouchon())}importer(){let t=this.dialog.open(ee,{height:"90vh",width:"70%"});t.afterClosed().subscribe(()=>{t.close()})}static \u0275fac=function(e){return new(e||n)(T(Ze),T(L),T(Me))};static \u0275cmp=R({type:n,selectors:[["app-timbre-layout"]],decls:12,vars:2,consts:[["fxLayout","row","fxLayoutAlign","space-between stretch"],["fxFlex","5"],["fxFlex","","fxLayout","column","fxLayoutGap","20px"],["fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["mat-raised-button","","color","accent",1,"rounded","large","color-white",3,"click"],[3,"timbres$","total$"]],template:function(e,i){e&1&&(m(0,"div",0),d(1,"div",1),m(2,"div",2)(3,"div",3)(4,"button",4),f("click",function(){return i.ajouter()}),p(5," Ajouter "),l(),m(6,"button",4),f("click",function(){return i.ajouterBloc()}),p(7," Ajouter Bloc "),l(),m(8,"button",5),f("click",function(){return i.importer()}),p(9," Importer "),l()(),d(10,"app-timbre-resultat",6),l(),d(11,"div",1),l()),e&2&&(s(10),a("timbres$",i.timbreService.timbres$)("total$",i.timbreService.total$))},dependencies:[W,F,N,U,j,J]})};var en=[{path:"",component:Ae},{path:"importer",component:ee}],Be=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=le({type:n});static \u0275inj=re({imports:[Oe.forChild(en),Oe]})};var Kt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=le({type:n});static \u0275inj=re({providers:[$,X,L,Q,Y,Ye()],imports:[xt,Be,Ge,Ke,Je,mt,yt,St,Ut,wt,at,Ct,Nt,kt,$t,jt]})};export{Kt as TimbreModule};

import{a as oe,c as A,d as tt,e as re,f as S,g as ot,i as rt,j as lt,n as mt,o as ut}from"./chunk-MH3MQRW5.js";import{a as N,c as nt}from"./chunk-TKPOVYQD.js";import{a as we,b as Ee}from"./chunk-O4K5XKVZ.js";import{c as ne,d as j,i as it,l as ct,m as le,n as yt,o as at,p as st}from"./chunk-ALL4ZA7H.js";import{B as pt}from"./chunk-I7IONR3M.js";import{d as ee,e as Ke,f as ie,g as et}from"./chunk-6K26VDAP.js";import{v as Se}from"./chunk-WOTJWQDQ.js";import"./chunk-Z2WRGFA4.js";import{a as Ne}from"./chunk-MJBYZQPI.js";import{Aa as T,Ab as Pe,Ac as J,Ba as ve,Bc as Ue,Ca as B,Cb as Re,Cc as He,Da as he,Db as Ae,Dc as $e,Eb as Le,Ec as ze,Fa as H,Fb as Q,Ga as $,Gc as Ye,Ha as z,Hc as Ge,I as F,Jb as Fe,Jc as Xe,Ka as Me,Kc as We,M as E,Mb as De,Mc as Qe,N as D,Na as v,Nc as Ze,Oa as h,Pc as Je,Qc as ge,Rc as K,S as b,Sc as V,T as _,Tc as te,Ub as ke,Wb as Ve,Xa as Be,Ya as k,Za as I,aa as Y,ab as O,ba as r,bb as G,ca as C,ha as s,ia as l,ma as m,mb as Ce,na as c,oa as d,ob as X,oc as je,pa as g,qa as x,sa as M,ta as f,ua as p,ub as P,uc as qe,vb as R,wa as _e,xa as fe,xb as Ie,xc as Z,ya as Te,yb as W,zb as Oe}from"./chunk-XHCW746T.js";import{f as xt}from"./chunk-GOLCFQAC.js";function ht(t,i){if(t&1&&(m(0,"mat-option",7),T(1),v(2,"capitalize"),c()),t&2){let e=p().$implicit;l("value",e.value),r(),B(" ",h(2,2,e.value)," ")}}function Mt(t,i){if(t&1&&(g(0),s(1,ht,3,4,"mat-option",11),x()),t&2){let e=i.$implicit,n=p(2);r(),l("ngIf",e.value!=n.TypeTimbreEnum.TIMBRE)}}function Bt(t,i){if(t&1&&(m(0,"mat-option",7),T(1),c()),t&2){let e=i.$implicit;l("value",e),r(),B(" ",e," ")}}function St(t,i){if(t&1){let e=M();m(0,"div",1)(1,"div",2)(2,"mat-select",3),z("ngModelChange",function(o){b(e);let a=p();return $(a.preferenceService.timbreCritereBlocModel.type,o)||(a.preferenceService.timbreCritereBlocModel.type=o),_(o)}),f("ngModelChange",function(){b(e);let o=p();return _(o.filtreByCritere())}),s(3,Mt,2,1,"ng-container",4),v(4,"enumToArray"),c()(),m(5,"div",5)(6,"mat-select",6),z("ngModelChange",function(o){b(e);let a=p();return $(a.preferenceService.timbreCritereBlocModel.acquis,o)||(a.preferenceService.timbreCritereBlocModel.acquis=o),_(o)}),f("ngModelChange",function(){b(e);let o=p();return _(o.filtreByCritere())}),m(7,"mat-option",7),T(8," Oui"),c(),m(9,"mat-option",7),T(10," Non"),c(),m(11,"mat-option",7),T(12," Tous"),c()()(),m(13,"div",5)(14,"mat-select",8),z("ngModelChange",function(o){b(e);let a=p();return $(a.preferenceService.timbreCritereBlocModel.doublon,o)||(a.preferenceService.timbreCritereBlocModel.doublon=o),_(o)}),f("ngModelChange",function(){b(e);let o=p();return _(o.filtreByCritere())}),m(15,"mat-option",7),T(16," Oui"),c(),m(17,"mat-option",7),T(18," Non"),c(),m(19,"mat-option",7),T(20," Tous"),c()()(),m(21,"div",5)(22,"mat-select",9),z("ngModelChange",function(o){b(e);let a=p();return $(a.preferenceService.timbreCritereBlocModel.annees,o)||(a.preferenceService.timbreCritereBlocModel.annees=o),_(o)}),f("ngModelChange",function(){b(e);let o=p();return _(o.filtreByCritere())}),s(23,Bt,2,2,"mat-option",10),v(24,"async"),c()()()}if(t&2){let e=p();r(2),H("ngModel",e.preferenceService.timbreCritereBlocModel.type),l("placeholder","Type"),r(),l("ngForOf",h(4,16,e.TypeTimbreEnum)),r(3),H("ngModel",e.preferenceService.timbreCritereBlocModel.acquis),l("placeholder","Acquis"),r(),l("value","OUI"),r(2),l("value","NON"),r(2),l("value","TOUS"),r(3),H("ngModel",e.preferenceService.timbreCritereBlocModel.doublon),l("placeholder","Doublon"),r(),l("value","OUI"),r(2),l("value","NON"),r(2),l("value","TOUS"),r(3),H("ngModel",e.preferenceService.timbreCritereBlocModel.annees),l("placeholder","Ann\xE9es"),r(),l("ngForOf",h(24,18,e.annees$))}}var q=class t{constructor(i,e,n,o){this.authService=i;this.timbreBlocService=e;this.timbreUtilsService=n;this.preferenceService=o}modif=!0;annees$;TypeTimbreEnum=N;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc")}filtreByCritere(){this.preferenceService.timbreCritereBlocModel.getAcquis()=="NON"&&this.preferenceService.timbreCritereBlocModel.setDoublon("TOUS"),this.preferenceService.modifier("blocCritere",this.preferenceService.timbreCritereBlocModel),this.recherche()}recherche(){X(this.preferenceService.timbreCritereBlocModel.getAnnees())&&this.preferenceService.timbreCritereBlocModel.getAnnees().length>0&&this.timbreBlocService.getBlocs(this.preferenceService.timbreCritereBlocModel,!1)}static \u0275fac=function(e){return new(e||t)(C(Se),C(S),C(A),C(nt))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-recherche"]],inputs:{modif:"modif"},decls:1,vars:1,consts:[["class","menuRecherche",4,"ngIf"],[1,"menuRecherche"],[1,"form-input","select",2,"width","120px"],["name","type","multiple","",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],[4,"ngFor","ngForOf"],[1,"form-input","select",2,"width","100px"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["class","selectMin",3,"value",4,"ngIf"]],template:function(e,n){e&1&&s(0,St,25,20,"div",0),e&2&&l("ngIf",n.modif)},dependencies:[qe,Ve,k,I,Fe,De,O,tt,re],styles:[".menuRecherche[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:0 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}@media screen and (max-width: 800px){.menuRecherche[_ngcontent-%COMP%] > .form-input[_ngcontent-%COMP%]{margin:5px 10px}}"]})};function wt(t,i){if(t&1&&(g(0),m(1,"div",3)(2,"span"),T(3),v(4,"capitalize"),c(),m(5,"span",4),T(6),c()(),x()),t&2){let e=i.$implicit,n=i.first;r(3),he("",n?"Nombre de ":" / ","",h(4,3,e==null?null:e.getType())," : "),r(3),ve(e!=null&&e.getTotal()?e==null?null:e.getTotal():0)}}var U=class t{constructor(i,e){this.dialog=i;this.timbreBlocService=e}FontAwesomeEnum=R;FontAwesomeTypeEnum=P;resume(){this.dialog.open(lt,{height:"auto",maxHeight:"95vh",width:"1200px"})}static \u0275fac=function(e){return new(e||t)(C(je),C(S))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-total"]],decls:4,vars:6,consts:[[1,"timbreTotal"],[4,"ngFor","ngForOf"],[1,"accent","click",3,"click","icone","type","info"],[1,"nbTimbre"],[1,"bold"]],template:function(e,n){e&1&&(m(0,"div",0),s(1,wt,7,5,"ng-container",1),v(2,"async"),m(3,"lib-icon",2),f("click",function(){return n.resume()}),c()()),e&2&&(r(),l("ngForOf",h(2,4,n.timbreBlocService.total$)),r(2),l("icone",n.FontAwesomeEnum.CHART_LINE_UP)("type",n.FontAwesomeTypeEnum.TYPE_SOLID)("info","D\xE9tail par ann\xE9e"))},dependencies:[k,V,O,re],styles:[".timbreTotal[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-content:center;gap:10px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1.2em;justify-content:start;align-content:center}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.5em}@media screen and (max-width: 800px){.timbreTotal[_ngcontent-%COMP%]{height:25px;gap:5px}.timbreTotal[_ngcontent-%COMP%]   .nbTimbre[_ngcontent-%COMP%]{font-size:1em}.timbreTotal[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}}"]})};function Pt(t,i){if(t&1){let e=M();m(0,"img",19),f("click",function(){b(e);let o=p().$implicit,a=p();return _(a.utilsService.zoom(o==null?null:o.getImageZoom()))}),c()}if(t&2){let e=p().$implicit;l("src",e==null?null:e.getImage(),Y)}}function Rt(t,i){if(t&1&&(g(0),T(1),x()),t&2){let e=p().$implicit;r(),B(" ",e==null?null:e.getNbTimbres()," ")}}function At(t,i){if(t&1&&d(0,"lib-icon",20),t&2){let e=p().$implicit,n=p();l("classIcone","primary")("type",n.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",n.FontAwesomeEnum.CIRCLE_INFO)("info",e==null?null:e.getYt())}}function Lt(t,i){if(t&1){let e=M();m(0,"div",6)(1,"div",7)(2,"div",8)(3,"lib-icon",9),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.acquisDoublon(o,!1))}),c(),m(4,"lib-icon",9),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.acquisDoublon(o,!0))}),c()(),m(5,"div",10)(6,"lib-icon",11),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.modifierDialog(o))}),c(),m(7,"lib-icon",11),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.supprimerDialog(o))}),c()()(),m(8,"div",12),s(9,Pt,1,1,"img",13),c(),m(10,"div",14),T(11),m(12,"div",15),s(13,Rt,2,1,"ng-container",16),m(14,"lib-icon",17),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.isCarnet(o))}),c(),s(15,At,1,4,"lib-icon",18),c()()()}if(t&2){let e,n,o,a,w,xe,ye,u=i.$implicit,y=p();l("ngClass",!(u==null||(e=u.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"border-accent bg-accentA200":"border-primary"),r(3),l("classIcone",!(u==null||(n=u.getTimbreBlocAcquisModel())==null)&&n.isAcquis()?"accent":"primary")("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(u==null||(o=u.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?y.FontAwesomeEnum.CIRCLE_MINUS:y.FontAwesomeEnum.CIRCLE_PLUS)("info",!(u==null||(a=u.getTimbreBlocAcquisModel())==null)&&a.isAcquis()?"pas acquis":"acquis"),r(),l("classIcone",!(u==null||(w=u.getTimbreBlocAcquisModel())==null)&&w.isDoublon()?"accent":"primary")("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(u==null||(xe=u.getTimbreBlocAcquisModel())==null)&&xe.isDoublon()?y.FontAwesomeEnum.CIRCLE_MINUS:y.FontAwesomeEnum.CIRCLE_PLUS)("info",!(u==null||(ye=u.getTimbreBlocAcquisModel())==null)&&ye.isDoublon()?"pas en double":"en double"),r(2),l("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",y.FontAwesomeEnum.PENCIL)("info","Modifier"),r(),l("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",y.FontAwesomeEnum.TRASH)("info","Supprimer"),r(2),l("ngIf",u==null?null:u.getImage()),r(2),B(" ",u==null?null:u.getAnnee()," "),r(2),l("ngIf",(u==null?null:u.getType())!=y.TypeTimbreEnum.COLLECTOR),r(),l("classIcone",(u==null?null:u.getType())==y.TypeTimbreEnum.CARNET?"accent":(u==null?null:u.getType())==y.TypeTimbreEnum.COLLECTOR?"accent900":"primary")("type",y.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",(u==null?null:u.getType())==y.TypeTimbreEnum.BLOC?y.FontAwesomeEnum.CIRCLE_B:y.FontAwesomeEnum.CIRCLE_C),r(),l("ngIf",u==null?null:u.getYt())}}var pe=class t{constructor(i,e,n){this.timbreBlocService=i;this.timbreUtilsService=e;this.utilsService=n}timbreBlocModel=new ne;annees$;modif=!0;FontAwesomeEnum=R;FontAwesomeTypeEnum=P;TypeTimbreEnum=N;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new oe)}static \u0275fac=function(e){return new(e||t)(C(S),C(A),C(j))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-resultat"]],decls:10,vars:11,consts:[[1,"responsiveDirection","responsiveMenu"],[3,"modif"],[1,"spinner",3,"fxHide","textSpec"],[3,"fxHide"],[1,"listeTimbre","primary"],["class","detailTimbre",3,"ngClass",4,"ngFor","ngForOf"],[1,"detailTimbre",3,"ngClass"],[1,"headerTimbre"],[1,"actionTimbre"],[1,"click",3,"click","classIcone","type","icone","info"],[1,"actionTimbre2"],[1,"primary","click",3,"click","type","icone","info"],[1,"imgTimbre"],["class","image click",3,"src","click",4,"ngIf"],[1,"footerTimbre"],[1,"infoTimbre"],[4,"ngIf"],[1,"click",3,"click","classIcone","type","icone"],["class","click",3,"classIcone","type","icone","info",4,"ngIf"],[1,"image","click",3,"click","src"],[1,"click",3,"classIcone","type","icone","info"]],template:function(e,n){e&1&&(m(0,"div",0),d(1,"app-timbre-bloc-total")(2,"app-timbre-bloc-recherche",1),c(),d(3,"lib-spinner",2),v(4,"async"),m(5,"section",3),v(6,"async"),m(7,"div",4),s(8,Lt,16,22,"div",5),v(9,"async"),c()()),e&2&&(r(2),l("modif",n.modif),r(),l("fxHide",h(4,5,n.timbreBlocService.load$)==!0)("textSpec","Chargement en cours ..."),r(2),l("fxHide",h(6,7,n.timbreBlocService.load$)==!1),r(3),l("ngForOf",h(9,9,n.timbreBlocService.timbresBlocModel$)))},dependencies:[Be,k,I,W,Ie,V,ee,q,U,O],styles:[".spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;flex:100%;height:100%}.listeTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:left;width:100%}.listeTimbre[_ngcontent-%COMP%]   lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]{margin:10px;width:115px;height:150px;border-radius:10px;border:1px solid;padding:5px 10px;display:flex;flex-direction:column;justify-content:space-between;align-items:stretch}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%;padding-bottom:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:start;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .headerTimbre[_ngcontent-%COMP%]   .actionTimbre2[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:end;gap:5px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]{width:100%;display:flex;flex:auto;justify-content:center;align-items:center}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .imgTimbre[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]{height:25px;display:flex;flex-direction:row;justify-content:space-between;align-items:end;width:100%}.listeTimbre[_ngcontent-%COMP%]   .detailTimbre[_ngcontent-%COMP%]   .footerTimbre[_ngcontent-%COMP%]   .infoTimbre[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end;align-items:end;gap:5px}@media screen and (max-width: 800px){.listeTimbre[_ngcontent-%COMP%]{justify-content:space-evenly}}"]})};var Ct=xt(yt());var Dt=()=>[10,20,50,100];function kt(t,i){if(t&1){let e=M();m(0,"div",0),d(1,"app-timbre-bloc-recherche",27),m(2,"div",28)(3,"input",29),f("input",function(o){b(e);let a=p();return _(a.applyFilter(o))}),c()(),m(4,"lib-icon",30),f("click",function(){b(e);let o=p();return _(o.exportTable())}),c()()}if(t&2){let e=p();r(),l("modif",e.modif),r(3),l("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau")}}function Vt(t,i){if(t&1&&(m(0,"th",31),d(1,"lib-libelle-model",32),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","image")}}function Nt(t,i){if(t&1){let e=M();m(0,"img",35),f("click",function(){b(e);let o=p().$implicit,a=p();return _(a.utilsService.zoom(o==null?null:o.getImageZoom()))}),c()}if(t&2){let e=p().$implicit;l("src",e==null?null:e.getImageTable(),Y)}}function jt(t,i){if(t&1&&(m(0,"td",33),s(1,Nt,1,1,"img",34),c()),t&2){let e=i.$implicit;r(),l("ngIf",e==null?null:e.getImageTable())}}function qt(t,i){if(t&1&&(m(0,"th",36),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","id")}}function Ut(t,i){if(t&1&&(m(0,"td",38),T(1),c()),t&2){let e=i.$implicit;r(),B(" ",e==null?null:e.getId()," ")}}function Ht(t,i){if(t&1&&(m(0,"th",36),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","annee")}}function $t(t,i){if(t&1&&(m(0,"td",38),T(1),c()),t&2){let e=i.$implicit;r(),B(" ",e==null?null:e.getAnnee()," ")}}function zt(t,i){if(t&1&&(m(0,"th",39),d(1,"lib-libelle-model",40),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","type")("align","center center")}}function Yt(t,i){if(t&1){let e=M();m(0,"td",33)(1,"lib-icon",41),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.isCarnet(o))}),c()()}if(t&2){let e=i.$implicit,n=p();r(),l("classIcone",(e==null?null:e.getType())==n.TypeTimbreEnum.CARNET?"accent":(e==null?null:e.getType())==n.TypeTimbreEnum.COLLECTOR?"accent900":"primary")("type",n.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",(e==null?null:e.getType())==n.TypeTimbreEnum.BLOC?n.FontAwesomeEnum.CIRCLE_B:n.FontAwesomeEnum.CIRCLE_C)}}function Gt(t,i){if(t&1&&(m(0,"th",42),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","nbTimbres")}}function Xt(t,i){if(t&1&&(m(0,"td",43),T(1),c()),t&2){let e=i.$implicit;r(),B(" ",e==null?null:e.getNbTimbres()," ")}}function Wt(t,i){if(t&1&&(m(0,"th",42),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","monnaie")}}function Qt(t,i){if(t&1&&(m(0,"td",43),T(1),c()),t&2){let e=i.$implicit;r(),B(" ",(e==null?null:e.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function Zt(t,i){if(t&1&&(m(0,"th",42),d(1,"lib-libelle-model",37),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel)("key","yt")}}function Jt(t,i){if(t&1&&(m(0,"td",43),T(1),c()),t&2){let e=i.$implicit;r(),B(" ",e==null?null:e.getYt()," ")}}function Kt(t,i){if(t&1&&(m(0,"th",39),d(1,"lib-libelle-model",40),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","acquis")("align","center center")}}function ei(t,i){if(t&1){let e=M();m(0,"td",33)(1,"lib-icon",44),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.acquisDoublon(o,!1))}),c()()}if(t&2){let e,n,o,a=i.$implicit,w=p();r(),l("classIcone",!(a==null||(e=a.getTimbreBlocAcquisModel())==null)&&e.isAcquis()?"accent":"primary")("type",w.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(a==null||(n=a.getTimbreBlocAcquisModel())==null)&&n.isAcquis()?w.FontAwesomeEnum.CIRCLE_MINUS:w.FontAwesomeEnum.CIRCLE_PLUS)("info",!(a==null||(o=a.getTimbreBlocAcquisModel())==null)&&o.isAcquis()?"pas acquis":"acquis")}}function ti(t,i){if(t&1&&(m(0,"th",39),d(1,"lib-libelle-model",40),c()),t&2){let e=p();r(),l("object",e.timbreBlocModel==null?null:e.timbreBlocModel.getTimbreBlocAcquisModel())("key","doublon")("align","center center")}}function ii(t,i){if(t&1){let e=M();m(0,"td",33)(1,"lib-icon",44),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.acquisDoublon(o,!0))}),c()()}if(t&2){let e,n,o,a=i.$implicit,w=p();r(),l("classIcone",!(a==null||(e=a.getTimbreBlocAcquisModel())==null)&&e.isDoublon()?"accent":"primary")("type",w.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(a==null||(n=a.getTimbreBlocAcquisModel())==null)&&n.isDoublon()?w.FontAwesomeEnum.CIRCLE_MINUS:w.FontAwesomeEnum.CIRCLE_PLUS)("info",!(a==null||(o=a.getTimbreBlocAcquisModel())==null)&&o.isDoublon()?"pas en double":"en double")}}function ni(t,i){if(t&1&&(m(0,"th",45),d(1,"lib-icon",46),c()),t&2){let e=p();r(),l("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function oi(t,i){if(t&1){let e=M();m(0,"td",33)(1,"lib-icon",47),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.modifierDialog(o))}),c()()}if(t&2){let e=p();r(),l("type",e.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",e.FontAwesomeEnum.PENCIL)("info","Modifier")}}function ri(t,i){if(t&1&&(m(0,"th",45),d(1,"lib-icon",46),c()),t&2){let e=p();r(),l("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Modifier")}}function li(t,i){if(t&1){let e=M();m(0,"td",33)(1,"lib-icon",47),f("click",function(){let o=b(e).$implicit,a=p();return _(a.timbreBlocService.supprimerDialog(o))}),c()()}if(t&2){let e=p();r(),l("type",e.FontAwesomeTypeEnum.TYPE_SOLID)("icone",e.FontAwesomeEnum.TRASH)("info","Supprimer")}}function mi(t,i){t&1&&d(0,"tr",48)}function ci(t,i){t&1&&d(0,"tr",49)}var se=class t{constructor(i,e,n){this.timbreBlocService=i;this.timbreUtilsService=e;this.utilsService=n;this.dataSource=new ge([])}paginator;sort;dataSource=new ge;displayedColumns;timbreBlocModel=new ne;annees$;modif=!0;FontAwesomeEnum=R;FontAwesomeTypeEnum=P;TypeTimbreEnum=N;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres_bloc"),this.timbreBlocModel.setTimbreBlocAcquisModel(new oe),this.displayedColumns=["image","id","annee","type","monnaie","yt","nbTimbres","acquis","doublon"],this.modif&&this.displayedColumns.push("modifier","supprimer"),this.timbreBlocService.timbresBlocModel$.subscribe(i=>{this.dataSource.data=i})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(i){X(i)&&(this.dataSource.sort=this.sort)}applyFilter(i){let e=i.target.value;this.dataSource.filter=e.trim().toLowerCase()}exportTable(){let i=le.json_to_sheet(this.dataSource.data),e=le.book_new();le.book_append_sheet(e,i,"Donn\xE9es");let n=ct(e,{bookType:"xlsx",type:"array"}),o=new Blob([n],{type:"application/octet-stream"});(0,Ct.saveAs)(o,"export_timbres.xlsx")}static \u0275fac=function(e){return new(e||t)(C(S),C(A),C(j))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-resultat-table"]],viewQuery:function(e,n){if(e&1&&(_e(Z,5),_e(J,5)),e&2){let o;fe(o=Te())&&(n.paginator=o.first),fe(o=Te())&&(n.sort=o.first)}},decls:44,vars:14,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px",2,"height","50px"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px","style","height: 50px",4,"ngIf"],["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","type"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nbTimbres"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","monnaie"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[3,"modif"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"exportTable","primary","click",3,"click","type","icone","info"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],["mat-header-cell",""],[3,"object","key","align"],[1,"click",3,"click","classIcone","type","icone"],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[3,"type","icone","info"],[1,"primary","click",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(e,n){e&1&&(m(0,"div",0),d(1,"app-timbre-bloc-total"),s(2,kt,5,4,"div",1),c(),d(3,"lib-spinner",2),v(4,"async"),m(5,"section",3),v(6,"async"),m(7,"table",4),f("matSortChange",function(a){return n.sortData(a)}),g(8,5),s(9,Vt,2,2,"th",6)(10,jt,2,1,"td",7),x(),g(11,8),s(12,qt,2,2,"th",9)(13,Ut,2,1,"td",10),x(),g(14,11),s(15,Ht,2,2,"th",9)(16,$t,2,1,"td",10),x(),g(17,12),s(18,zt,2,3,"th",13)(19,Yt,2,3,"td",7),x(),g(20,14),s(21,Gt,2,2,"th",15)(22,Xt,2,1,"td",16),x(),g(23,17),s(24,Wt,2,2,"th",15)(25,Qt,2,1,"td",16),x(),g(26,18),s(27,Zt,2,2,"th",15)(28,Jt,2,1,"td",16),x(),g(29,19),s(30,Kt,2,3,"th",13)(31,ei,2,4,"td",7),x(),g(32,20),s(33,ti,2,3,"th",13)(34,ii,2,4,"td",7),x(),g(35,21),s(36,ni,2,3,"th",22)(37,oi,2,3,"td",7),x(),g(38,23),s(39,ri,2,3,"th",22)(40,li,2,3,"td",7),x(),s(41,mi,1,0,"tr",24)(42,ci,1,0,"tr",25),c(),d(43,"mat-paginator",26),c()),e&2&&(r(2),l("ngIf",n.modif),r(),l("fxHide",h(4,9,n.timbreBlocService.load$)==!0)("textSpec","Chargement en cours ..."),r(2),l("fxHide",h(6,11,n.timbreBlocService.load$)==!1),r(2),l("dataSource",n.dataSource),r(34),l("matHeaderRowDef",n.displayedColumns),r(),l("matRowDefColumns",n.displayedColumns),r(),l("pageSize",15)("pageSizeOptions",Me(13,Dt)))},dependencies:[He,ze,We,Ye,$e,Qe,Ge,Xe,Ze,Je,Z,J,Ue,I,Oe,Pe,Ae,Re,W,V,et,ee,q,U,O],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}}lib-icon[_ngcontent-%COMP%]{font-size:1.2em}.exportTable[_ngcontent-%COMP%]{font-size:1.7em}"]})};function pi(t,i){t&1&&d(0,"app-timbre-bloc-resultat")}function si(t,i){t&1&&d(0,"app-timbre-bloc-resultat-table")}var ue=class t{constructor(i,e){this.headerService=i;this.timbreBlocService=e}FontAwesomeTypeEnum=P;FontAwesomeEnum=R;ModeEnum=we;ngOnInit(){}static \u0275fac=function(e){return new(e||t)(C(Ee),C(S))};static \u0275cmp=E({type:t,selectors:[["app-timbre-bloc-layout"]],decls:5,vars:2,consts:[[1,"timbreLayout"],[1,"timbreBody"],[4,"ngIf"]],template:function(e,n){e&1&&(m(0,"div",0)(1,"div",1),d(2,"app-menu"),s(3,pi,1,0,"app-timbre-bloc-resultat",2)(4,si,1,0,"app-timbre-bloc-resultat-table",2),c()()),e&2&&(r(3),l("ngIf",n.headerService.mode==n.ModeEnum.GRAPH),r(),l("ngIf",n.headerService.mode==n.ModeEnum.TABLE))},dependencies:[I,mt,pe,se],styles:[".timbreLayout[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:row;justify-content:space-between;align-content:stretch;padding:20px 15px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{display:flex;flex:100;flex-direction:column;gap:20px}@media screen and (max-width: 800px){.timbreLayout[_ngcontent-%COMP%]{padding:15px 5px 0}.timbreLayout[_ngcontent-%COMP%]   .timbreBody[_ngcontent-%COMP%]{gap:10px}}"]})};var ui=[{path:"",component:ue}],de=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=D({type:t});static \u0275inj=F({imports:[Ce.forChild(ui),Ce]})};var be=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=D({type:t});static \u0275inj=F({providers:[j],imports:[G,Q,K,ie,te]})};var gt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=D({type:t});static \u0275inj=F({providers:[ot,S,A,rt,it],imports:[de,K,G,Le,Q,ke,te,ie,Ke,Ne,st,pt,ut,at,be]})};export{gt as TimbreBlocModule};

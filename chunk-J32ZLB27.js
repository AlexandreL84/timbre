import{a as He,b as Y,c as Bt,d as We,e as ze,f as It,g as si,h as Si,i as ci,j as wt,k as yi,l as pi}from"./chunk-BEIKN3SQ.js";import{B as yt}from"./chunk-OW3NKBT3.js";import{a as ti,d as $e,e as pe,h as Te}from"./chunk-Y3KVJUKC.js";import{a as Ie}from"./chunk-HDWFZULL.js";import{A as _,Aa as Se,Ab as se,Ac as ft,Ba as ye,Bb as fe,Bc as gt,Ca as le,Cc as oi,Db as Zt,Dc as ht,Eb as Ee,Ec as _t,Fa as G,Fc as ri,Ga as zt,Gc as xt,Hb as ge,Hc as Tt,I as ve,Ib as De,Ic as li,J as Ke,Jb as Re,Jc as Mt,K as l,Kb as he,Kc as Ct,L as B,Lb as Oe,Lc as mi,Mb as Le,Mc as vt,Nb as Ue,Nc as Pe,Ob as qe,Pb as Ne,Pc as St,Q as b,Qb as Fe,Qc as ai,R as s,Rb as je,Sb as Yt,Tb as Xt,Ub as ct,Vb as Kt,W as m,Wb as Jt,X as a,Xb as ei,Y as f,Z as A,_ as E,aa as O,ab as Qt,ba as C,bb as p,c as D,ca as c,cb as ee,da as Ht,ea as ie,f as te,fa as ne,g as H,ga as oe,gb as T,ha as V,hb as Z,hc as Ve,ia as d,ib as Ce,ic as ce,ja as lt,jc as ii,ka as I,kc as ke,l as y,la as Wt,m as rt,ma as N,mc as pt,na as F,oa as j,p as de,pb as Be,q as Pt,qb as at,ra as mt,rb as st,rc as ni,s as U,sb as Gt,sc as ut,tb as we,u as Q,ua as v,ub as Ae,v as $t,va as S,vc as _e,wa as re,wb as me,xb as ae,xc as xe,yb as be,yc as dt,z as h,zc as bt}from"./chunk-JU6VRKKZ.js";import{g as kt,i as x}from"./chunk-GV7GV3NK.js";var k=class extends Z{annees;acquis;doublon;idBloc;bloc;carnet;getAnnees(){return this.annees}setAnnees(e){this.annees=e}getAcquis(){return this.acquis}setAcquis(e){this.acquis=e}getDoublon(){return this.doublon}setDoublon(e){this.doublon=e}getIdBloc(){return this.idBloc}setIdBloc(e){this.idBloc=e}getCarnet(){return this.carnet}setCarnet(e){this.carnet=e}getBloc(){return this.bloc}setBloc(e){this.bloc=e}};x([T("Ann\xE9e")],k.prototype,"annees",2),x([T("Acquis")],k.prototype,"acquis",2),x([T("Doublon")],k.prototype,"doublon",2),x([T("Ident bloc")],k.prototype,"idBloc",2),x([T("Bloc")],k.prototype,"bloc",2),x([T("Carnet")],k.prototype,"carnet",2);var R=class extends Z{id;idBloc;annee;monnaie;type;yt;image;imageTable;imageZoom;timbreAcquisModel;timbreBlocModel;constructor(e,t,i,n,r,u,g,M,w,z,L){super(),this.id=e||null,this.idBloc=t||null,this.annee=i||null,this.monnaie=n||null,this.type=r||null,this.yt=u||null,this.image=g||null,this.imageTable=M||null,this.imageZoom=w||null,this.timbreAcquisModel=z||null,this.timbreBlocModel=L||null}getId(){return this.id}setId(e){this.id=e}getIdBloc(){return this.idBloc}setIdBloc(e){this.idBloc=e}getAnnee(){return this.annee}setAnnee(e){this.annee=e}getMonnaie(){return this.monnaie}setMonnaie(e){this.monnaie=e}getType(){return this.type}setType(e){this.type=e}getYt(){return this.yt}setYt(e){this.yt=e}getImage(){return this.image}setImage(e){this.image=e}getImageTable(){return this.imageTable}setImageTable(e){this.imageTable=e}getImageZoom(){return this.imageZoom}setImageZoom(e){this.imageZoom=e}getTimbreAcquisModel(){return this.timbreAcquisModel}setTimbreAcquisModel(e){this.timbreAcquisModel=e}getTimbreBlocModel(){return this.timbreBlocModel}setTimbreBlocModel(e){this.timbreBlocModel=e}};x([T("Identifiant")],R.prototype,"id",2),x([T("Identifiant bloc")],R.prototype,"idBloc",2),x([T("Ann\xE9e")],R.prototype,"annee",2),x([T("Monnaie")],R.prototype,"monnaie",2),x([T("Type")],R.prototype,"type",2),x([T("R\xE9ference Yvert Tellier")],R.prototype,"yt",2),x([T("Image")],R.prototype,"image",2),x([T("Image tableau")],R.prototype,"imageTable",2),x([T("Image zoom")],R.prototype,"imageZoom",2),x([T("v\xE9rif")],R.prototype,"timbreAcquisModel",2),x([T("Bloc")],R.prototype,"timbreBlocModel",2);var W=class extends Z{idUser;idTimbre;acquis;doublon;constructor(e,t,i,n){super(),this.idUser=e||null,this.idTimbre=t||null,this.acquis=i||!1,this.doublon=n||!1}getIdUser(){return this.idUser}setIdUser(e){this.idUser=e}getIdTimbre(){return this.idTimbre}setIdTimbre(e){this.idTimbre=e}isAcquis(){return this.acquis}setAcquis(e){this.acquis=e}isDoublon(){return this.doublon}setDoublon(e){this.doublon=e}};x([T("Identifiant Utilisateur")],W.prototype,"idUser",2),x([T("Identifiant timbre")],W.prototype,"idTimbre",2),x([T("Acquis")],W.prototype,"acquis",2),x([T("Doublon")],W.prototype,"doublon",2);var X=class o{constructor(e){this.firestore=e}timbreCritereModel=new k;getAnneesAsync(e){return this.firestore.collection(e,t=>{let i=t;return i=i.orderBy("annee","desc"),i}).valueChanges().pipe(te(t=>{let i=t.map(n=>Number(n.annee)).filter(n=>p(n)&&n!=0);return Array.from(new Set(i))}))}getTimbresByCritereAsync(e){return this.getAllTimbres(e).pipe(te(t=>this.constructTimbres(t,null,null)))}getAllTimbres(e){return this.firestore.collection("/timbres",t=>{let i=t;return p(e)&&(p(e.getAnnees())&&e.getAnnees()?.length>0&&(i=i.where("annee","in",e.getAnnees())),p(e.getBloc())&&e.getBloc()!="TOUS"?i=i.where("idBloc",e.getBloc()!="OUI"?"==":"!=",null):p(e.getIdBloc())&&(i=i.where("idBloc","==",e.getIdBloc()))),i=i.orderBy("id","asc"),i}).valueChanges()}constructTimbres(e,t,i,n){let r=[];return e?.length>0&&e.forEach(u=>{let g=this.constructTimbre(u,t,i),M=!0;p(n)&&p(g.getTimbreAcquisModel())&&(p(n.getAcquis())&&!(n.getAcquis()=="TOUS"||n.getAcquis()=="OUI"&&g.getTimbreAcquisModel().isAcquis()||n.getAcquis()=="NON"&&!g.getTimbreAcquisModel().isAcquis())&&(M=!1),p(n.getDoublon())&&!(n.getDoublon()=="TOUS"||n.getDoublon()=="OUI"&&g.getTimbreAcquisModel().isDoublon()||n.getDoublon()=="NON"&&!g.getTimbreAcquisModel().isDoublon())&&(M=!1)),M==!0&&r.push(g)}),r}constructTimbre(e,t,i){let n=Ce(R,e);if(p(i)){let r=i.find(u=>u.getId()==n?.getIdBloc());p(r)&&n.setTimbreBlocModel(r)}if(p(t)){let r=t.find(u=>u.idTimbre==n.getId());p(r)?n.setTimbreAcquisModel(Ce(W,r)):n.setTimbreAcquisModel(new W)}return n}supprimerTimbreAcquis(e,t){p(e?.getTimbreAcquisModel()?.getIdUser())&&this.firestore.collection("/timbres_acquis").ref.where("idTimbre","==",e.getId()).where("idUser","==",t).get().then(i=>{i.forEach(n=>{n.ref.delete()})})}supprimerTimbre(e){this.firestore.collection("/timbres").ref.where("id","==",e.getId()).get().then(t=>{t.forEach(i=>{i.ref.delete()})}).catch(t=>{console.error("Erreur de suppression :",t)})}static \u0275fac=function(t){return new(t||o)(U(Be))};static \u0275prov=de({token:o,factory:o.\u0275fac})};var q=class extends Z{id;annee;carnet;monnaie;image;imageTable;imageZoom;timbreBlocAcquisModel;nbTimbres;idOrigine;constructor(e,t,i,n,r,u,g,M,w){super(),this.id=e||null,this.annee=t||null,this.carnet=i||!1,this.monnaie=n||null,this.image=r||null,this.imageTable=u||null,this.imageZoom=g||null,this.timbreBlocAcquisModel=M||null,this.nbTimbres=w||null}getId(){return this.id}setId(e){this.id=e}getAnnee(){return this.annee}setAnnee(e){this.annee=e}isCarnet(){return this.carnet}setCarnet(e){this.carnet=e}getMonnaie(){return this.monnaie}setMonnaie(e){this.monnaie=e}getImage(){return this.image}setImage(e){this.image=e}getImageTable(){return this.imageTable}setImageTable(e){this.imageTable=e}getImageZoom(){return this.imageZoom}setImageZoom(e){this.imageZoom=e}getTimbreBlocAcquisModel(){return this.timbreBlocAcquisModel}setTimbreBlocAcquisModel(e){this.timbreBlocAcquisModel=e}getNbTimbres(){return this.nbTimbres}setNbTimbres(e){this.nbTimbres=e}};x([T("Identifiant")],q.prototype,"id",2),x([T("Ann\xE9e")],q.prototype,"annee",2),x([T("Carnet")],q.prototype,"carnet",2),x([T("Monnaie")],q.prototype,"monnaie",2),x([T("Image")],q.prototype,"image",2),x([T("Image tableau")],q.prototype,"imageTable",2),x([T("Image zoom")],q.prototype,"imageZoom",2),x([T("v\xE9rif")],q.prototype,"timbreBlocAcquisModel",2),x([T("Nombre de timbres")],q.prototype,"nbTimbres",2);var K=class extends Z{idUser;idBloc;acquis;doublon;constructor(e,t,i,n){super(),this.idUser=e||null,this.idBloc=t||null,this.acquis=i||!1,this.doublon=n||!1}getIdUser(){return this.idUser}setIdUser(e){this.idUser=e}getIdBloc(){return this.idBloc}setIdBloc(e){this.idBloc=e}isAcquis(){return this.acquis}setAcquis(e){this.acquis=e}isDoublon(){return this.doublon}setDoublon(e){this.doublon=e}};x([T("Identifiant Utilisateur")],K.prototype,"idUser",2),x([T("Identifiant bloc")],K.prototype,"idBloc",2),x([T("Acquis")],K.prototype,"acquis",2),x([T("Doublon")],K.prototype,"doublon",2);var J=class o{constructor(e,t,i,n,r){this.firestore=e;this.authService=t;this.uploadService=i;this.utilsService=n;this.timbreUtilsService=r}heigthTable=50;widthTimbre=100;heightTimbre=100;widthTimbreZoom=500;heightTimbreZoom=500;total$=new D(0);timbresBlocModel$=new D(null);upload(e,t){let i=this.widthTimbre,n=this.heightTimbre;return t=="table"?(i=i*(this.heigthTable/n),n=this.heigthTable):t=="zoom"&&(i=i*(this.heightTimbreZoom/n),n=this.heightTimbreZoom),this.uploadService.processAndUploadImage(e?.getImage(),i,n,"bloc",this.getDossier(e,t))}getTotal(e){this.total$.next(null),this.getAllBlocs(e).pipe(y()).subscribe(t=>{this.total$.next(t?.length)})}getBloc(e){return this.firestore.collection("/timbres_bloc",t=>t.where("id","==",e)).valueChanges()}getBlocByIdAsync(e){return this.getBloc(e).pipe(te(t=>Ce(q,t[0])))}getAllBlocs(e){return this.firestore.collection("/timbres_bloc",t=>{let i=t;return p(e)&&(p(e.getAnnees())&&e.getAnnees()?.length>0&&(i=i.where("annee","in",e.getAnnees())),p(e.getCarnet())&&e.getCarnet()!="TOUS"&&(i=i.where("carnet",e.getCarnet()!="OUI"?"==":"!=",null))),i}).valueChanges()}getTimbreBlocAcquis(){return this.authService.getUser().pipe(y(),rt(e=>p(e)?this.getTimbreBlocAcquisByUser(e.getId()).pipe(y(),te(t=>t)):null))}getTimbreBlocAcquisByUser(e){return this.firestore.collection("/timbres_bloc_acquis",t=>t.where("idUser","==",e)).valueChanges()}getBlocs(e){this.getTotal(),this.timbresBlocModel$.next(null),H([this.getAllBlocs(e),this.getTimbreBlocAcquis()]).pipe(y()).subscribe(([t,i])=>{this.constructBlocs(t,i,e)})}getBlocsAsync(e){return this.timbresBlocModel$.next(null),this.getAllBlocs(e).pipe(y(),te(t=>this.constructBlocs(t,null,e)))}constructBloc(e,t){let i=Ce(q,e);if(p(t)){let n=t.find(r=>r.idBloc==i.getId());p(n)?i.setTimbreBlocAcquisModel(Ce(K,n)):i.setTimbreBlocAcquisModel(new K)}return i}constructBlocs(e,t,i){let n=[];return e?.length>0&&e.forEach(r=>{let u=this.constructBloc(r,t);this.getTimbresByBlocAsync(u.getId()).subscribe(M=>{u.setNbTimbres(M?.length)});let g=!0;p(i)&&p(u.getTimbreBlocAcquisModel())&&(p(i.getAcquis())&&!(i.getAcquis()=="TOUS"||i.getAcquis()=="OUI"&&u.getTimbreBlocAcquisModel().isAcquis()||i.getAcquis()=="NON"&&!u.getTimbreBlocAcquisModel().isAcquis())&&(g=!1),p(i.getDoublon())&&!(i.getDoublon()=="TOUS"||i.getDoublon()=="OUI"&&u.getTimbreBlocAcquisModel().isDoublon()||i.getDoublon()=="NON"&&!u.getTimbreBlocAcquisModel().isDoublon())&&(g=!1)),g==!0&&n.push(u)}),this.timbresBlocModel$.next(n),n}acquis(e,t){return this.authService.getUser().pipe(y(i=>p(i))).subscribe(i=>{p(e?.getTimbreBlocAcquisModel()?.getIdUser())?this.firestore.collection("/timbres_bloc_acquis").ref.where("idTimbre","==",e.getId()).where("idUser","==",i.getId()).get().then(n=>{n.forEach(r=>{let u=e.getTimbreBlocAcquisModel();t?(u.setAcquis(!0),u.setDoublon(!u.isDoublon())):(u.setAcquis(!u.isAcquis()),u.isAcquis()||u.setDoublon(!1)),r.ref.update(Object.assign(new Object,u))})}).catch(n=>{console.error("Erreur de mise \xE0 jour:",n)}):this.addAcquis(i?.getId(),e,t)})}addAcquis(e,t,i){let n=new K;n.setIdUser(e),n.setIdBloc(t.getId()),n.setAcquis(!0),n.setDoublon(i),t.setTimbreBlocAcquisModel(n),this.firestore.collection("/timbres_bloc_acquis").add(Object.assign(new Object,n))}ajouterSansId(e){this.utilsService.getMaxIdentAsync("/timbres_bloc").pipe(y()).subscribe(t=>{e.setId(t),this.ajouter(e,!0)})}ajouter(e,t){this.getBloc(e.getId()).pipe(y()).subscribe(i=>{ee(i)||ee(i[0])||p(i[0])&&i[0]?.length==0?(e.setTimbreBlocAcquisModel(null),this.firestore.collection("/timbres_bloc").add(Object.assign(new Object,e)),t&&this.getBlocs()):console.error("bloc d\xE9j\xE0 existant")})}modifier(e){this.firestore.collection("/timbres_bloc").ref.where("id","==",e.getId()).get().then(t=>{t.forEach(i=>{i.ref.update(Object.assign(new Object,e)),this.getBlocs()})}).catch(t=>{console.error("Erreur de mise \xE0 jour:",t)})}getTimbresByBlocAsync(e){let t=new k;return t.setIdBloc(e),this.timbreUtilsService.getTimbresByCritereAsync(t)}supprimer(e){this.authService.getUser().pipe(y(t=>p(t))).subscribe(t=>{this.getTimbresByBlocAsync(e.getId()).pipe(y()).subscribe(i=>{i.forEach(n=>{this.timbreUtilsService.supprimerTimbreAcquis(n,t.getId()),this.timbreUtilsService.supprimerTimbre(n)})}),p(e?.getTimbreBlocAcquisModel()?.getIdUser())&&this.firestore.collection("/timbres_bloc_acquis").ref.where("idBloc","==",e.getId()).where("idUser","==",t.getId()).get().then(i=>{i.forEach(n=>{n.ref.delete()})}),this.firestore.collection("/timbres_bloc").ref.where("id","==",e.getId()).get().then(i=>{i.forEach(n=>{n.ref.delete(),this.getBlocs()})}).catch(i=>{console.error("Erreur de suppression :",i)})})}getDossier(e,t){let i="timbre//"+e.getAnnee();return p(t)&&(i=i+"/"+t),i=i+"/bloc/"+e.getId(),i}getBouchon(){let e=new q;return e.setAnnee(new Date().getFullYear()),e.setMonnaie("E"),e}static \u0275fac=function(t){return new(t||o)(U(Be),U(Ie),U(He),U(Y),U(X))};static \u0275prov=de({token:o,factory:o.\u0275fac})};var P=class o{constructor(e,t,i,n,r,u){this.firestore=e;this.authService=t;this.timbreBlocService=i;this.uploadService=n;this.utilsService=r;this.timbreUtilsService=u}heigthTable=50;widthTimbre=100;heightTimbre=100;widthTimbreZoom=500;heightTimbreZoom=500;total$=new D(0);timbres$=new D(null);getTimbre(e){return this.firestore.collection("/timbres",t=>t.where("id","==",e)).valueChanges()}getTimbreByIdAsync(e){return H([this.getTimbre(e),this.timbreBlocService.getBlocsAsync()]).pipe(te(([t,i])=>this.timbreUtilsService.constructTimbre(t[0],null,i)))}getTotal(e){this.total$.next(null),this.timbreUtilsService.getAllTimbres(e).pipe(y()).subscribe(t=>{this.total$.next(t?.length)})}getTimbres(e){this.getTotal(),this.timbres$.next(null),H([this.timbreUtilsService.getAllTimbres(e),this.getTimbreAcquis(),this.timbreBlocService.getBlocsAsync(e)]).pipe(y()).subscribe(([t,i,n])=>{this.timbres$.next(this.timbreUtilsService.constructTimbres(t,i,n,e))})}getTimbreAcquis(){return this.authService.getUser().pipe(y(),rt(e=>p(e)?this.getTimbreAcquisByUser(e.getId()).pipe(y(),te(t=>t)):null))}getTimbreAcquisByUser(e){return this.firestore.collection("/timbres_acquis",t=>t.where("idUser","==",e)).valueChanges()}acquis(e,t){return this.authService.getUser().pipe(y(i=>p(i))).subscribe(i=>{p(e?.getTimbreAcquisModel()?.getIdUser())?this.firestore.collection("/timbres_acquis").ref.where("idTimbre","==",e.getId()).where("idUser","==",i.getId()).get().then(n=>{n.forEach(r=>{let u=e.getTimbreAcquisModel();t?(u.setAcquis(!0),u.setDoublon(!u.isDoublon())):(u.setAcquis(!u.isAcquis()),u.isAcquis()||u.setDoublon(!1)),r.ref.update(Object.assign(new Object,u))})}).catch(n=>{console.error("Erreur de mise \xE0 jour:",n)}):this.addAcquis(i?.getId(),e,t)})}addAcquis(e,t,i){let n=new W;n.setIdUser(e),n.setIdTimbre(t.getId()),n.setAcquis(!0),n.setDoublon(i),t.setTimbreAcquisModel(n),this.firestore.collection("/timbres_acquis").add(Object.assign(new Object,n))}ajouterSansId(e){this.utilsService.getMaxIdentAsync("/timbres").pipe(y()).subscribe(t=>{e.setId(t),p(e.getIdBloc())&&e.setMonnaie(null),this.ajouter(e,!0)})}ajouter(e,t){this.getTimbre(e.getId()).pipe(y()).subscribe(i=>{ee(i)||ee(i[0])||p(i[0])&&i[0]?.length==0?(e.setTimbreAcquisModel(null),e.setTimbreBlocModel(null),this.firestore.collection("/timbres").add(Object.assign(new Object,e)),t&&this.getTimbres()):console.error("timbre d\xE9j\xE0 existant")})}modifier(e){e.setTimbreBlocModel(null),e.setTimbreAcquisModel(null),this.firestore.collection("/timbres").ref.where("id","==",e.getId()).get().then(t=>{t.forEach(i=>{i.ref.update(Object.assign(new Object,e)),this.getTimbres()})}).catch(t=>{console.error("Erreur de mise \xE0 jour:",t)})}supprimerTimbre(e){this.firestore.collection("/timbres").ref.where("id","==",e.getId()).get().then(t=>{t.forEach(i=>{i.ref.delete(),this.getTimbres()})}).catch(t=>{console.error("Erreur de suppression :",t)})}supprimer(e){this.authService.getUser().pipe(y(t=>p(t))).subscribe(t=>{this.timbreUtilsService.supprimerTimbreAcquis(e,t.getId()),this.supprimerTimbre(e)})}getBouchon(){let e=new R;return e.setAnnee(new Date().getFullYear()),e.setMonnaie("E"),e.setType(""),e.setYt(""),e}upload(e,t){let i=this.widthTimbre,n=this.heightTimbre;return t=="table"?(i=i*(this.heigthTable/n),n=this.heigthTable):t=="zoom"&&(i=i*(this.heightTimbreZoom/n),n=this.heightTimbreZoom),this.uploadService.processAndUploadImage(e?.getImage(),i,n,e?.getId(),this.getDossier(e,t))}getDossier(e,t){let i="timbre//";return p(e.getIdBloc())?i=i+e.getTimbreBlocModel().getAnnee():i=i+e.getAnnee(),p(t)&&(i=i+"/"+t),p(e.getIdBloc())&&(i=i+"/bloc/"+e.getIdBloc()),i}static \u0275fac=function(t){return new(t||o)(U(Be),U(Ie),U(J),U(He),U(Y),U(X))};static \u0275prov=de({token:o,factory:o.\u0275fac})};var $=class extends Z{annee;nombre;acquis;doublon;nombreCarnet;nombreBloc;acquisBloc;doublonBloc;constructor(e,t,i,n,r,u,g,M){super(),this.annee=e||null,this.nombre=t||0,this.acquis=i||0,this.doublon=n||0,this.nombreCarnet=r||0,this.nombreBloc=u||0,this.acquisBloc=g||0,this.doublonBloc=M||0}getAnnee(){return this.annee}setAnnee(e){this.annee=e}getNombre(){return this.nombre}setNombre(e){this.nombre=e}getAcquis(){return this.acquis}setAcquis(e){this.acquis=e}getDoublon(){return this.doublon}setDoublon(e){this.doublon=e}getNombreCarnet(){return this.nombreCarnet}setNombreCarnet(e){this.nombreCarnet=e}getNombreBloc(){return this.nombreBloc}setNombreBloc(e){this.nombreBloc=e}getAcquisBloc(){return this.acquisBloc}setAcquisBloc(e){this.acquisBloc=e}getDoublonBloc(){return this.doublonBloc}setDoublonBloc(e){this.doublonBloc=e}};x([T("Ann\xE9e")],$.prototype,"annee",2),x([T("Total")],$.prototype,"nombre",2),x([T("Acquis")],$.prototype,"acquis",2),x([T("Doublon")],$.prototype,"doublon",2),x([T("Total carnet")],$.prototype,"nombreCarnet",2),x([T("Total bloc")],$.prototype,"nombreBloc",2),x([T("Acquis")],$.prototype,"acquisBloc",2),x([T("Doublon")],$.prototype,"doublonBloc",2);var Et=class o{constructor(e,t,i){this.timbreService=e;this.timbreBlocService=t;this.timbreUtilsService=i}timbresResume$=new D(null);totalTimbreResume$=new D(null);getResume(e){this.timbresResume$.next(null),this.totalTimbreResume$.next(null),H([this.timbreUtilsService.getAllTimbres(e),this.timbreService.getTimbreAcquis(),this.timbreBlocService.getAllBlocs(e),this.timbreBlocService.getTimbreBlocAcquis()]).pipe(y()).subscribe(([t,i,n,r])=>{this.timbresResume$.next(this.construct(t,i,n,r))})}construct(e,t,i,n){let r=[];if(e?.length>0&&(e.forEach(u=>{let g=u.annee;if(p(i)&&ee(u.annee)&&p(u.idBloc)){let w=i.find(z=>z.id==u.idBloc);p(w)&&(g=w.annee)}let M=r.find(w=>w.getAnnee()==g);if(p(M)?M.setNombre(M.getNombre()+1):(M=new $,M.setAnnee(g),M.setNombre(1),r.push(M)),p(t)){let w=t.find(z=>z.idTimbre==u.id);p(w)&&(w.acquis==!0&&M.setAcquis(M.getAcquis()+1),w.doublon==!0&&M.setDoublon(M.getDoublon()+1))}}),i.forEach(u=>{let g=r.find(M=>M.getAnnee()==u.annee);if(ee(g)&&(g=new $,g.setAnnee(u.annee),r.push(g)),u.carnet?g.setNombreCarnet(g.getNombreCarnet()+1):g.setNombreBloc(g.getNombreBloc()+1),p(n)){let M=n.find(w=>w.idBloc==u.id);p(M)&&(M.acquis==!0&&g.setAcquisBloc(g.getAcquisBloc()+1),M.doublon==!0&&g.setDoublonBloc(g.getDoublonBloc()+1))}})),p(r)&&r?.length>0){let u=new $;r.forEach(g=>{u.setNombre(u.getNombre()+g.getNombre()),u.setAcquis(u.getAcquis()+g.getAcquis()),u.setDoublon(u.getDoublon()+g.getDoublon()),u.setNombreCarnet(u.getNombreCarnet()+g.getNombreCarnet()),u.setNombreBloc(u.getNombreBloc()+g.getNombreBloc()),u.setAcquisBloc(u.getAcquisBloc()+g.getAcquisBloc()),u.setDoublonBloc(u.getDoublonBloc()+g.getDoublonBloc())}),this.totalTimbreResume$.next(u)}return r}static \u0275fac=function(t){return new(t||o)(U(P),U(J),U(X))};static \u0275prov=de({token:o,factory:o.\u0275fac})};var fi=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=$t({type:o});static \u0275inj=Pt({providers:[P],imports:[zt,Zt,Yt,Kt,Jt,ei,Xt,ni,ii,ai,ce]})};var Ei=()=>[10,20,50,100];function Di(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","annee")}}function Ri(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getAnnee()," ")}}function Oi(o,e){o&1&&f(0,"td",22)}function Li(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","nombre")}}function Ui(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getNombre()," ")}}function qi(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getNombre()," ")}}function Ni(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","acquis")}}function Fi(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getAcquis()," ")}}function ji(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getAcquis()," ")}}function Vi(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","doublon")}}function ki(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getDoublon()," ")}}function Pi(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getDoublon()," ")}}function $i(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","nombreCarnet")}}function Hi(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getNombreCarnet()," ")}}function Wi(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getNombreBloc()," ")}}function zi(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","nombreBloc")}}function Qi(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getNombreBloc()," ")}}function Gi(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getNombreBloc()," ")}}function Zi(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","acquisBloc")}}function Yi(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getAcquisBloc()," ")}}function Xi(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getAcquisBloc()," ")}}function Ki(o,e){if(o&1&&(m(0,"th",19),f(1,"lib-libelle-model",20),a()),o&2){let t=c();l(),s("object",t.timbreResumeModel)("key","doublonBloc")}}function Ji(o,e){if(o&1&&(m(0,"td",21),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getDoublonBloc()," ")}}function en(o,e){if(o&1&&(m(0,"td",23)(1,"b"),d(2),v(3,"async"),a()()),o&2){let t,i=c();l(2),I("",(t=S(3,1,i.timbreResumeService.totalTimbreResume$))==null?null:t.getDoublonBloc()," ")}}function tn(o,e){o&1&&f(0,"tr",24)}function nn(o,e){if(o&1){let t=O();m(0,"tr",25),C("click",function(){let n=h(t).$implicit,r=c();return _(r.filtreParAnnee(n))}),a()}}function on(o,e){o&1&&f(0,"tr",26)}var Dt=class o{constructor(e,t,i){this.timbreResumeService=e;this.timbreService=t;this.timbreUtilsService=i;this.dataSource=new Pe([])}paginator;sort;load$=new D(!1);dataSource=new Pe;displayedColumns=["annee","nombre","acquis","doublon","nombreCarnet","nombreBloc","acquisBloc","doublonBloc"];timbreResumeModel=new $;ngOnInit(){this.timbreResumeService.getResume(),this.load$.next(!1),this.timbreResumeService.timbresResume$.subscribe(e=>{this.dataSource.data=e,this.load$.next(!0)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(e){p(e)&&(this.dataSource.sort=this.sort)}filtreParAnnee(e){this.timbreUtilsService.timbreCritereModel=new k,this.timbreUtilsService.timbreCritereModel.setAnnees([e.getAnnee()]),this.timbreService.getTimbres(this.timbreUtilsService.timbreCritereModel)}static \u0275fac=function(t){return new(t||o)(B(Et),B(P),B(X))};static \u0275cmp=Q({type:o,selectors:[["app-timbre-resume"]],viewQuery:function(t,i){if(t&1&&(ie(_e,5),ie(xe,5)),t&2){let n;ne(n=oe())&&(i.paginator=n.first),ne(n=oe())&&(i.sort=n.first)}},decls:41,vars:14,consts:[["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["id","pdf-content","mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","annee"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","nombre"],["mat-footer-cell","","class","accent",4,"matFooterCellDef"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","nombreCarnet"],["matColumnDef","nombreBloc"],["matColumnDef","acquisBloc"],["matColumnDef","doublonBloc"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",3,"click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],["mat-footer-cell",""],["mat-footer-cell","",1,"accent"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row",3,"click"],["mat-footer-row",""]],template:function(t,i){t&1&&(f(0,"lib-spinner",0),v(1,"async"),m(2,"section",1),v(3,"async"),m(4,"table",2),C("matSortChange",function(r){return i.sortData(r)}),A(5,3),b(6,Di,2,2,"th",4)(7,Ri,2,1,"td",5)(8,Oi,1,0,"td",6),E(),A(9,7),b(10,Li,2,2,"th",4)(11,Ui,2,1,"td",5)(12,qi,4,3,"td",8),E(),A(13,9),b(14,Ni,2,2,"th",4)(15,Fi,2,1,"td",5)(16,ji,4,3,"td",8),E(),A(17,10),b(18,Vi,2,2,"th",4)(19,ki,2,1,"td",5)(20,Pi,4,3,"td",8),E(),A(21,11),b(22,$i,2,2,"th",4)(23,Hi,2,1,"td",5)(24,Wi,4,3,"td",8),E(),A(25,12),b(26,zi,2,2,"th",4)(27,Qi,2,1,"td",5)(28,Gi,4,3,"td",8),E(),A(29,13),b(30,Zi,2,2,"th",4)(31,Yi,2,1,"td",5)(32,Xi,4,3,"td",8),E(),A(33,14),b(34,Ki,2,2,"th",4)(35,Ji,2,1,"td",5)(36,en,4,3,"td",8),E(),b(37,tn,1,0,"tr",15)(38,nn,1,0,"tr",16)(39,on,1,0,"tr",17),a(),f(40,"mat-paginator",18),a()),t&2&&(s("fxHide",S(1,9,i.load$)==!0)("textSpec","Chargement en cours ..."),l(2),s("fxHide",S(3,11,i.load$)==!1),l(2),s("dataSource",i.dataSource),l(33),s("matHeaderRowDef",i.displayedColumns),l(),s("matRowDefColumns",i.displayedColumns),l(),s("matFooterRowDef",i.displayedColumns),l(),s("pageSize",15)("pageSizeOptions",mt(13,Ei)))},dependencies:[bt,gt,Tt,ht,ft,Mt,oi,li,_t,xt,ri,Ct,vt,mi,_e,xe,dt,se,Ae,pe,Te,G],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}"]})};var Mi=kt(Si());var Ze=class{dossier;nom;alignLabel;detail;file;getDossier(){return this.dossier}setDossier(e){this.dossier=e}getNom(){return this.nom}setNom(e){this.nom=e}getAlignLabel(){return this.alignLabel}setAlignLabel(e){this.alignLabel=e}getDetail(){return this.detail}setDetail(e){this.detail=e}getFile(){return this.file}setFile(e){this.file=e}};var Me=class{key;dossier;maxWidth;maxHeight;getKey(){return this.key}setKey(e){this.key=e}getDossier(){return this.dossier}setDossier(e){this.dossier=e}getMaxWidth(){return this.maxWidth}setMaxWidth(e){this.maxWidth=e}getMaxHeight(){return this.maxHeight}setMaxHeight(e){this.maxHeight=e}};var un=["canvas"];function dn(o,e){if(o&1&&(m(0,"span",6)(1,"b"),d(2),a()()),o&2){let t=c();l(2),I("N\xB0",t.timbreModel==null?null:t.timbreModel.getId(),"")}}function bn(o,e){o&1&&f(0,"lib-spinner",7),o&2&&s("textSpec","Chargement en cours ...")}function fn(o,e){if(o&1&&(f(0,"mat-error",29),v(1,"async")),o&2){let t=c(2);s("innerHTML",S(1,1,t.messageError$),ve)}}function gn(o,e){if(o&1&&(m(0,"mat-option",18),d(1),a()),o&2){let t=e.$implicit;s("value",t),l(),Wt(" ",t.getAnnee()," - ",t.getId()," ")}}function hn(o,e){if(o&1){let t=O();m(0,"img",30),C("click",function(){let n;h(t);let r=c(2);return _(r.utilsService.zoom(r.timbreModel==null||(n=r.timbreModel.getTimbreBlocModel())==null?null:n.getImageZoom()))}),a()}if(o&2){let t,i=c(2);s("src",i.timbreModel==null||(t=i.timbreModel.getTimbreBlocModel())==null?null:t.getImage(),Ke)}}function _n(o,e){if(o&1){let t=O();m(0,"form",8,1),C("ngSubmit",function(){h(t);let n=V(1),r=c();return _(r.valider(n))}),m(2,"div",9),b(3,fn,2,3,"mat-error",10),v(4,"async"),m(5,"div",11)(6,"div",12)(7,"label"),f(8,"lib-libelle-model",13),a(),m(9,"input",14),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreModel.annee,n)||(r.timbreModel.annee=n),_(n)}),C("ngModelChange",function(n){h(t);let r=c();return _(r.changeAnnee(n))}),a()(),m(10,"div",15)(11,"label"),f(12,"lib-libelle-model",13),a(),m(13,"div",16)(14,"mat-select",17),v(15,"async"),C("ngModelChange",function(n){h(t);let r=c();return _(r.changeBloc(n))}),f(16,"mat-option",18),b(17,gn,2,3,"mat-option",19),v(18,"async"),a(),b(19,hn,1,1,"img",20),a()()(),m(20,"div",11)(21,"div",12)(22,"label"),f(23,"lib-libelle-model",13),a(),m(24,"input",21),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreModel.type,n)||(r.timbreModel.type=n),_(n)}),a()(),m(25,"div",12)(26,"label"),f(27,"lib-libelle-model",13),a(),m(28,"input",22),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreModel.monnaie,n)||(r.timbreModel.monnaie=n),_(n)}),a()()(),m(29,"div",11)(30,"div",12)(31,"label"),f(32,"lib-libelle-model",13),a(),m(33,"input",23),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreModel.yt,n)||(r.timbreModel.yt=n),_(n)}),a()(),f(34,"div",24),a(),m(35,"lib-upload",25),C("outPutObject",function(n){h(t);let r=c();return _(r.timbreModel=n)}),a()(),m(36,"div",26)(37,"button",27),C("click",function(){h(t);let n=c();return _(n.close())}),d(38," Annuler "),a(),m(39,"button",28),d(40," Enregistrer "),a()()()}if(o&2){let t,i,n=V(1),r=c();s("ngClass",n!=null&&n.submitted?"red-color":"blue-color"),l(3),s("ngIf",S(4,31,r.messageError$)),l(5),s("object",r.timbreModel)("key","annee"),l(),N("ngModel",r.timbreModel.annee),s("max",r.maxAnnee)("zMax",r.maxAnnee)("disabled",!!(r.timbreModel!=null&&r.timbreModel.getId())),l(3),s("object",r.timbreModel)("key","timbreBlocModel"),l(2),s("ngModel",r.timbreModel.getTimbreBlocModel())("placeholder","Choix bloc")("disabled",!!(r.timbreModel!=null&&r.timbreModel.getId())||((t=S(15,33,r.timbreBlocService.timbresBlocModel$))==null?null:t.length)<=0),l(2),s("value",null),l(),s("ngForOf",S(18,35,r.timbreBlocService.timbresBlocModel$)),l(2),s("ngIf",r.timbreModel==null||(i=r.timbreModel.getTimbreBlocModel())==null?null:i.getImage()),l(4),s("object",r.timbreModel)("key","type"),l(),N("ngModel",r.timbreModel.type),l(3),s("object",r.timbreModel)("key","monnaie"),l(),N("ngModel",r.timbreModel.monnaie),s("disabled",!!r.timbreModel.getTimbreBlocModel()),l(4),s("object",r.timbreModel)("key","yt"),l(),N("ngModel",r.timbreModel.yt),l(2),s("object",r.timbreModel)("key","image")("zoom",r.timbreModel.getImageZoom())("maxWidth",r.timbreService.widthTimbre)("maxHeight",r.timbreService.heightTimbre)}}var Ye=class o{constructor(e,t,i,n,r){this.httpResponseHandlerService=e;this.dialogRef=t;this.timbreService=i;this.timbreBlocService=n;this.utilsService=r}canvas;messageError$=new D(null);load$=new D(null);id;maxAnnee=new Date().getFullYear();timbreModel=new R;fileUploadModel=new Ze;ngOnInit(){this.initUpload(),this.load$.next(!1),p(this.id)?this.timbreService.getTimbreByIdAsync(this.id).subscribe(e=>{this.timbreModel=e,p(e.getTimbreBlocModel())&&(this.timbreModel.setAnnee(e.getTimbreBlocModel().getAnnee()),this.timbreModel.setMonnaie(e.getTimbreBlocModel().getMonnaie())),this.load$.next(!0)}):(this.timbreModel.setAnnee(new Date().getFullYear()),this.timbreModel.setMonnaie("E"),this.load$.next(!0)),this.changeAnnee(this.timbreModel.getAnnee())}initUpload(){this.fileUploadModel.setDossier("test"),this.fileUploadModel.setNom(new Date().getTime()?.toString());let e=new Me;e.setMaxWidth(this.timbreService.widthTimbre),e.setMaxHeight(this.timbreService.heightTimbre),e.setDossier("autre");let t=new Me;t.setMaxWidth(this.timbreService.widthTimbreZoom),t.setMaxHeight(this.timbreService.heightTimbreZoom),t.setDossier("zoom"),this.fileUploadModel.setDetail([e,t])}valider(e){if(this.messageError$.next(null),e?.valid)if(p(this.timbreModel.getImage()))this.saveData();else{this.messageError$.next("Veuillez s\xE9lectionner une image");return}}saveData(){this.load$.next(!1),p(this.timbreModel.getId())?this.save():this.ajouter()}ajouter(){this.utilsService.getMaxIdentAsync("/timbres").pipe(y()).subscribe(e=>{this.timbreModel.setId(e),this.save(!0)})}save(e){try{H([this.timbreService.upload(this.timbreModel,"autre"),this.timbreService.upload(this.timbreModel,"table"),this.timbreService.upload(this.timbreModel,"zoom")]).pipe(y(([t,i,n])=>p(t)&&p(n)&&p(i))).subscribe(([t,i,n])=>{p(i)&&i!="nok"&&this.timbreModel.setImage(i),p(t)&&t!="nok"&&this.timbreModel.setImageTable(t),p(n)&&n!="nok"&&this.timbreModel.setImageZoom(n),e?this.timbreService.ajouter(this.timbreModel,!0):this.timbreService.modifier(this.timbreModel),this.httpResponseHandlerService.showNotificationSuccess("Transaction termin\xE9e","Votre timbre a bien \xE9t\xE9 modifi\xE9e."),this.load$.next(!0),this.dialogRef.close()})}catch{this.httpResponseHandlerService.showNotificationError("Transaction non aboutie","Votre timbre n'a pas pu \xEAtre modifi\xE9."),this.load$.next(!0)}}close(){this.dialogRef.close()}changeAnnee(e){if(this.timbreModel.setTimbreBlocModel(null),p(e)){let t=new k;t.setAnnees([e]),this.timbreBlocService.getBlocs(t)}}changeBloc(e){p(e)?(this.timbreModel.setIdBloc(e.getId()),this.timbreModel.setTimbreBlocModel(e),this.timbreModel.setMonnaie(e.getMonnaie()),this.timbreModel.setAnnee(e.getAnnee())):(this.timbreModel.setIdBloc(null),this.timbreModel.setTimbreBlocModel(null),this.timbreModel.setMonnaie("E"))}static \u0275fac=function(t){return new(t||o)(B(yt),B(ke),B(P),B(J),B(Y))};static \u0275cmp=Q({type:o,selectors:[["app-timbre-modifier"]],viewQuery:function(t,i){if(t&1&&ie(un,5),t&2){let n;ne(n=oe())&&(i.canvas=n.first)}},decls:9,vars:6,consts:[["load",""],["formModif","ngForm"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","space-between stretch",1,"dialog-modal"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","start center",1,"titre-modal","bg-primary","color-white"],["class","accent",4,"ngIf"],[3,"ngIf","ngIfElse"],[1,"accent"],["fxFlexFill","",3,"textSpec"],["ngForm","formModif","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","space-between stretch",1,"formulaire-box-elevation",3,"ngSubmit","ngClass"],["fxLayout","column","fxLayoutGap","20px",1,"bloc-modal"],[3,"innerHTML",4,"ngIf"],["fxLayout","row","fxLayout.lt-lg","column","fxLayoutGap","30px","fxLayoutGap.lt-lg","5px"],["fxLayout","column",1,"form-input"],[3,"object","key"],["name","page","type","number","minlength","4","maxlength","4","min","1900","zMin","1900","required","","zControl","",1,"annee",2,"width","60px !important",3,"ngModelChange","ngModel","max","zMax","disabled"],["fxLayout","column",1,"form-input","select"],["fxLayout","row","fxLayoutGap","15px"],["name","bloc",2,"width","120px !important",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"selectMin",3,"value"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["style","max-height: 40px","class","click",3,"src","click",4,"ngIf"],["name","type","type","text","trim","","zControl","",3,"ngModelChange","ngModel"],["name","monnaie","type","text","trim","","minlength","1","maxlength","2","required","","zControl","",2,"width","25px !important",3,"ngModelChange","ngModel","disabled"],["name","yt","type","text","trim","","zControl","",3,"ngModelChange","ngModel"],["fxHide.lt-lg","","fxLayout","column",1,"form-input"],[3,"outPutObject","object","key","zoom","maxWidth","maxHeight"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","end end",1,"bloc-bouton-modal"],["type","button","mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"],[1,"click",2,"max-height","40px",3,"click","src"]],template:function(t,i){if(t&1&&(m(0,"div",2)(1,"div",3)(2,"span"),d(3),a(),b(4,dn,3,1,"span",4),a(),b(5,bn,1,1,"ng-template",5),v(6,"async"),b(7,_n,41,37,"ng-template",null,0,re),a()),t&2){let n=V(8);l(3),I("",i.timbreModel!=null&&i.timbreModel.getId()?"MODIFICATION":"AJOUT"," "),l(),s("ngIf",i.timbreModel==null?null:i.timbreModel.getId()),l(),s("ngIf",S(6,4,i.load$)==!1)("ngIfElse",n)}},dependencies:[ce,Ve,ut,ct,Se,ye,le,me,ae,fe,se,be,Ae,we,Oe,Ee,Le,ge,De,Ne,Fe,je,qe,Ue,he,Re,pe,Te,$e,Bt,We,ze,It,G],encapsulation:2})};var Ti=kt(yi());var Tn=()=>[10,20,50,100];function Mn(o,e){if(o&1&&(m(0,"mat-option",34),d(1),a()),o&2){let t=e.$implicit;s("value",t),l(),I(" ",t," ")}}function Cn(o,e){if(o&1){let t=O();m(0,"div",3)(1,"div",32)(2,"mat-select",33),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreUtilsService.timbreCritereModel.acquis,n)||(r.timbreUtilsService.timbreCritereModel.acquis=n),_(n)}),C("ngModelChange",function(){h(t);let n=c();return _(n.filtreByCritere())}),m(3,"mat-option",34),d(4," Oui"),a(),m(5,"mat-option",34),d(6," Non"),a(),m(7,"mat-option",34),d(8," Tous"),a()()(),m(9,"div",32)(10,"mat-select",35),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreUtilsService.timbreCritereModel.doublon,n)||(r.timbreUtilsService.timbreCritereModel.doublon=n),_(n)}),C("ngModelChange",function(){h(t);let n=c();return _(n.filtreByCritere())}),m(11,"mat-option",34),d(12," Oui"),a(),m(13,"mat-option",34),d(14," Non"),a(),m(15,"mat-option",34),d(16," Tous"),a()()(),m(17,"div",32)(18,"mat-select",36),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreUtilsService.timbreCritereModel.carnet,n)||(r.timbreUtilsService.timbreCritereModel.carnet=n),_(n)}),C("ngModelChange",function(){h(t);let n=c();return _(n.filtreByCritere())}),m(19,"mat-option",34),d(20," Oui"),a(),m(21,"mat-option",34),d(22," Non"),a(),m(23,"mat-option",34),d(24," Tous"),a()()(),m(25,"div",32)(26,"mat-select",37),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreUtilsService.timbreCritereModel.bloc,n)||(r.timbreUtilsService.timbreCritereModel.bloc=n),_(n)}),C("ngModelChange",function(){h(t);let n=c();return _(n.filtreByCritere())}),m(27,"mat-option",34),d(28," Oui"),a(),m(29,"mat-option",34),d(30," Non"),a(),m(31,"mat-option",34),d(32," Tous"),a()()(),m(33,"div",38)(34,"mat-select",39),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreUtilsService.timbreCritereModel.annees,n)||(r.timbreUtilsService.timbreCritereModel.annees=n),_(n)}),C("ngModelChange",function(){h(t);let n=c();return _(n.filtreByCritere())}),b(35,Mn,2,2,"mat-option",40),v(36,"async"),a()(),m(37,"div",41)(38,"input",42),C("input",function(n){h(t);let r=c();return _(r.applyFilter(n))}),a()(),m(39,"lib-icon",43),C("click",function(){h(t);let n=c();return _(n.exportTable())}),a()()}if(o&2){let t=c();l(2),N("ngModel",t.timbreUtilsService.timbreCritereModel.acquis),s("placeholder","Acquis"),l(),s("value","OUI"),l(2),s("value","NON"),l(2),s("value","TOUS"),l(3),N("ngModel",t.timbreUtilsService.timbreCritereModel.doublon),s("placeholder","Doublon"),l(),s("value","OUI"),l(2),s("value","NON"),l(2),s("value","TOUS"),l(3),N("ngModel",t.timbreUtilsService.timbreCritereModel.carnet),s("placeholder","Carnet"),l(),s("value","OUI"),l(2),s("value","NON"),l(2),s("value","TOUS"),l(3),N("ngModel",t.timbreUtilsService.timbreCritereModel.bloc),s("placeholder","Bloc"),l(),s("value","OUI"),l(2),s("value","NON"),l(2),s("value","TOUS"),l(3),N("ngModel",t.timbreUtilsService.timbreCritereModel.annees),s("placeholder","Ann\xE9es"),l(),s("ngForOf",S(36,26,t.annees$)),l(4),s("type",t.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",t.FontAwesomeEnum.FILE_EXEL)("info","Exporter tableau")}}function vn(o,e){if(o&1&&(m(0,"th",44),f(1,"lib-libelle-model",45),a()),o&2){let t=c();l(),s("object",t.timbre)("key","image")}}function Sn(o,e){if(o&1){let t=O();m(0,"img",48),C("click",function(){h(t);let n=c().$implicit,r=c();return _(r.utilsService.zoom(n==null?null:n.getImageZoom()))}),a()}if(o&2){let t=c().$implicit;s("src",t==null?null:t.getImageTable(),Ke)}}function yn(o,e){if(o&1&&(m(0,"td",46),b(1,Sn,1,1,"img",47),a()),o&2){let t=e.$implicit;l(),s("ngIf",t==null?null:t.getImageTable())}}function Bn(o,e){if(o&1&&(m(0,"th",49),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre)("key","id")}}function In(o,e){if(o&1&&(m(0,"td",51),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getId()," ")}}function wn(o,e){if(o&1&&(m(0,"th",49),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre)("key","annee")}}function An(o,e){if(o&1&&d(0),o&2){let t,i=c().$implicit;I(" ",i==null||(t=i.getTimbreBlocModel())==null?null:t.getAnnee()," ")}}function En(o,e){if(o&1&&d(0),o&2){let t=c().$implicit;I(" ",t==null?null:t.getAnnee()," ")}}function Dn(o,e){if(o&1&&(m(0,"td",51),b(1,An,1,1,"ng-template",52)(2,En,1,1,"ng-template",null,0,re),a()),o&2){let t=e.$implicit,i=V(3);l(),s("ngIf",t==null?null:t.getIdBloc())("ngIfElse",i)}}function Rn(o,e){if(o&1&&(m(0,"th",53),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre)("key","idBloc")}}function On(o,e){if(o&1){let t=O();m(0,"img",48),C("click",function(){let n;h(t);let r=c(2).$implicit,u=c();return _(u.utilsService.zoom(r==null||(n=r.getTimbreBlocModel())==null?null:n.getImageZoom()))}),a()}if(o&2){let t,i=c(2).$implicit;s("src",i==null||(t=i.getTimbreBlocModel())==null?null:t.getImageTable(),Ke)}}function Ln(o,e){if(o&1&&b(0,On,1,1,"img",47),o&2){let t,i=c().$implicit;s("ngIf",i==null||(t=i.getTimbreBlocModel())==null?null:t.getImage())}}function Un(o,e){o&1&&d(0," Non ")}function qn(o,e){if(o&1&&(m(0,"td",51),b(1,Ln,1,1,"ng-template",52)(2,Un,1,0,"ng-template",null,0,re),a()),o&2){let t=e.$implicit,i=V(3);l(),s("ngIf",t==null?null:t.getIdBloc())("ngIfElse",i)}}function Nn(o,e){if(o&1&&(m(0,"th",54),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre)("key","monnaie")}}function Fn(o,e){if(o&1&&d(0),o&2){let t,i=c().$implicit;I(" ",(i==null||(t=i.getTimbreBlocModel())==null?null:t.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function jn(o,e){if(o&1&&d(0),o&2){let t=c().$implicit;I(" ",(t==null?null:t.getMonnaie())=="E"?"\u20AC":"Francs"," ")}}function Vn(o,e){if(o&1&&(m(0,"td",55),b(1,Fn,1,1,"ng-template",52)(2,jn,1,1,"ng-template",null,0,re),a()),o&2){let t=e.$implicit,i=V(3);l(),s("ngIf",t==null?null:t.getIdBloc())("ngIfElse",i)}}function kn(o,e){if(o&1&&(m(0,"th",54),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre)("key","type")}}function Pn(o,e){if(o&1&&(m(0,"td",55),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getType()," ")}}function $n(o,e){if(o&1&&(m(0,"th",54),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre)("key","yt")}}function Hn(o,e){if(o&1&&(m(0,"td",55),d(1),a()),o&2){let t=e.$implicit;l(),I(" ",t==null?null:t.getYt()," ")}}function Wn(o,e){if(o&1&&(m(0,"th",53),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre==null?null:t.timbre.getTimbreAcquisModel())("key","acquis")}}function zn(o,e){if(o&1){let t=O();m(0,"td",46)(1,"lib-icon",56),C("click",function(){let n=h(t).$implicit,r=c();return _(r.acquis(n))}),a()()}if(o&2){let t,i,n,r=e.$implicit,u=c();l(),s("classIcone",!(r==null||(t=r.getTimbreAcquisModel())==null)&&t.isAcquis()?"accent":"primary")("type",u.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(r==null||(i=r.getTimbreAcquisModel())==null)&&i.isAcquis()?u.FontAwesomeEnum.CIRCLE_MINUS:u.FontAwesomeEnum.CIRCLE_PLUS)("info",!(r==null||(n=r.getTimbreAcquisModel())==null)&&n.isAcquis()?"pas acquis":"acquis")}}function Qn(o,e){if(o&1&&(m(0,"th",53),f(1,"lib-libelle-model",50),a()),o&2){let t=c();l(),s("object",t.timbre==null?null:t.timbre.getTimbreAcquisModel())("key","doublon")}}function Gn(o,e){if(o&1){let t=O();m(0,"td",46)(1,"lib-icon",56),C("click",function(){let n=h(t).$implicit,r=c();return _(r.doublon(n))}),a()()}if(o&2){let t,i,n,r=e.$implicit,u=c();l(),s("classIcone",!(r==null||(t=r.getTimbreAcquisModel())==null)&&t.isDoublon()?"accent":"primary")("type",u.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",!(r==null||(i=r.getTimbreAcquisModel())==null)&&i.isDoublon()?u.FontAwesomeEnum.CIRCLE_MINUS:u.FontAwesomeEnum.CIRCLE_PLUS)("info",!(r==null||(n=r.getTimbreAcquisModel())==null)&&n.isDoublon()?"pas en double":"en double")}}function Zn(o,e){if(o&1&&(m(0,"th",57),f(1,"lib-icon",58),a()),o&2){let t=c();l(),s("type",t.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",t.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Yn(o,e){if(o&1){let t=O();m(0,"td",46)(1,"lib-icon",59),C("click",function(){let n=h(t).$implicit,r=c();return _(r.modifier(n))}),a()()}if(o&2){let t=c();l(),s("type",t.FontAwesomeTypeEnum.TYPE_LIGHT)("icone",t.FontAwesomeEnum.PENCIL)("info","Modifier")}}function Xn(o,e){if(o&1&&(m(0,"th",57),f(1,"lib-icon",58),a()),o&2){let t=c();l(),s("type",t.FontAwesomeTypeEnum.TYPE_SOLID)("icone",t.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Kn(o,e){if(o&1){let t=O();m(0,"td",46)(1,"lib-icon",59),C("click",function(){let n=h(t).$implicit,r=c();return _(r.supprimer(n))}),a()()}if(o&2){let t=c();l(),s("type",t.FontAwesomeTypeEnum.TYPE_SOLID)("icone",t.FontAwesomeEnum.TRASH)("info","Supprimer")}}function Jn(o,e){o&1&&f(0,"tr",60)}function eo(o,e){o&1&&f(0,"tr",61)}var Ut=class o{constructor(e,t,i,n){this.timbreService=e;this.timbreUtilsService=t;this.dialog=i;this.utilsService=n;this.dataSource=new Pe([])}paginator;sort;timbres$;total$;modif=!0;load$=new D(!1);dataSource=new Pe;displayedColumns;timbre=new R;annees$;FontAwesomeEnum=st;FontAwesomeTypeEnum=at;ngOnInit(){this.annees$=this.timbreUtilsService.getAnneesAsync("/timbres"),this.timbre.setTimbreAcquisModel(new W),this.displayedColumns=["image","id","annee","idBloc","monnaie","type","yt","acquis","doublon"],this.modif&&this.displayedColumns.push("modifier","supprimer"),this.load$.next(!1),this.timbres$.subscribe(e=>{this.dataSource.data=e,this.load$.next(!0)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}sortData(e){p(e)&&(this.dataSource.sort=this.sort)}filtreByCritere(){this.timbreUtilsService.timbreCritereModel.getCarnet()=="OUI"&&this.timbreUtilsService.timbreCritereModel.setBloc("OUI"),this.timbreUtilsService.timbreCritereModel.getAcquis()=="NON"&&this.timbreUtilsService.timbreCritereModel.setDoublon("TOUS"),this.timbreService.getTimbres(this.timbreUtilsService.timbreCritereModel)}applyFilter(e){let t=e.target.value;this.dataSource.filter=t.trim().toLowerCase()}resume(){let e=this.dialog.open(Dt,{height:"auto",maxHeight:"750px",width:"700px"});e.afterClosed().subscribe(()=>{e.close()})}acquis(e){this.timbreService.acquis(e,!1)}doublon(e){this.timbreService.acquis(e,!0)}modifier(e){let t=this.dialog.open(Ye,{height:"75vh",maxHeight:"750px",width:"30%"});t.componentInstance.id=e.getId(),t.afterClosed().subscribe(()=>{t.close()})}supprimer(e){let t=this.dialog.open(pi,{maxHeight:"95vh",data:{titre:"Confirmation",message:"Souhaitez-vous supprimer le timbre <b>n\xB0 "+e?.getId()+"</b> ?",btnDroite:"Oui",btnGauche:"Non"}});t.afterClosed().subscribe(()=>{t.componentInstance.data.resultat==="valider"&&this.timbreService.supprimer(e)})}exportTable(){let e=wt.json_to_sheet(this.dataSource.data),t=wt.book_new();wt.book_append_sheet(t,e,"Donn\xE9es");let i=ci(t,{bookType:"xlsx",type:"array"}),n=new Blob([i],{type:"application/octet-stream"});(0,Ti.saveAs)(n,"export_timbres.xlsx")}generatePDFByImage(){let e="https://firebasestorage.googleapis.com/v0/b/book-f941b.appspot.com/o/AF.png?alt=media&token=a1039f78-3cff-41ab-8569-ea1b2cefe2c1";this.generatePDF(null)}generatePDF(e){}static \u0275fac=function(t){return new(t||o)(B(P),B(X),B(pt),B(Y))};static \u0275cmp=Q({type:o,selectors:[["app-timbre-resultat"]],viewQuery:function(t,i){if(t&1&&(ie(_e,5),ie(xe,5)),t&2){let n;ne(n=oe())&&(i.paginator=n.first),ne(n=oe())&&(i.sort=n.first)}},inputs:{timbres$:"timbres$",total$:"total$",modif:"modif"},decls:52,vars:23,consts:[["noBloc",""],["fxFlexFill","",3,"fxHide","textSpec"],[3,"fxHide"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px",2,"height","50px"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",2,"height","50px"],["fxFlex","",2,"font-size","1.2em"],[1,"bold"],[1,"accent","click",2,"font-size","2em",3,"click","icone","type","info","classInfo"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","15px","style","height: 50px",4,"ngIf"],["id","pdf-content","mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","image"],["mat-header-cell","","class","image",4,"matHeaderCellDef"],["mat-cell","","class","alignCenter",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","annee"],["matColumnDef","idBloc"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","monnaie"],["mat-header-cell","","mat-sort-header","","class","hide-on-mobile",4,"matHeaderCellDef"],["mat-cell","","class","hide-on-mobile",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","yt"],["matColumnDef","acquis"],["matColumnDef","doublon"],["matColumnDef","modifier"],["mat-header-cell","","class","alignCenter",4,"matHeaderCellDef"],["matColumnDef","supprimer"],["mat-header-row","","class","bg-primary color-white",4,"matHeaderRowDef"],["mat-row","","class","mat-row",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","100px"],["name","acquis",3,"ngModelChange","ngModel","placeholder"],[1,"selectMin",3,"value"],["name","doublon",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["name","carnet",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["name","bloc",1,"scrollBarAccent",3,"ngModelChange","ngModel","placeholder"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input","select",2,"width","150px"],["name","anneeSelect","multiple","",3,"ngModelChange","ngModel","placeholder"],["class","selectMin",3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end center",1,"form-input",2,"width","200px","min-height","55px","height","55px"],["placeholder","Filtrer les donn\xE9es","type","text",3,"input"],[1,"primary","click",2,"font-size","1.7em",3,"click","type","icone","info"],["mat-header-cell","",1,"image"],[1,"hide-on-mobile",3,"object","key"],["mat-cell","",1,"alignCenter"],["class","image click",3,"src","click",4,"ngIf"],[1,"image","click",3,"click","src"],["mat-header-cell","","mat-sort-header",""],[3,"object","key"],["mat-cell",""],[3,"ngIf","ngIfElse"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header","",1,"hide-on-mobile"],["mat-cell","",1,"hide-on-mobile"],[1,"click",2,"font-size","1.2em",3,"click","classIcone","type","icone","info"],["mat-header-cell","",1,"alignCenter"],[2,"font-size","1.2em",3,"type","icone","info"],[1,"primary","click",2,"font-size","1.2em",3,"click","type","icone","info"],["mat-header-row","",1,"bg-primary","color-white"],["mat-row","",1,"mat-row"]],template:function(t,i){t&1&&(f(0,"lib-spinner",1),v(1,"async"),m(2,"section",2),v(3,"async"),m(4,"div",3)(5,"div",4)(6,"div",5)(7,"span"),d(8,"Nombre de timbres : "),a(),m(9,"span",6),d(10),v(11,"async"),v(12,"async"),a()(),m(13,"lib-icon",7),C("click",function(){return i.resume()}),a()(),b(14,Cn,40,28,"div",8),a(),m(15,"table",9),C("matSortChange",function(r){return i.sortData(r)}),A(16,10),b(17,vn,2,2,"th",11)(18,yn,2,1,"td",12),E(),A(19,13),b(20,Bn,2,2,"th",14)(21,In,2,1,"td",15),E(),A(22,16),b(23,wn,2,2,"th",14)(24,Dn,4,2,"td",15),E(),A(25,17),b(26,Rn,2,2,"th",18)(27,qn,4,2,"td",15),E(),A(28,19),b(29,Nn,2,2,"th",20)(30,Vn,4,2,"td",21),E(),A(31,22),b(32,kn,2,2,"th",20)(33,Pn,2,1,"td",21),E(),A(34,23),b(35,$n,2,2,"th",20)(36,Hn,2,1,"td",21),E(),A(37,24),b(38,Wn,2,2,"th",18)(39,zn,2,4,"td",12),E(),A(40,25),b(41,Qn,2,2,"th",18)(42,Gn,2,4,"td",12),E(),A(43,26),b(44,Zn,2,3,"th",27)(45,Yn,2,3,"td",12),E(),A(46,28),b(47,Xn,2,3,"th",27)(48,Kn,2,3,"td",12),E(),b(49,Jn,1,0,"tr",29)(50,eo,1,0,"tr",30),a(),f(51,"mat-paginator",31),a()),t&2&&(s("fxHide",S(1,14,i.load$)==!0)("textSpec","Chargement en cours ..."),l(2),s("fxHide",S(3,16,i.load$)==!1),l(8),lt(S(11,18,i.total$)?S(12,20,i.total$):i.dataSource==null||i.dataSource.data==null?null:i.dataSource.data.length),l(3),s("icone",i.FontAwesomeEnum.CHART_LINE_UP)("type",i.FontAwesomeTypeEnum.TYPE_SOLID)("info","D\xE9tail par ann\xE9e")("classInfo","tooltiptextDescription tooltiptextBgWhite widthAuto"),l(),s("ngIf",i.modif),l(),s("dataSource",i.dataSource),l(34),s("matHeaderRowDef",i.displayedColumns),l(),s("matRowDefColumns",i.displayedColumns),l(),s("pageSize",15)("pageSizeOptions",mt(22,Tn)))},dependencies:[ut,ct,bt,gt,Tt,ht,ft,Mt,_t,xt,Ct,vt,_e,xe,dt,ye,le,me,ae,fe,se,be,Ae,ge,he,pe,St,Te,G],styles:[".mat-row[_ngcontent-%COMP%]{height:35px}.image[_ngcontent-%COMP%]{max-height:30px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:60px!important;max-width:60px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:35px!important;max-width:35px!important;padding:0!important}@media screen and (max-width: 800px){.mat-row[_ngcontent-%COMP%]{height:25px}.image[_ngcontent-%COMP%]{max-height:20px!important}.mat-column-acquis[_ngcontent-%COMP%], .mat-column-doublon[_ngcontent-%COMP%]{width:50px!important;max-width:50px!important;padding:0!important}.mat-column-ajouter[_ngcontent-%COMP%], .mat-column-modifier[_ngcontent-%COMP%], .mat-column-supprimer[_ngcontent-%COMP%]{width:20px!important;max-width:20px!important;padding:0!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:0 5px!important}th[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{font-size:.8em}.mat-column-libelle[_ngcontent-%COMP%],   .mat-column-libelle .mat-sort-header-container{width:40px!important;max-width:40px!important}.mat-column-drapeau[_ngcontent-%COMP%],   .mat-column-drapeau span{width:15px!important;max-width:15px!important}.mat-column-classeur[_ngcontent-%COMP%],   .mat-column-classeur .mat-sort-header-container, .mat-column-page[_ngcontent-%COMP%],   .mat-column-page .mat-sort-header-container{width:15px!important;max-width:15px!important}.mat-column-total[_ngcontent-%COMP%],   .mat-column-total .mat-sort-header-container{width:25px!important;max-width:25px!important}.hide-on-mobile[_ngcontent-%COMP%]{display:none}}"]})};function io(o,e){if(o&1&&(f(0,"lib-spinner",5),v(1,"async")),o&2){let t=c();s("textSpec",S(1,1,t.messageLoad$))}}function no(o,e){if(o&1&&(f(0,"mat-error",17),v(1,"async")),o&2){let t=c(2);s("innerHTML",S(1,1,t.messageError$),ve)}}function oo(o,e){if(o&1&&f(0,"app-timbre-resultat",18),o&2){let t=c(2);s("timbres$",t.timbres$)("modif",!1)}}function ro(o,e){o&1&&(m(0,"button",19),d(1," Enregistrer "),a())}function lo(o,e){if(o&1){let t=O();m(0,"form",6,1),C("ngSubmit",function(){h(t);let n=V(1),r=c();return _(r.valider(n))}),m(2,"div",7),b(3,no,2,3,"mat-error",8),v(4,"async"),b(5,oo,1,2,"app-timbre-resultat",9),v(6,"async"),a(),m(7,"div",10)(8,"div",11)(9,"input",12),j("ngModelChange",function(n){h(t);let r=c();return F(r.annee,n)||(r.annee=n),_(n)}),a()(),m(10,"button",13),C("click",function(){h(t);let n=c();return _(n.close())}),d(11," Annuler "),a(),m(12,"input",14),C("change",function(n){h(t);let r=c();return _(r.onFileChange(n))}),a(),m(13,"button",15),C("click",function(){h(t);let n=c();return _(n.triggerFileInput())}),d(14," Choisir un fichier "),a(),b(15,ro,2,0,"button",16),v(16,"async"),a()()}if(o&2){let t,i,n=V(1),r=c();s("ngClass",n!=null&&n.submitted?"red-color":"blue-color"),l(3),s("ngIf",S(4,8,r.messageError$)),l(2),s("ngIf",((t=S(6,10,r.timbres$))==null?null:t.length)>0),l(4),N("ngModel",r.annee),s("max",r.maxAnnee)("zMax",r.maxAnnee),l(3),Ht("id",r.idFile),l(3),s("ngIf",((i=S(16,12,r.timbres$))==null?null:i.length)>0)}}var qt=class o{constructor(e,t,i,n,r,u){this.authService=e;this.timbreService=t;this.timbreBlocService=i;this.uploadService=n;this.utilsService=r;this.dialogRef=u}dossier="/assets/images/timbres/";timbres$=new D(null);messageError$=new D(null);messageLoad$=new D("Chargement en cours ...");load$=new D(null);idFile="fileImport";identTimbre=1;identBloc=1;timbresModel=[];timbresBlocsModel=[];maxAnnee=new Date().getFullYear();annee=new Date().getFullYear();triggerFileInput(){document.getElementById(this.idFile).click()}onFileChange(e){let t=e.target.files[0];t&&(this.load$.next(!1),this.messageLoad$.next("Chargement en cours ..."),this.saveCsv(t))}saveCsv(e){let t=new FileReader;t.onload=()=>{let i=t.result;this.parseCsv(i)},t.readAsText(e)}parseCsv(e){H([this.utilsService.getMaxIdentAsync("/timbres"),this.utilsService.getMaxIdentAsync("/timbres_bloc"),this.authService.getUser()]).pipe(y(([t,i,n])=>p(n))).subscribe(([t,i,n])=>{p(t)&&t>1&&(this.identTimbre=t+1),p(i)&&i>1&&(this.identBloc=i+1),this.timbresModel=[],this.timbres$.next(null),Mi.parse(e,{header:!0,skipEmptyLines:!0,complete:r=>{p(r.data)&&r.data?.length>0&&(this.timbresBlocsModel=[],r.data.forEach((u,g)=>{let M=this.setTimbre(u,n);p(M?.getId())&&(this.timbresModel.push(M),this.identTimbre++),g==r.data.length-1&&(this.timbres$.next(this.timbresModel),this.load$.next(!0))}))},error:r=>{console.error("Erreur lors du parsing du CSV :",r)}})})}setTimbre(e,t){let i=new R,n=e.CODE!="NULL"&&e.CODE!=""?Number(e.CODE):null,r=e.IDENT_BLOC!="NULL"&&e.IDENT_BLOC!=""&&p(e.IDENT_BLOC)?Number(e.IDENT_BLOC):null,u=e.ANNEE!="NULL"&&e.ANNEE!=""?Number(e.ANNEE):null,g=e.MONNAIE!="NULL"&&e.MONNAIE!=""?e.MONNAIE:null;if(u==this.annee){i.setId(this.identTimbre),i.setType(e.TYPE!="NULL"&&e.TYPE!=""?e.TYPE:null),i.setYt(e.YT!="NULL"&&e.YT!=""?e.YT:null),i.setAnnee(u);let M=new W;M.setIdTimbre(i.getId()),M.setIdUser(t.getId()),M.setAcquis(e.ACQUIS=="1"),M.setDoublon(e.DOUBLON=="1"),i.setTimbreAcquisModel(M);let w=this.dossier+u+"/",z="";if(p(r)){if(w+="bloc/"+r,z=w+".png",w+="-",i.setTimbreBlocModel(this.timbresBlocsModel.find(L=>L.getAnnee()==u&&L.idOrigine==r)),ee(i.getTimbreBlocModel())){let L=new q;L.setId(this.identBloc),L.setAnnee(u),L.setMonnaie(g),L.setCarnet(e.CARNET=="1"),L.idOrigine=r;let Xe=new K;Xe.setIdBloc(this.identBloc),Xe.setIdUser(t.getId()),Xe.setAcquis(e.ACQUIS_BLOC=="1"),Xe.setDoublon(e.DOUBLON_BLOC=="1"),L.setTimbreBlocAcquisModel(Xe),this.uploadService.checkIfImageExists(z).pipe(y()).subscribe(vi=>{vi&&(L.setImage(z),L.setImageTable(z),L.setImageZoom(z))}),this.timbresBlocsModel.push(L),i.setTimbreBlocModel(L),this.identBloc++}i.setIdBloc(i.getTimbreBlocModel()?.getId())}else i.setMonnaie(g);w+=n+".png",this.uploadService.checkIfImageExists(w).pipe(y()).subscribe(L=>{L&&(i.setImage(w),i.setImageTable(w),i.setImageZoom(w))})}return i}valider(e){this.messageError$.next(null),e?.valid&&(this.load$.next(!1),this.messageLoad$.next("Import en cours ..."),p(this.timbresBlocsModel)&&this.timbresBlocsModel?.length>0&&this.timbresBlocsModel.forEach((t,i)=>{this.saveBloc(t)}),this.timbres$.pipe(y()).subscribe(t=>{if(p(t)&&t?.length>0)t.forEach((i,n)=>{this.saveTimbre(i,n==t.length-1)});else{this.messageError$.next("Donn\xE9es incorrectes");return}}))}saveBloc(e){H([this.timbreBlocService.upload(e,"autre"),this.timbreBlocService.upload(e,"table"),this.timbreBlocService.upload(e,"zoom")]).pipe(y(([t,i,n])=>p(t)&&p(n)&&p(i))).subscribe(([t,i,n])=>{p(i)&&i!="nok"&&e.setImage(i),p(t)&&t!="nok"&&e.setImageTable(t),p(n)&&n!="nok"&&e.setImageZoom(n),e?.getTimbreBlocAcquisModel()?.isAcquis()&&this.timbreBlocService.addAcquis(e?.getTimbreBlocAcquisModel()?.getIdUser(),e,e?.getTimbreBlocAcquisModel()?.isDoublon()),this.timbreBlocService.ajouter(e,!1)})}saveTimbre(e,t){H([this.timbreService.upload(e,"autre"),this.timbreService.upload(e,"table"),this.timbreService.upload(e,"zoom")]).pipe(y(([i,n,r])=>p(i)&&p(r)&&p(n))).subscribe(([i,n,r])=>{p(n)&&n!="nok"&&e.setImage(n),p(i)&&i!="nok"&&e.setImageTable(i),p(r)&&r!="nok"&&e.setImageZoom(r),e?.getTimbreAcquisModel()?.isAcquis()&&this.timbreService.addAcquis(e?.getTimbreAcquisModel()?.getIdUser(),e,e?.getTimbreAcquisModel()?.isDoublon()),this.timbreService.ajouter(e,t),t&&(this.load$.next(!0),this.close())})}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||o)(B(Ie),B(P),B(J),B(He),B(Y),B(ke))};static \u0275cmp=Q({type:o,selectors:[["app-timbre-importer"]],decls:8,vars:4,consts:[["load",""],["formModif","ngForm"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","space-between stretch",1,"dialog-modal"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","start center",1,"titre-modal","bg-primary","color-white"],[3,"ngIf","ngIfElse"],["fxFlexFill","",3,"textSpec"],["ngForm","formModif","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","start stretch",1,"formulaire-box-elevation",3,"ngSubmit","ngClass"],["fxLayout","column","fxLayoutGap","20px",1,"bloc-modal"],[3,"innerHTML",4,"ngIf"],[3,"timbres$","modif",4,"ngIf"],["fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","end end",1,"bloc-bouton-modal"],["fxLayout","column","fxFlex","20","fxLayoutAlign","end end",1,"form-input","noError"],["name","annee","type","number","minlength","4","maxlength","4","min","1900","zMin","1900","required","","zControl","",2,"width","60px !important",3,"ngModelChange","ngModel","max","zMax"],["type","button","mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["type","file","accept",".xls, .xlsx, .csv","hidden","","required","",3,"change","id"],["type","button","mat-raised-button","","color","accent",1,"rounded","large","color-white",3,"click"],["type","submit","class","rounded large color-white","mat-raised-button","","color","accent",4,"ngIf"],[3,"innerHTML"],[3,"timbres$","modif"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"]],template:function(t,i){if(t&1&&(m(0,"div",2)(1,"div",3)(2,"span"),d(3,"TIMBRE IMPORTER"),a()(),b(4,io,2,3,"ng-template",4),v(5,"async"),b(6,lo,17,14,"ng-template",null,0,re),a()),t&2){let n=V(7);l(4),s("ngIf",S(5,2,i.load$)==!1)("ngIfElse",n)}},dependencies:[ce,Ve,Se,le,me,ae,fe,se,be,we,Oe,Ee,Le,ge,De,Ne,Fe,je,qe,Ue,he,Re,pe,$e,We,ze,Ut,G]})};var mo=["canvas"];function ao(o,e){o&1&&f(0,"lib-spinner",5),o&2&&s("textSpec","Chargement en cours ...")}function so(o,e){if(o&1&&(f(0,"mat-error",18),v(1,"async")),o&2){let t=c(2);s("innerHTML",S(1,1,t.messageError$),ve)}}function co(o,e){if(o&1){let t=O();m(0,"div",10)(1,"label"),f(2,"lib-libelle-model",11),a(),m(3,"input",19),j("ngModelChange",function(n){h(t);let r=c(2);return F(r.timbreBlocModel.id,n)||(r.timbreBlocModel.id=n),_(n)}),a()()}if(o&2){let t=c(2);l(2),s("object",t.timbreBlocModel)("key","id"),l(),N("ngModel",t.timbreBlocModel.id),s("disabled",!!(t.timbreBlocModel!=null&&t.timbreBlocModel.getId()))}}function po(o,e){if(o&1){let t=O();m(0,"form",6,1),C("ngSubmit",function(){h(t);let n=V(1),r=c();return _(r.valider(n))}),m(2,"div",7),b(3,so,2,3,"mat-error",8),v(4,"async"),b(5,co,4,4,"div",9),m(6,"div",10)(7,"label"),f(8,"lib-libelle-model",11),a(),m(9,"input",12),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreBlocModel.annee,n)||(r.timbreBlocModel.annee=n),_(n)}),a()(),m(10,"div",10)(11,"label"),f(12,"lib-libelle-model",11),a(),m(13,"input",13),j("ngModelChange",function(n){h(t);let r=c();return F(r.timbreBlocModel.monnaie,n)||(r.timbreBlocModel.monnaie=n),_(n)}),a()(),m(14,"lib-upload",14),C("outPutObject",function(n){h(t);let r=c();return _(r.timbreBlocModel=n)}),a()(),m(15,"div",15)(16,"button",16),C("click",function(){h(t);let n=c();return _(n.close())}),d(17," Annuler "),a(),m(18,"button",17),d(19," Enregistrer "),a()()()}if(o&2){let t=V(1),i=c();s("ngClass",t!=null&&t.submitted?"red-color":"blue-color"),l(3),s("ngIf",S(4,15,i.messageError$)),l(2),s("ngIf",i.timbreBlocModel==null?null:i.timbreBlocModel.getId()),l(3),s("object",i.timbreBlocModel)("key","annee"),l(),N("ngModel",i.timbreBlocModel.annee),s("max",i.maxAnnee)("zMax",i.maxAnnee),l(3),s("object",i.timbreBlocModel)("key","monnaie"),l(),N("ngModel",i.timbreBlocModel.monnaie),l(),s("object",i.timbreBlocModel)("key","image")("maxWidth",i.timbreBlocService.widthTimbre)("maxHeight",i.timbreBlocService.heightTimbre)}}var Nt=class o{constructor(e,t,i,n){this.httpResponseHandlerService=e;this.dialogRef=t;this.utilsService=i;this.timbreBlocService=n}canvas;messageError$=new D(null);load$=new D(null);id;maxAnnee=new Date().getFullYear();timbreBlocModel=new q;fileUploadModel=new Ze;ngOnInit(){this.initUpload(),this.load$.next(!1),p(this.id)?this.timbreBlocService.getBlocByIdAsync(this.id).subscribe(e=>{this.timbreBlocModel=e,this.load$.next(!0)}):(this.timbreBlocModel.setAnnee(new Date().getFullYear()),this.timbreBlocModel.setMonnaie("E"),this.load$.next(!0))}initUpload(){this.fileUploadModel.setDossier("test"),this.fileUploadModel.setNom(new Date().getTime()?.toString());let e=new Me;e.setMaxWidth(this.timbreBlocService.widthTimbre),e.setMaxHeight(this.timbreBlocService.heightTimbre),e.setDossier("autre");let t=new Me;t.setMaxWidth(this.timbreBlocService.widthTimbreZoom),t.setMaxHeight(this.timbreBlocService.heightTimbreZoom),t.setDossier("zoom"),this.fileUploadModel.setDetail([e,t])}valider(e){if(this.messageError$.next(null),e?.valid)if(p(this.timbreBlocModel.getImage()))this.saveData();else{this.messageError$.next("Veuillez s\xE9lectionner une image");return}}saveData(){this.load$.next(!1),p(this.timbreBlocModel.getId())?this.save():this.ajouter()}ajouter(){this.utilsService.getMaxIdentAsync("/timbres_bloc").pipe(y()).subscribe(e=>{this.timbreBlocModel.setId(e),this.save(!0)})}save(e){try{H([this.timbreBlocService.upload(this.timbreBlocModel,"autre"),this.timbreBlocService.upload(this.timbreBlocModel,"table"),this.timbreBlocService.upload(this.timbreBlocModel,"zoom")]).pipe(y(([t,i,n])=>p(t)&&p(n)&&p(i))).subscribe(([t,i,n])=>{p(i)&&i!="nok"&&this.timbreBlocModel.setImage(i),p(t)&&t!="nok"&&this.timbreBlocModel.setImageTable(t),p(n)&&n!="nok"&&this.timbreBlocModel.setImageZoom(n),e?this.timbreBlocService.ajouter(this.timbreBlocModel,!0):this.timbreBlocService.modifier(this.timbreBlocModel),this.httpResponseHandlerService.showNotificationSuccess("Transaction termin\xE9e","Votre timbre a bien \xE9t\xE9 modifi\xE9e."),this.load$.next(!0),this.dialogRef.close()})}catch{this.httpResponseHandlerService.showNotificationError("Transaction non aboutie","Votre timbre n'a pas pu \xEAtre modifi\xE9."),this.load$.next(!0)}}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||o)(B(yt),B(ke),B(Y),B(J))};static \u0275cmp=Q({type:o,selectors:[["app-timbre-modifier-bloc"]],viewQuery:function(t,i){if(t&1&&ie(mo,5),t&2){let n;ne(n=oe())&&(i.canvas=n.first)}},decls:10,vars:6,consts:[["load",""],["formModif","ngForm"],["fxFlexFill","","fxLayout","column","fxLayoutAlign","space-between stretch",1,"dialog-modal"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","start center",1,"titre-modal","bg-primary","color-white"],[3,"ngIf","ngIfElse"],["fxFlexFill","",3,"textSpec"],["ngForm","formModif","fxLayoutGap","20px","fxFlex","100","fxLayout","column","fxLayoutAlign","space-between stretch",1,"formulaire-box-elevation",3,"ngSubmit","ngClass"],["fxLayout","column","fxLayoutGap","20px",1,"bloc-modal"],[3,"innerHTML",4,"ngIf"],["fxLayout","column","class","form-input",4,"ngIf"],["fxLayout","column",1,"form-input"],[3,"object","key"],["name","page","type","number","minlength","4","maxlength","4","min","1900","zMin","1900","required","","zControl","",1,"annee",2,"width","60px !important",3,"ngModelChange","ngModel","max","zMax"],["name","monnaie","type","text","trim","","minlength","1","maxlength","2","required","","zControl","",2,"width","25px !important",3,"ngModelChange","ngModel"],[3,"outPutObject","object","key","maxWidth","maxHeight"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","end end",1,"bloc-bouton-modal"],["type","button","mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"rounded","large","color-white"],[3,"innerHTML"],["name","code","type","text","trim","","upperCase","","noEspace","","required","","zControl","",3,"ngModelChange","ngModel","disabled"]],template:function(t,i){if(t&1&&(m(0,"div",2)(1,"div",3)(2,"span"),d(3),a(),m(4,"span"),d(5),a()(),b(6,ao,1,1,"ng-template",4),v(7,"async"),b(8,po,20,17,"ng-template",null,0,re),a()),t&2){let n=V(9);l(3),I("",i.timbreBlocModel!=null&&i.timbreBlocModel.getId()?"MODIFICATION":"AJOUT"," BLOC "),l(2),lt(i.timbreBlocModel==null?null:i.timbreBlocModel.getId()),l(),s("ngIf",S(7,4,i.load$)==!1)("ngIfElse",n)}},dependencies:[ce,Ve,Se,le,me,ae,fe,se,be,we,Oe,Ee,Le,ge,De,Ne,Fe,je,qe,Ue,he,Re,Te,pe,ti,$e,Bt,We,ze,si,It,G],encapsulation:2})};function uo(o,e){if(o&1){let t=O();A(0),m(1,"lib-icon",6),C("click",function(){let n=h(t).$implicit,r=c(2);return _(r.headerService.setRoute(n.getRoute()))}),a(),E()}if(o&2){let t=e.$implicit;l(),s("icone",t==null?null:t.getIcone())("type",t==null?null:t.getType())("info",t==null?null:t.getInfo())("classInfo","tooltiptextDescription tooltiptextBgWhite widthAuto")}}function bo(o,e){if(o&1&&(A(0),b(1,uo,2,4,"ng-container",5),v(2,"async"),E()),o&2){let t=c();l(),s("ngForOf",S(2,1,t.headerService.choixRoutesTimbre$))}}function fo(o,e){if(o&1){let t=O();m(0,"button",3),C("click",function(){h(t);let n=c();return _(n.ajouter())}),d(1," Ajouter "),a()}}function go(o,e){o&1&&(A(0),d(1,"\xA0Bloc"),E())}function ho(o,e){if(o&1){let t=O();m(0,"lib-icon",7),C("click",function(){h(t);let n=c();return _(n.importer())}),a()}if(o&2){let t=c();s("icone",t.FontAwesomeEnum.UPLOAD)("type",t.FontAwesomeTypeEnum.TYPE_SOLID)("info","Importer les timbres")("classInfo","tooltiptextDescription tooltiptextBgWhite widthAuto")}}var Ci=class o{constructor(e,t,i){this.headerService=e;this.timbreService=t;this.dialog=i}FontAwesomeEnum=st;RouteEnum=Qt;FontAwesomeTypeEnum=at;ajouter(){let e=this.dialog.open(Ye,{maxHeight:"95vh",width:"30%"});e.afterClosed().subscribe(()=>{e.close()})}ajouterBloc(){let e=this.dialog.open(Nt,{maxHeight:"95vh",width:"30%"});e.afterClosed().subscribe(()=>{e.close()})}ajouterBouchon(){this.timbreService.ajouterSansId(this.timbreService.getBouchon())}importer(){let e=this.dialog.open(qt,{height:"90vh",width:"70%"});e.afterClosed().subscribe(()=>{e.close()})}supprimer(){}static \u0275fac=function(t){return new(t||o)(B(Gt),B(P),B(pt))};static \u0275cmp=Q({type:o,selectors:[["app-menu"]],decls:11,vars:12,consts:[["fxLayout","row","fxLayoutGap","20px"],[4,"ngIf"],["class","rounded large color-white","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"rounded","large","color-white",3,"click"],["class","accent click","style","font-size: 2em",3,"icone","type","info","classInfo","click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"primary","click",2,"font-size","2em",3,"click","icone","type","info","classInfo"],[1,"accent","click",2,"font-size","2em",3,"click","icone","type","info","classInfo"]],template:function(t,i){if(t&1&&(m(0,"div",0),b(1,bo,3,3,"ng-container",1),v(2,"async"),b(3,fo,2,0,"button",2),v(4,"async"),m(5,"button",3),C("click",function(){return i.ajouterBloc()}),d(6," Ajouter "),b(7,go,2,0,"ng-container",1),v(8,"async"),a(),b(9,ho,1,4,"lib-icon",4),v(10,"async"),a()),t&2){let n;l(),s("ngIf",((n=S(2,4,i.headerService.choixRoutesTimbre$))==null?null:n.length)>0),l(2),s("ngIf",S(4,6,i.headerService.route$)==i.RouteEnum.TIMBRE),l(4),s("ngIf",S(8,8,i.headerService.route$)==i.RouteEnum.TIMBRE),l(2),s("ngIf",S(10,10,i.headerService.route$)==i.RouteEnum.TIMBRE)}},dependencies:[ye,le,me,ae,St,ce,G],encapsulation:2})};export{k as a,q as b,K as c,X as d,J as e,P as f,Nt as g,Et as h,Dt as i,Ut as j,qt as k,Ci as l,fi as m};
